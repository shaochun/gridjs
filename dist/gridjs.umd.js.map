{"version":3,"file":"gridjs.umd.js","sources":["../src/types.ts","../node_modules/.pnpm/preact@10.19.3/node_modules/preact/dist/preact.module.js","../src/util/id.ts","../src/base.ts","../src/view/htmlElement.tsx","../src/util/html.ts","../src/cell.ts","../src/pipeline/processor.ts","../src/row.ts","../src/tabular.ts","../src/util/array.ts","../src/util/eventEmitter.ts","../src/util/deepEqual.ts","../src/pipeline/filter/globalSearch.ts","../src/operator/search.ts","../src/util/className.ts","../src/pipeline/filter/serverGlobalSearch.ts","../node_modules/.pnpm/preact@10.19.3/node_modules/preact/hooks/dist/hooks.module.js","../src/hooks/useConfig.ts","../src/i18n/hanji_TW.ts","../src/i18n/language.ts","../src/view/plugin/search/actions.ts","../src/hooks/useStore.ts","../src/hooks/useSelector.ts","../src/view/plugin/search/search.tsx","../src/util/debounce.ts","../src/pipeline/limit/pagination.ts","../src/pipeline/limit/serverPagination.ts","../src/view/plugin/pagination.tsx","../src/util/width.ts","../src/view/table/shadow.tsx","../src/util/string.ts","../src/util/log.ts","../src/plugin.ts","../src/header.ts","../src/storage/storage.ts","../src/storage/memory.ts","../src/storage/server.ts","../src/storage/storageUtils.ts","../src/pipeline/pipeline.ts","../src/pipeline/extractor/storage.ts","../src/pipeline/transformer/arrayToTabular.ts","../src/pipeline/initiator/server.ts","../src/pipeline/transformer/storageResponseToArray.ts","../src/pipeline/pipelineUtils.ts","../src/state/store.ts","../src/config.ts","../src/view/table/td.tsx","../src/view/table/tr.tsx","../src/view/table/messageRow.tsx","../src/view/table/tbody.tsx","../src/pipeline/sort/native.ts","../src/view/plugin/sort/actions.ts","../src/pipeline/sort/server.ts","../src/view/plugin/sort/sort.tsx","../src/util/throttle.ts","../src/view/plugin/resize/resize.tsx","../src/view/table/th.tsx","../src/view/table/thead.tsx","../src/util/table.ts","../src/view/actions.ts","../src/view/table/table.tsx","../src/view/headerContainer.tsx","../src/view/footerContainer.tsx","../src/view/container.tsx","../src/grid.ts"],"sourcesContent":["import { ComponentChild } from 'preact';\nimport Row from './row';\nimport { SortConfig } from './view/plugin/sort/sort';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { Plugin } from './plugin';\n\nexport type OneDArray<T> = T[];\nexport type TwoDArray<T> = T[][];\n\n/**\n * Table cell types\n */\nexport type TCell = number | string | boolean | ComponentChild | HTMLElement;\n// Array of Arrays\nexport type TDataArrayRow = OneDArray<TCell>;\nexport type TDataArray = OneDArray<TDataArrayRow>;\n// Array of Objects\nexport type TDataObjectRow = { [key: string]: TCell };\nexport type TDataObject = OneDArray<TDataObjectRow>;\n// (Array of Arrays) and (Array of Objects)\nexport type TData = TDataArray | TDataObject;\n\n// Table header cell type\nexport interface TColumn {\n  id?: string;\n  // default data for all columns\n  data?: ((row: TDataArrayRow | TDataObjectRow) => TCell) | TCell;\n  // column label\n  name?: string | ComponentChild;\n  plugin?: Plugin<any>;\n  // column width\n  width?: string;\n  minWidth?: string;\n  sort?: SortConfig;\n  columns?: OneDArray<TColumn>;\n  resizable?: boolean;\n  hidden?: boolean;\n  formatter?: (cell: TCell, row: Row, column: TColumn) => ComponentChild;\n  // HTML attributes to be added to all cells and header of this column\n  attributes?:\n    | ((\n        // this is null when `attributes` is called for a th\n        cell: TCell | null,\n        row: Row | null,\n        column: TColumn,\n      ) => JSXInternal.HTMLAttributes<HTMLTableCellElement>)\n    | JSXInternal.HTMLAttributes<HTMLTableCellElement>;\n}\n\n// Comparator function for the sorting plugin\nexport type Comparator<T> = (a: T, b: T) => number;\n\nexport interface TColumnSort {\n  index: number;\n  // 1 ascending, -1 descending\n  direction?: 1 | -1;\n}\n\n// container status\nexport enum Status {\n  Init,\n  Loading,\n  Loaded,\n  Rendered,\n  Error,\n}\n\nexport type CSSDeclaration = {\n  [key: string]: string | number;\n};\n","var n,l,u,t,i,o,r,f,e,c={},s=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function v(n,l){for(var u in l)n[u]=l[u];return n}function p(n){var l=n.parentNode;l&&l.removeChild(n)}function y(l,u,t){var i,o,r,f={};for(r in u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return d(l,f,i,o,null)}function d(n,t,i,o,r){var f={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=l.vnode&&l.vnode(f),f}function _(){return{current:null}}function g(n){return n.children}function b(n,l){this.props=n,this.context=l}function m(n,l){if(null==l)return n.__?m(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?m(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function w(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!x.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||r)(x)}function x(){var n,u,t,o,r,e,c,s,a;for(i.sort(f);n=i.shift();)n.__d&&(u=i.length,o=void 0,e=(r=(t=n).__v).__e,s=[],a=[],(c=t.__P)&&((o=v({},r)).__v=r.__v+1,l.vnode&&l.vnode(o),L(c,o,r,t.__n,void 0!==c.ownerSVGElement,32&r.__u?[e]:null,s,null==e?m(r):e,!!(32&r.__u),a),o.__.__k[o.__i]=o,M(s,o,a),o.__e!=e&&k(o)),i.length>u&&i.sort(f));x.__r=0}function C(n,l,u,t,i,o,r,f,e,a,h){var v,p,y,d,_,g=t&&t.__k||s,b=l.length;for(u.__d=e,P(u,l,g),e=u.__d,v=0;v<b;v++)null!=(y=u.__k[v])&&\"boolean\"!=typeof y&&\"function\"!=typeof y&&(p=-1===y.__i?c:g[y.__i]||c,y.__i=v,L(n,y,p,i,o,r,f,e,a,h),d=y.__e,y.ref&&p.ref!=y.ref&&(p.ref&&z(p.ref,null,y),h.push(y.ref,y.__c||d,y)),null==_&&null!=d&&(_=d),65536&y.__u||p.__k===y.__k?e=S(y,e,n):\"function\"==typeof y.type&&void 0!==y.__d?e=y.__d:d&&(e=d.nextSibling),y.__d=void 0,y.__u&=-196609);u.__d=e,u.__e=_}function P(n,l,u){var t,i,o,r,f,e=l.length,c=u.length,s=c,a=0;for(n.__k=[],t=0;t<e;t++)null!=(i=n.__k[t]=null==(i=l[t])||\"boolean\"==typeof i||\"function\"==typeof i?null:\"string\"==typeof i||\"number\"==typeof i||\"bigint\"==typeof i||i.constructor==String?d(null,i,null,null,i):h(i)?d(g,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?d(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=n,i.__b=n.__b+1,f=H(i,u,r=t+a,s),i.__i=f,o=null,-1!==f&&(s--,(o=u[f])&&(o.__u|=131072)),null==o||null===o.__v?(-1==f&&a--,\"function\"!=typeof i.type&&(i.__u|=65536)):f!==r&&(f===r+1?a++:f>r?s>e-r?a+=f-r:a--:a=f<r&&f==r-1?f-r:0,f!==t+a&&(i.__u|=65536))):(o=u[t])&&null==o.key&&o.__e&&(o.__e==n.__d&&(n.__d=m(o)),N(o,o,!1),u[t]=null,s--);if(s)for(t=0;t<c;t++)null!=(o=u[t])&&0==(131072&o.__u)&&(o.__e==n.__d&&(n.__d=m(o)),N(o,o))}function S(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=S(t[i],l,u));return l}return n.__e!=l&&(u.insertBefore(n.__e,l||null),l=n.__e),l&&l.nextSibling}function $(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(h(n)?n.some(function(n){$(n,l)}):l.push(n)),l}function H(n,l,u,t){var i=n.key,o=n.type,r=u-1,f=u+1,e=l[u];if(null===e||e&&i==e.key&&o===e.type)return u;if(t>(null!=e&&0==(131072&e.__u)?1:0))for(;r>=0||f<l.length;){if(r>=0){if((e=l[r])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return r;r--}if(f<l.length){if((e=l[f])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return f;f++}}return-1}function I(n,l,u){\"-\"===l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||a.test(l)?u:u+\"px\"}function T(n,l,u,t,i){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||I(n.style,l,\"\");if(u)for(l in u)t&&u[l]===t[l]||I(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/(PointerCapture)$|Capture$/,\"$1\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=Date.now(),n.addEventListener(l,o?D:A,o)):n.removeEventListener(l,o?D:A,o);else{if(i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!==l&&\"height\"!==l&&\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&\"rowSpan\"!==l&&\"colSpan\"!==l&&\"role\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!==l[4]?n.removeAttribute(l):n.setAttribute(l,u))}}function A(n){var u=this.l[n.type+!1];if(n.t){if(n.t<=u.u)return}else n.t=Date.now();return u(l.event?l.event(n):n)}function D(n){return this.l[n.type+!0](l.event?l.event(n):n)}function L(n,u,t,i,o,r,f,e,c,s){var a,p,y,d,_,m,k,w,x,P,S,$,H,I,T,A=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[e=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof A)try{if(w=u.props,x=(a=A.contextType)&&i[a.__c],P=a?x?x.props.value:a.__:i,t.__c?k=(p=u.__c=t.__c).__=p.__E:(\"prototype\"in A&&A.prototype.render?u.__c=p=new A(w,P):(u.__c=p=new b(w,P),p.constructor=A,p.render=O),x&&x.sub(p),p.props=w,p.state||(p.state={}),p.context=P,p.__n=i,y=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=A.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=v({},p.__s)),v(p.__s,A.getDerivedStateFromProps(w,p.__s))),d=p.props,_=p.state,p.__v=u,y)null==A.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==A.getDerivedStateFromProps&&w!==d&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,P),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,P)||u.__v===t.__v)){for(u.__v!==t.__v&&(p.props=w,p.state=p.__s,p.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.forEach(function(n){n&&(n.__=u)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&f.push(p);break n}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,P),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(d,_,m)})}if(p.context=P,p.props=w,p.__P=n,p.__e=!1,$=l.__r,H=0,\"prototype\"in A&&A.prototype.render){for(p.state=p.__s,p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),I=0;I<p._sb.length;I++)p.__h.push(p._sb[I]);p._sb=[]}else do{p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++H<25);p.state=p.__s,null!=p.getChildContext&&(i=v(v({},i),p.getChildContext())),y||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(d,_)),C(n,h(T=null!=a&&a.type===g&&null==a.key?a.props.children:a)?T:[T],u,t,i,o,r,f,e,c,s),p.base=u.__e,u.__u&=-161,p.__h.length&&f.push(p),k&&(p.__E=p.__=null)}catch(n){u.__v=null,c||null!=r?(u.__e=e,u.__u|=c?160:32,r[r.indexOf(e)]=null):(u.__e=t.__e,u.__k=t.__k),l.__e(n,u,t)}else null==r&&u.__v===t.__v?(u.__k=t.__k,u.__e=t.__e):u.__e=j(t.__e,u,t,i,o,r,f,c,s);(a=l.diffed)&&a(u)}function M(n,u,t){u.__d=void 0;for(var i=0;i<t.length;i++)z(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function j(l,u,t,i,o,r,f,e,s){var a,v,y,d,_,g,b,k=t.props,w=u.props,x=u.type;if(\"svg\"===x&&(o=!0),null!=r)for(a=0;a<r.length;a++)if((_=r[a])&&\"setAttribute\"in _==!!x&&(x?_.localName===x:3===_.nodeType)){l=_,r[a]=null;break}if(null==l){if(null===x)return document.createTextNode(w);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",x):document.createElement(x,w.is&&w),r=null,e=!1}if(null===x)k===w||e&&l.data===w||(l.data=w);else{if(r=r&&n.call(l.childNodes),k=t.props||c,!e&&null!=r)for(k={},a=0;a<l.attributes.length;a++)k[(_=l.attributes[a]).name]=_.value;for(a in k)_=k[a],\"children\"==a||(\"dangerouslySetInnerHTML\"==a?y=_:\"key\"===a||a in w||T(l,a,null,_,o));for(a in w)_=w[a],\"children\"==a?d=_:\"dangerouslySetInnerHTML\"==a?v=_:\"value\"==a?g=_:\"checked\"==a?b=_:\"key\"===a||e&&\"function\"!=typeof _||k[a]===_||T(l,a,_,k[a],o);if(v)e||y&&(v.__html===y.__html||v.__html===l.innerHTML)||(l.innerHTML=v.__html),u.__k=[];else if(y&&(l.innerHTML=\"\"),C(l,h(d)?d:[d],u,t,i,o&&\"foreignObject\"!==x,r,f,r?r[0]:t.__k&&m(t,0),e,s),null!=r)for(a=r.length;a--;)null!=r[a]&&p(r[a]);e||(a=\"value\",void 0!==g&&(g!==l[a]||\"progress\"===x&&!g||\"option\"===x&&g!==k[a])&&T(l,a,g,k[a],!1),a=\"checked\",void 0!==b&&b!==l[a]&&T(l,a,b,k[a],!1))}return l}function z(n,u,t){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,t)}}function N(n,u,t){var i,o;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||z(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&N(i[o],u,t||\"function\"!=typeof n.type);t||null==n.__e||p(n.__e),n.__=n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function q(u,t,i){var o,r,f,e;l.__&&l.__(u,t),r=(o=\"function\"==typeof i)?null:i&&i.__k||t.__k,f=[],e=[],L(t,u=(!o&&i||t).__k=y(g,null,[u]),r||c,c,void 0!==t.ownerSVGElement,!o&&i?[i]:r?null:t.firstChild?n.call(t.childNodes):null,f,!o&&i?i:r?r.__e:t.firstChild,o,e),M(f,u,e)}function B(n,l){q(n,l,B)}function E(l,u,t){var i,o,r,f,e=v({},l.props);for(r in l.type&&l.type.defaultProps&&(f=l.type.defaultProps),u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:e[r]=void 0===u[r]&&void 0!==f?f[r]:u[r];return arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),d(l.type,e,i||l.key,o||l.ref,null)}function F(n,l){var u={__c:l=\"__cC\"+e++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,t;return this.getChildContext||(u=[],(t={})[l]=this,this.getChildContext=function(){return t},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(function(n){n.__e=!0,w(n)})},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=s.slice,l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},b.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=v({},this.state),\"function\"==typeof n&&(n=n(v({},u),this.props)),n&&v(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),w(this))},b.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),w(this))},b.prototype.render=g,i=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(n,l){return n.__v.__b-l.__v.__b},x.__r=0,e=0;export{b as Component,g as Fragment,E as cloneElement,F as createContext,y as createElement,_ as createRef,y as h,B as hydrate,t as isValidElement,l as options,q as render,$ as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","export type ID = string;\n\nexport function generateUUID(): ID {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","import { generateUUID, ID } from './util/id';\n\nclass Base {\n  private readonly _id: ID;\n\n  constructor(id?: ID) {\n    this._id = id || generateUUID();\n  }\n\n  get id(): ID {\n    return this._id;\n  }\n}\n\nexport default Base;\n","import { h } from 'preact';\n\nexport interface HTMLContentProps {\n  content: string;\n  parentElement?: string;\n}\n\nexport function HTMLElement(props: HTMLContentProps) {\n  return h(props.parentElement || 'span', {\n    dangerouslySetInnerHTML: { __html: props.content },\n  });\n}\n","import { h, VNode } from 'preact';\nimport { HTMLElement } from '../view/htmlElement';\n\nexport function decode(content: string): string {\n  const value = new DOMParser().parseFromString(content, 'text/html');\n  return value.documentElement.textContent;\n}\n\nexport function html(content: string, parentElement?: string): VNode {\n  return h(HTMLElement, { content: content, parentElement: parentElement });\n}\n","import Base from './base';\nimport { TCell } from './types';\nimport { html } from './util/html';\nimport { ComponentChild } from 'preact';\n\nclass Cell extends Base {\n  // because a Cell is a subset of TCell type\n  public data: number | string | boolean | ComponentChild;\n\n  constructor(data: TCell) {\n    super();\n\n    this.update(data);\n  }\n\n  private cast(data: TCell): number | string | boolean | ComponentChild {\n    if (data instanceof HTMLElement) {\n      return html(data.outerHTML);\n    }\n\n    return data;\n  }\n\n  /**\n   * Updates the Cell's data\n   *\n   * @param data\n   */\n  public update(data: TCell): Cell {\n    this.data = this.cast(data);\n    return this;\n  }\n}\n\nexport default Cell;\n","// The order of enum items define the processing order of the processor type\n// e.g. Extractor = 0 will be processed before Transformer = 1\nimport { generateUUID, ID } from '../util/id';\nimport { EventEmitter } from '../util/eventEmitter';\nimport { deepEqual } from '../util/deepEqual';\n\nexport enum ProcessorType {\n  Initiator,\n  ServerFilter,\n  ServerSort,\n  ServerLimit,\n  Extractor,\n  Transformer,\n  Filter,\n  Sort,\n  Limit,\n}\n\ninterface PipelineProcessorEvents {\n  propsUpdated: <T, P>(processor: PipelineProcessor<T, P>) => void;\n  beforeProcess: (...args) => void;\n  afterProcess: (...args) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface PipelineProcessorProps {}\n\nexport abstract class PipelineProcessor<\n  T,\n  P extends Partial<PipelineProcessorProps>,\n> extends EventEmitter<PipelineProcessorEvents> {\n  public readonly id: ID;\n  private _props: P;\n\n  abstract get type(): ProcessorType;\n  protected abstract _process(...args): T | Promise<T>;\n  protected validateProps?(...args): void;\n\n  constructor(props?: Partial<P>) {\n    super();\n\n    this._props = {} as P;\n    this.id = generateUUID();\n\n    if (props) this.setProps(props);\n  }\n\n  /**\n   * process is used to call beforeProcess and afterProcess callbacks\n   * This function is just a wrapper that calls _process()\n   *\n   * @param args\n   */\n  process(...args): T | Promise<T> {\n    if (this.validateProps instanceof Function) {\n      this.validateProps(...args);\n    }\n\n    this.emit('beforeProcess', ...args);\n    const result = this._process(...args);\n    this.emit('afterProcess', ...args);\n    return result;\n  }\n\n  setProps(props: Partial<P>): this {\n    const updatedProps = {\n      ...this._props,\n      ...props,\n    };\n\n    if (!deepEqual(updatedProps, this._props)) {\n      this._props = updatedProps;\n      this.emit('propsUpdated', this);\n    }\n\n    return this;\n  }\n\n  get props(): P {\n    return this._props;\n  }\n}\n","import Cell from './cell';\nimport Base from './base';\nimport { TCell } from './types';\n\nclass Row extends Base {\n  private _cells: Cell[];\n\n  constructor(cells?: Cell[]) {\n    super();\n\n    this.cells = cells || [];\n  }\n\n  public cell(index: number): Cell {\n    return this._cells[index];\n  }\n\n  public get cells(): Cell[] {\n    return this._cells;\n  }\n\n  public set cells(cells: Cell[]) {\n    this._cells = cells;\n  }\n\n  public toArray(): TCell[] {\n    return this.cells.map((cell) => cell.data);\n  }\n\n  /**\n   * Creates a new Row from an array of Cell(s)\n   * This method generates a new ID for the Row and all nested elements\n   *\n   * @param cells\n   * @returns Row\n   */\n  static fromCells(cells: Cell[]): Row {\n    return new Row(cells.map((cell) => new Cell(cell.data)));\n  }\n\n  get length(): number {\n    return this.cells.length;\n  }\n}\n\nexport default Row;\n","import Base from './base';\nimport Row from './row';\nimport Cell from './cell';\nimport { OneDArray, TCell, TwoDArray } from './types';\nimport { oneDtoTwoD } from './util/array';\n\nclass Tabular extends Base {\n  private _rows: Row[];\n  private _length: number;\n\n  constructor(rows?: Row[] | Row) {\n    super();\n\n    if (rows instanceof Array) {\n      this.rows = rows;\n    } else if (rows instanceof Row) {\n      this.rows = [rows];\n    } else {\n      this.rows = [];\n    }\n  }\n\n  get rows(): Row[] {\n    return this._rows;\n  }\n\n  set rows(rows: Row[]) {\n    this._rows = rows;\n  }\n\n  get length(): number {\n    return this._length || this.rows.length;\n  }\n\n  // we want to sent the length when storage is ServerStorage\n  set length(len: number) {\n    this._length = len;\n  }\n\n  public toArray(): TCell[][] {\n    return this.rows.map((row) => row.toArray());\n  }\n\n  /**\n   * Creates a new Tabular from an array of Row(s)\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param rows\n   * @returns Tabular\n   */\n  static fromRows(rows: Row[]): Tabular {\n    return new Tabular(rows.map((row) => Row.fromCells(row.cells)));\n  }\n\n  /**\n   * Creates a new Tabular from a 2D array\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param data\n   * @returns Tabular\n   */\n  static fromArray<T extends TCell>(\n    data: OneDArray<T> | TwoDArray<T>,\n  ): Tabular {\n    data = oneDtoTwoD(data);\n\n    return new Tabular(\n      data.map((row) => new Row(row.map((cell) => new Cell(cell)))),\n    );\n  }\n}\n\nexport default Tabular;\n","import { OneDArray, TwoDArray } from '../types';\n\nexport function oneDtoTwoD<T>(data: OneDArray<T> | TwoDArray<T>): TwoDArray<T> {\n  if (data[0] && !(data[0] instanceof Array)) {\n    return [data] as TwoDArray<T>;\n  }\n\n  return data as TwoDArray<T>;\n}\n\nexport function flatten<T>(arrays: TwoDArray<T>): OneDArray<T> {\n  return arrays.reduce((prev, x) => prev.concat(x), []);\n}\n","type EventArgs<T> = [T] extends [(...args: infer U) => any]\n  ? U\n  : [T] extends [void]\n  ? []\n  : [T];\n\n/**\n * Example:\n *\n * export interface BaseEvents<P, S> {\n *   SET_STATE: (component: BaseComponent<P, S>, state: S) => void;\n * }\n */\n\nexport interface EventEmitter<EventTypes> {\n  addListener<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean;\n}\n\nexport class EventEmitter<EventTypes> {\n  private callbacks: { [event: string]: ((...args) => void)[] };\n\n  // because we are using EventEmitter as a mixin and the\n  // constructor won't be called by the applyMixins function\n  // see src/base.ts and src/util/applyMixin.ts\n  private init(event?: string): void {\n    if (!this.callbacks) {\n      this.callbacks = {};\n    }\n\n    if (event && !this.callbacks[event]) {\n      this.callbacks[event] = [];\n    }\n  }\n\n  listeners(): { [event: string]: ((...args) => void)[] } {\n    return this.callbacks;\n  }\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    this.init(event as string);\n    this.callbacks[event as string].push(listener);\n    return this;\n  }\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    const eventName = event as string;\n\n    this.init();\n\n    if (!this.callbacks[eventName] || this.callbacks[eventName].length === 0) {\n      // there is no callbacks with this key\n      return this;\n    }\n\n    this.callbacks[eventName] = this.callbacks[eventName].filter(\n      (value) => value != listener,\n    );\n\n    return this;\n  }\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean {\n    const eventName = event as string;\n\n    this.init(eventName);\n\n    if (this.callbacks[eventName].length > 0) {\n      this.callbacks[eventName].forEach((value) => value(...args));\n      return true;\n    }\n\n    return false;\n  }\n}\n","/**\n * Returns true if both objects are equal\n * @param a left object\n * @param b right object\n * @returns\n */\nexport function deepEqual<A, B>(obj1: A, obj2: B) {\n  // If objects are not the same type, return false\n  if (typeof obj1 !== typeof obj2) {\n    return false;\n  }\n  // If objects are both null or undefined, return true\n  if (obj1 === null && obj2 === null) {\n    return true;\n  }\n  // If objects are both primitive types, compare them directly\n  if (typeof obj1 !== 'object') {\n    // eslint-disable-next-line\n    // @ts-ignore\n    return obj1 === obj2;\n  }\n  // If objects are arrays, compare their elements recursively\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\n    if (obj1.length !== obj2.length) {\n      return false;\n    }\n    for (let i = 0; i < obj1.length; i++) {\n      if (!deepEqual(obj1[i], obj2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  // If objects are both objects, compare their properties recursively\n  const keys1 = Object.keys(obj1);\n  const keys2 = Object.keys(obj2);\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n  for (const key of keys1) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (!obj2.hasOwnProperty(key) || !deepEqual(obj1[key], obj2[key])) {\n      return false;\n    }\n  }\n  return true;\n}\n","import search from '../../operator/search';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { OneDArray, TCell, TColumn } from '../../types';\n\ninterface GlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword: string;\n  columns: OneDArray<TColumn>;\n  ignoreHiddenColumns: boolean;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n}\n\nclass GlobalSearchFilter extends PipelineProcessor<\n  Tabular,\n  GlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Filter;\n  }\n\n  _process(data: Tabular): Tabular {\n    if (this.props.keyword) {\n      return search(\n        String(this.props.keyword).trim(),\n        this.props.columns,\n        this.props.ignoreHiddenColumns,\n        data,\n        this.props.selector,\n      );\n    }\n\n    return data;\n  }\n}\n\nexport default GlobalSearchFilter;\n","import Tabular from '../tabular';\nimport { VNode } from 'preact';\nimport { HTMLContentProps } from '../view/htmlElement';\nimport { OneDArray, TCell, TColumn } from '../types';\n\nexport default function (\n  keyword: string,\n  columns: OneDArray<TColumn>,\n  ignoreHiddenColumns: boolean,\n  tabular: Tabular,\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string,\n): Tabular {\n  // escape special regex chars\n  keyword = keyword.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\n  return new Tabular(\n    tabular.rows.filter((row, rowIndex) =>\n      row.cells.some((cell, cellIndex) => {\n        if (!cell) {\n          return false;\n        }\n\n        if (ignoreHiddenColumns) {\n          if (\n            columns &&\n            columns[cellIndex] &&\n            typeof columns[cellIndex] === 'object'\n          ) {\n            const typedColumn = columns[cellIndex] as TColumn;\n            if (typedColumn.hidden) {\n              return false;\n            }\n          }\n        }\n\n        let data = '';\n\n        if (typeof selector === 'function') {\n          data = selector(cell.data, rowIndex, cellIndex);\n        } else if (typeof cell.data === 'object') {\n          // HTMLContent element\n          const element = cell.data as VNode<HTMLContentProps>;\n          if (element && element.props && element.props.content) {\n            // TODO: we should only search in the content of the element. props.content is the entire HTML element\n            data = element.props.content;\n          }\n        } else {\n          // primitive types\n          data = String(cell.data);\n        }\n\n        return new RegExp(keyword, 'gi').test(data);\n      }),\n    ),\n  );\n}\n","import { JSXInternal } from 'preact/src/jsx';\n\nexport function className(...args: string[]): string {\n  const prefix = 'gridjs';\n\n  return `${prefix}${args.reduce(\n    (prev: string, cur: string) => `${prev}-${cur}`,\n    '',\n  )}`;\n}\n\nexport function classJoin(\n  ...classNames: (undefined | string | JSXInternal.SignalLike<string>)[]\n): string {\n  return classNames\n    .map((x) => (x ? x.toString() : ''))\n    .filter((x) => x)\n    .reduce((className, prev) => `${className || ''} ${prev}`, '')\n    .trim();\n}\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerGlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword?: string;\n  url?: (prevUrl: string, keyword: string) => string;\n  body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n}\n\nclass ServerGlobalSearchFilter extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerGlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerFilter;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    if (!this.props.keyword) return options;\n\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.keyword);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.keyword);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerGlobalSearchFilter;\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=[],e=n.__b,a=n.__r,v=n.diffed,l=n.__c,m=n.unmount;function d(t,u){n.__h&&n.__h(r,t,o||u),o=0;var i=r.__H||(r.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:c}),i.__[t]}function h(n){return o=1,s(B,n)}function s(n,u,i){var o=d(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):B(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=!1;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),!(!i&&o.__c.props===n)&&(!c||c.call(this,n,t,r))};r.u=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function p(u,i){var o=d(t++,3);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__H.__h.push(o))}function y(u,i){var o=d(t++,4);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__h.push(o))}function _(n){return o=5,F(function(){return{current:n}},[])}function A(n,t,r){o=6,y(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function F(n,r){var u=d(t++,7);return z(u.__H,r)?(u.__V=n(),u.i=r,u.__h=n,u.__V):u.__}function T(n,t){return o=8,F(function(){return n},t)}function q(n){var u=r.context[n.__c],i=d(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function x(t,r){n.useDebugValue&&n.useDebugValue(r?r(t):t)}function P(n){var u=d(t++,10),i=h();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function V(){var n=d(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function b(){for(var t;t=f.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(k),t.__H.__h.forEach(w),t.__H.__h=[]}catch(r){t.__H.__h=[],n.__e(r,t.__v)}}n.__b=function(n){r=null,e&&e(n)},n.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=c,n.__N=n.i=void 0})):(i.__h.forEach(k),i.__h.forEach(w),i.__h=[],t=0)),u=r},n.diffed=function(t){v&&v(t);var o=t.__c;o&&o.__H&&(o.__H.__h.length&&(1!==f.push(o)&&i===n.requestAnimationFrame||((i=n.requestAnimationFrame)||j)(b)),o.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==c&&(n.__=n.__V),n.i=void 0,n.__V=c})),u=r=null},n.__c=function(t,r){r.some(function(t){try{t.__h.forEach(k),t.__h=t.__h.filter(function(n){return!n.__||w(n)})}catch(u){r.some(function(n){n.__h&&(n.__h=[])}),r=[],n.__e(u,t.__v)}}),l&&l(t,r)},n.unmount=function(t){m&&m(t);var r,u=t.__c;u&&u.__H&&(u.__H.__.forEach(function(n){try{k(n)}catch(n){r=n}}),u.__H=void 0,r&&n.__e(r,u.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t,r=function(){clearTimeout(u),g&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);g&&(t=requestAnimationFrame(r))}function k(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function w(n){var t=r;n.__c=n.__(),r=t}function z(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function B(n,t){return\"function\"==typeof t?t(n):t}export{T as useCallback,q as useContext,x as useDebugValue,p as useEffect,P as useErrorBoundary,V as useId,A as useImperativeHandle,y as useLayoutEffect,F as useMemo,s as useReducer,_ as useRef,h as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import { useContext } from 'preact/hooks';\nimport { Config, ConfigContext } from '../config';\n\nexport function useConfig(): Config {\n  return useContext(ConfigContext);\n}\n","export default {\r\n  search: {\r\n    placeholder: '輸入關鍵字...',\r\n  },\r\n  sort: {\r\n    sortAsc:  '升冪排序',\r\n    sortDesc: '降冪排序',\r\n  },\r\n  pagination: {\r\n    previous: '前一頁',\r\n    next: '下一頁',\r\n    navigate: (page, pages) => `Page ${page} of ${pages}`,\r\n    page: (page) => `Page ${page}`,\r\n    showing: '顯示',\r\n    of: '，總共',\r\n    to: '到',\r\n    results: '筆結果',\r\n  },\r\n  loading: '讀取中...',\r\n  noRecordsFound: '（未找到符合資料）',\r\n  error: '（抓取資料時發生錯誤）',\r\n};\r\n","import { useConfig } from '../hooks/useConfig';\n//import enUS from './en_US';\nimport hanjiTW from './hanji_TW';\ntype MessageFormat = (...args) => string;\ntype Message = string | MessageFormat;\nexport type Language = { [key: string]: Message | Language };\n\nexport class Translator {\n  private readonly _language: Language;\n  private readonly _defaultLanguage: Language;\n\n  constructor(language?: Language) {\n    this._language = language;\n    this._defaultLanguage = hanjiTW;\n  }\n\n  /**\n   * Tries to split the message with \".\" and find\n   * the key in the given language\n   *\n   * @param message\n   * @param lang\n   */\n  getString(message: string, lang: Language): MessageFormat {\n    if (!lang || !message) return null;\n\n    const splitted = message.split('.');\n    const key = splitted[0];\n\n    if (lang[key]) {\n      const val = lang[key];\n\n      if (typeof val === 'string') {\n        return (): string => val;\n      } else if (typeof val === 'function') {\n        return val;\n      } else {\n        return this.getString(splitted.slice(1).join('.'), val);\n      }\n    }\n\n    return null;\n  }\n\n  translate(message: string, ...args): string {\n    const translated = this.getString(message, this._language);\n    let messageFormat;\n\n    if (translated) {\n      messageFormat = translated;\n    } else {\n      messageFormat = this.getString(message, this._defaultLanguage);\n    }\n\n    if (messageFormat) {\n      return messageFormat(...args);\n    }\n\n    return message;\n  }\n}\n\nexport function useTranslator() {\n  const config = useConfig();\n\n  return function (message: string, ...args): string {\n    return config.translator.translate(message, ...args);\n  };\n}\n","export const SearchKeyword = (payload) => (state) => {\n  return {\n    ...state,\n    search: {\n      keyword: payload,\n    },\n  };\n};\n","import { useConfig } from './useConfig';\n\nexport function useStore() {\n  const config = useConfig();\n  return config.store;\n}\n","import { useEffect, useState } from 'preact/hooks';\nimport { useStore } from './useStore';\n\nexport default function useSelector<T>(selector: (state) => T) {\n  const store = useStore();\n  const [current, setCurrent] = useState(selector(store.getState()));\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const updated = selector(store.getState());\n\n      if (current !== updated) {\n        setCurrent(updated);\n      }\n    });\n\n    return unsubscribe;\n  }, []);\n\n  return current;\n}\n","import { h, JSX } from 'preact';\nimport GlobalSearchFilter from '../../../pipeline/filter/globalSearch';\nimport { classJoin, className } from '../../../util/className';\nimport ServerGlobalSearchFilter from '../../../pipeline/filter/serverGlobalSearch';\nimport { TCell } from '../../../types';\nimport { useConfig } from '../../../hooks/useConfig';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nimport { useTranslator } from '../../../i18n/language';\nimport * as actions from './actions';\nimport { useStore } from '../../../hooks/useStore';\nimport useSelector from '../../../hooks/useSelector';\nimport { debounce } from '../../../util/debounce';\n\nexport interface SearchConfig {\n  keyword?: string;\n  ignoreHiddenColumns?: boolean;\n  debounceTimeout?: number;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n  server?: {\n    url?: (prevUrl: string, keyword: string) => string;\n    body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n  };\n}\n\nexport function Search() {\n  const [processor, setProcessor] = useState<\n    GlobalSearchFilter | ServerGlobalSearchFilter\n  >(undefined);\n  const config = useConfig();\n  const props = config.search as SearchConfig;\n  const _ = useTranslator();\n  const { dispatch } = useStore();\n  const state = useSelector((state) => state.search);\n\n  useEffect(() => {\n    if (!processor) return;\n\n    processor.setProps({\n      keyword: state?.keyword,\n    });\n  }, [state, processor]);\n\n  useEffect(() => {\n    if (props.server) {\n      setProcessor(\n        new ServerGlobalSearchFilter({\n          keyword: props.keyword,\n          url: props.server.url,\n          body: props.server.body,\n        }),\n      );\n    } else {\n      setProcessor(\n        new GlobalSearchFilter({\n          keyword: props.keyword,\n          columns: config.header && config.header.columns,\n          ignoreHiddenColumns:\n            props.ignoreHiddenColumns ||\n            props.ignoreHiddenColumns === undefined,\n          selector: props.selector,\n        }),\n      );\n    }\n\n    // initial search\n    if (props.keyword) dispatch(actions.SearchKeyword(props.keyword));\n  }, [props]);\n\n  useEffect(() => {\n    if (!processor) return undefined;\n\n    config.pipeline.register<object, object>(processor);\n\n    return () => config.pipeline.unregister<object, object>(processor);\n  }, [config, processor]);\n\n  const debouncedOnInput = useCallback(\n    debounce(\n      (event: JSX.TargetedEvent<HTMLInputElement>) => {\n        if (event.target instanceof HTMLInputElement) {\n          dispatch(actions.SearchKeyword(event.target.value));\n        }\n      },\n      processor instanceof ServerGlobalSearchFilter\n        ? props.debounceTimeout || 250\n        : 0,\n    ),\n    [props, processor],\n  );\n\n  return (\n    <div className={className(classJoin('search', config.className?.search))}>\n      <input\n        type=\"search\"\n        placeholder={_('search.placeholder')}\n        aria-label={_('search.placeholder')}\n        onInput={debouncedOnInput}\n        className={classJoin(className('input'), className('search', 'input'))}\n        value={state?.keyword || ''}\n        hidden\n        style=\"display: none;\"\n      />\n    </div>\n  );\n}\n","export const debounce = <F extends (...args: any[]) => any>(\n  func: F,\n  waitFor: number,\n) => {\n  let timeout;\n\n  return (...args: Parameters<F>): Promise<ReturnType<F>> =>\n    new Promise((resolve) => {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      timeout = setTimeout(() => resolve(func(...args)), waitFor);\n    });\n};\n","import Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface PaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n}\n\nclass PaginationLimit extends PipelineProcessor<Tabular, PaginationLimitProps> {\n  protected validateProps(): void {\n    if (isNaN(Number(this.props.limit)) || isNaN(Number(this.props.page))) {\n      throw Error('Invalid parameters passed');\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Limit;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const page = this.props.page;\n    const start = page * this.props.limit;\n    const end = (page + 1) * this.props.limit;\n\n    return new Tabular(data.rows.slice(start, end));\n  }\n}\n\nexport default PaginationLimit;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerPaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n  url?: (prevUrl: string, page: number, limit: number) => string;\n  body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n}\n\nclass ServerPaginationLimit extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerPaginationLimitProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerLimit;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(\n        options.url,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(\n        options.body,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerPaginationLimit;\n","import { h, Fragment } from 'preact';\nimport PaginationLimit from '../../pipeline/limit/pagination';\nimport { classJoin, className } from '../../util/className';\nimport ServerPaginationLimit from '../../pipeline/limit/serverPagination';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useTranslator } from '../../i18n/language';\n\nexport interface PaginationConfig {\n  limit?: number;\n  page?: number;\n  summary?: boolean;\n  nextButton?: boolean;\n  prevButton?: boolean;\n  buttonsCount?: number;\n  resetPageOnUpdate?: boolean;\n  server?: {\n    url?: (prevUrl: string, page: number, limit: number) => string;\n    body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n  };\n}\n\nexport function Pagination() {\n  const config = useConfig();\n  const {\n    server,\n    summary = true,\n    nextButton = true,\n    prevButton = true,\n    buttonsCount = 3,\n    limit = 10,\n    page = 0,\n    resetPageOnUpdate = true,\n  } = config.pagination as PaginationConfig;\n\n  const processor = useRef<PaginationLimit | ServerPaginationLimit>(null);\n  const [currentPage, setCurrentPage] = useState(page);\n  const [total, setTotal] = useState(0);\n  const _ = useTranslator();\n\n  useEffect(() => {\n    if (server) {\n      processor.current = new ServerPaginationLimit({\n        limit: limit,\n        page: currentPage,\n        url: server.url,\n        body: server.body,\n      });\n\n      config.pipeline.register(processor.current);\n    } else {\n      processor.current = new PaginationLimit({\n        limit: limit,\n        page: currentPage,\n      });\n\n      config.pipeline.register(processor.current);\n    }\n\n    if (processor.current instanceof ServerPaginationLimit) {\n      config.pipeline.on('afterProcess', (tabular) => setTotal(tabular.length));\n    } else if (processor.current instanceof PaginationLimit) {\n      // Pagination (all Limit processors) is the last step in the pipeline\n      // and we assume that at this stage, we have the rows that we care about.\n      // Let's grab the rows before processing Pagination and set total number of rows\n      processor.current.on('beforeProcess', (tabular) =>\n        setTotal(tabular.length),\n      );\n    }\n\n    config.pipeline.on('updated', onUpdate);\n\n    // we need to make sure that the state is set\n    // to the default props when an error happens\n    config.pipeline.on('error', () => {\n      setTotal(0);\n      setCurrentPage(0);\n    });\n\n    return () => {\n      config.pipeline.unregister<object, object>(processor.current);\n      config.pipeline.off('updated', onUpdate);\n    };\n  }, []);\n\n  const onUpdate = (updatedProcessor) => {\n    // this is to ensure that the current page is set to 0\n    // when a processor is updated for some reason\n    if (resetPageOnUpdate && updatedProcessor !== processor.current) {\n      setCurrentPage(0);\n    }\n  };\n\n  const pages = () => Math.ceil(total / limit);\n\n  const setPage = (page: number) => {\n    if (page >= pages() || page < 0 || page === currentPage) {\n      return null;\n    }\n\n    setCurrentPage(page);\n\n    processor.current.setProps({\n      page: page,\n    });\n  };\n\n  const renderPages = () => {\n    if (buttonsCount <= 0) {\n      return null;\n    }\n\n    // how many pagination buttons to render?\n    const maxCount: number = Math.min(pages(), buttonsCount);\n\n    let pagePivot = Math.min(currentPage, Math.floor(maxCount / 2));\n    if (currentPage + Math.floor(maxCount / 2) >= pages()) {\n      pagePivot = maxCount - (pages() - currentPage);\n    }\n\n    return (\n      <Fragment>\n        {pages() > maxCount && currentPage - pagePivot > 0 && (\n          <Fragment>\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(0)}\n              title={_('pagination.firstPage')}\n              aria-label={_('pagination.firstPage')}\n              className={config.className.paginationButton}\n            >\n              {_('1')}\n            </button>\n            <button\n              tabIndex={-1}\n              className={classJoin(\n                className('spread'),\n                config.className.paginationButton,\n              )}\n            >\n              ...\n            </button>\n          </Fragment>\n        )}\n\n        {Array.from(Array(maxCount).keys())\n          .map((i) => currentPage + (i - pagePivot))\n          .map((i) => (\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(i)}\n              className={classJoin(\n                currentPage === i\n                  ? classJoin(\n                      className('currentPage'),\n                      config.className.paginationButtonCurrent,\n                    )\n                  : null,\n                config.className.paginationButton,\n              )}\n              title={_('pagination.page', i + 1)}\n              aria-label={_('pagination.page', i + 1)}\n            >\n              {_(`${i + 1}`)}\n            </button>\n          ))}\n\n        {pages() > maxCount && pages() > currentPage + pagePivot + 1 && (\n          <Fragment>\n            <button\n              tabIndex={-1}\n              className={classJoin(\n                className('spread'),\n                config.className.paginationButton,\n              )}\n            >\n              ...\n            </button>\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(pages() - 1)}\n              title={_('pagination.page', pages())}\n              aria-label={_('pagination.page', pages())}\n              className={config.className.paginationButton}\n            >\n              {_(`${pages()}`)}\n            </button>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderSummary = () => {\n    return (\n      <Fragment>\n        {summary && total > 0 && (\n          <div\n            role=\"status\"\n            aria-live=\"polite\"\n            className={classJoin(\n              className('summary'),\n              config.className.paginationSummary,\n            )}\n            title={_('pagination.navigate', currentPage + 1, pages())}\n          >\n            {_('pagination.showing')} <b>{_(`${currentPage * limit + 1}`)}</b>{' '}\n            {_('pagination.to')}{' '}\n            <b>{_(`${Math.min((currentPage + 1) * limit, total)}`)}</b>{' '}\n            {_('pagination.of')} <b>{_(`${total}`)}</b>{' '}\n            {_('pagination.results')}\n          </div>\n        )}\n      </Fragment>\n    );\n  };\n\n  return (\n    <div\n      className={classJoin(\n        className('pagination'),\n        config.className.pagination,\n      )}\n    >\n      {renderSummary()}\n\n      <div className={className('pages')}>\n        {prevButton && (\n          <button\n            tabIndex={0}\n            role=\"button\"\n            disabled={currentPage === 0}\n            onClick={() => setPage(currentPage - 1)}\n            title={_('pagination.previous')}\n            aria-label={_('pagination.previous')}\n            className={classJoin(\n              config.className.paginationButton,\n              config.className.paginationButtonPrev,\n            )}\n          >\n            {_('pagination.previous')}\n          </button>\n        )}\n\n        {renderPages()}\n\n        {nextButton && (\n          <button\n            tabIndex={0}\n            role=\"button\"\n            disabled={pages() === currentPage + 1 || pages() === 0}\n            onClick={() => setPage(currentPage + 1)}\n            title={_('pagination.next')}\n            aria-label={_('pagination.next')}\n            className={classJoin(\n              config.className.paginationButton,\n              config.className.paginationButtonNext,\n            )}\n          >\n            {_('pagination.next')}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","export function width(width: string | number, containerWidth?: number): number {\n  if (typeof width == 'string') {\n    if (width.indexOf('%') > -1) {\n      return (containerWidth / 100) * parseInt(width, 10);\n    } else {\n      return parseInt(width, 10);\n    }\n  }\n\n  return width;\n}\n\nexport function px(width: number): string {\n  if (!width) return '';\n  return `${Math.floor(width)}px`;\n}\n","import { h } from 'preact';\nimport { className } from '../../util/className';\n\n/**\n * ShadowTable renders a hidden table and is used to calculate the column's width\n * when autoWidth option is enabled\n */\nexport function ShadowTable(props: { tableRef: HTMLTableElement }) {\n  const shadowTable = props.tableRef.cloneNode(true) as HTMLTableElement;\n\n  shadowTable.style.position = 'absolute';\n  shadowTable.style.width = '100%';\n  shadowTable.style.zIndex = '-2147483640';\n  shadowTable.style.visibility = 'hidden';\n\n  return (\n    <div\n      ref={(nodeElement) => {\n        nodeElement && nodeElement.appendChild(shadowTable);\n      }}\n    />\n  );\n}\n\nexport function getShadowTableWidths(tempRef: HTMLDivElement): {\n  [columnId: string]: { minWidth: number; width: number };\n} {\n  const tableElement: HTMLTableElement = tempRef.querySelector(\n    'table',\n  ) as HTMLTableElement;\n\n  if (!tableElement) {\n    return {};\n  }\n\n  const tableClassName = tableElement.className;\n  const tableStyle = tableElement.style.cssText;\n  tableElement.className = `${tableClassName} ${className('shadowTable')}`;\n\n  tableElement.style.tableLayout = 'auto';\n  tableElement.style.width = 'auto';\n  tableElement.style.padding = '0';\n  tableElement.style.margin = '0';\n  tableElement.style.border = 'none';\n  tableElement.style.outline = 'none';\n\n  let obj = Array.from(\n    tableElement.parentNode.querySelectorAll<HTMLElement>('thead th'),\n  ).reduce((prev, current) => {\n    current.style.width = `${current.clientWidth}px`;\n\n    return {\n      [current.getAttribute('data-column-id')]: {\n        minWidth: current.clientWidth,\n      },\n      ...prev,\n    };\n  }, {});\n\n  tableElement.className = tableClassName;\n  tableElement.style.cssText = tableStyle;\n  tableElement.style.tableLayout = 'auto';\n\n  obj = Array.from(\n    tableElement.parentNode.querySelectorAll<HTMLElement>('thead th'),\n  ).reduce((prev, current) => {\n    prev[current.getAttribute('data-column-id')]['width'] = current.clientWidth;\n\n    return prev;\n  }, obj);\n\n  return obj;\n}\n","export function camelCase(str: string): string {\n  if (!str) return '';\n\n  const words = str.split(' ');\n\n  // do not convert strings that are already in camelCase format\n  if (words.length === 1 && /([a-z][A-Z])+/g.test(str)) {\n    return str;\n  }\n\n  return words\n    .map(function (word, index) {\n      // if it is the first word, lowercase all the chars\n      if (index == 0) {\n        return word.toLowerCase();\n      }\n\n      // if it is not the first word only upper case the first char and lowercase the rest\n      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n    })\n    .join('');\n}\n","/**\n * Centralized logging lib\n *\n * This class needs some improvements but so far it has been used to have a coherent way to log\n */\nclass Logger {\n  private format(message: string, type: string): string {\n    return `[Grid.js] [${type.toUpperCase()}]: ${message}`;\n  }\n\n  error(message: string, throwException = false): void {\n    const msg = this.format(message, 'error');\n\n    if (throwException) {\n      throw Error(msg);\n    } else {\n      console.error(msg);\n    }\n  }\n\n  warn(message: string): void {\n    console.warn(this.format(message, 'warn'));\n  }\n\n  info(message: string): void {\n    console.info(this.format(message, 'info'));\n  }\n}\n\nexport default new Logger();\n","import { Fragment, FunctionComponent, h } from 'preact';\nimport { useConfig } from './hooks/useConfig';\nimport log from './util/log';\n\nexport enum PluginPosition {\n  Header,\n  Footer,\n  Cell,\n}\n\nexport interface Plugin<T extends FunctionComponent> {\n  id: string;\n  position: PluginPosition;\n  component: T;\n  order?: number;\n}\n\nexport class PluginManager {\n  private readonly plugins: Plugin<any>[];\n\n  constructor() {\n    this.plugins = [];\n  }\n\n  get<T extends FunctionComponent>(id: string): Plugin<T> | undefined {\n    return this.plugins.find((p) => p.id === id);\n  }\n\n  add<T extends FunctionComponent<any>>(plugin: Plugin<T>): this {\n    if (!plugin.id) {\n      log.error('Plugin ID cannot be empty');\n      return this;\n    }\n\n    if (this.get(plugin.id)) {\n      log.error(`Duplicate plugin ID: ${plugin.id}`);\n      return this;\n    }\n\n    this.plugins.push(plugin);\n    return this;\n  }\n\n  remove(id: string): this {\n    const plugin = this.get(id);\n\n    if (plugin) {\n      this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    }\n\n    return this;\n  }\n\n  list<T extends FunctionComponent>(position?: PluginPosition): Plugin<T>[] {\n    let plugins: Plugin<T>[];\n\n    if (position != null || position != undefined) {\n      plugins = this.plugins.filter((p) => p.position === position);\n    } else {\n      plugins = this.plugins;\n    }\n\n    return plugins.sort((a, b) => (a.order && b.order ? a.order - b.order : 1));\n  }\n}\n\nexport function PluginRenderer(props: {\n  props?: any;\n  // to render a single plugin\n  pluginId?: string;\n  // to render all plugins in this PluginPosition\n  position?: PluginPosition;\n}) {\n  const config = useConfig();\n\n  if (props.pluginId) {\n    // render a single plugin\n    const plugin = config.plugin.get(props.pluginId);\n\n    if (!plugin) return null;\n\n    return h(\n      Fragment,\n      {},\n      h(plugin.component, {\n        plugin: plugin,\n        ...props.props,\n      }),\n    );\n  } else if (props.position !== undefined) {\n    // render using a specific plugin position\n    return h(\n      Fragment,\n      {},\n      config.plugin.list(props.position).map((p) => {\n        return h(p.component, { plugin: p, ...this.props.props });\n      }),\n    );\n  }\n\n  return null;\n}\n","import { OneDArray, TColumn, TwoDArray } from './types';\nimport Base from './base';\nimport { Config } from './config';\nimport { px, width } from './util/width';\nimport { getShadowTableWidths, ShadowTable } from './view/table/shadow';\nimport { ComponentChild, h, isValidElement, RefObject, render } from 'preact';\nimport { camelCase } from './util/string';\nimport { flatten } from './util/array';\nimport logger from './util/log';\nimport { PluginManager, PluginPosition } from './plugin';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\n\nclass Header extends Base {\n  private _columns: OneDArray<TColumn>;\n\n  constructor() {\n    super();\n\n    this._columns = [];\n  }\n\n  get columns(): OneDArray<TColumn> {\n    return this._columns;\n  }\n\n  set columns(columns) {\n    this._columns = columns;\n  }\n\n  get visibleColumns(): OneDArray<TColumn> {\n    return this._columns.filter((c) => !c.hidden);\n  }\n\n  /**\n   * Tries to automatically adjust the width of columns based on:\n   *    - Header cell content\n   *    - Cell content of the first row\n   *    - Cell content of the last row\n   *\n   * @param config\n   */\n  adjustWidth(\n    config: Config,\n    tableRef: RefObject<HTMLTableElement>,\n    tempRef: RefObject<HTMLDivElement>,\n  ): this {\n    const container: Element = config.container;\n    const autoWidth = config.autoWidth;\n\n    if (!container) {\n      // we can't calculate the width because the container\n      // is unknown at this stage\n      return this;\n    }\n\n    // pixels\n    const containerWidth = container.clientWidth;\n\n    let widths = {};\n\n    if (tableRef.current && autoWidth) {\n      // let's create a shadow table with the first 10 rows of the data\n      // and let the browser to render the table with table-layout: auto\n      // no padding, margin or border to get the minimum space required\n      // to render columns. Once the table is rendered and widths are known,\n      // we unmount the shadow table from the DOM and set the correct width\n      render(\n        h(ShadowTable, {\n          tableRef: tableRef.current,\n        }),\n        tempRef.current,\n      );\n\n      widths = getShadowTableWidths(tempRef.current);\n    }\n\n    for (const column of flatten(Header.tabularFormat(this.columns))) {\n      // because we don't want to set the width of parent THs\n      if (column.columns && column.columns.length > 0) {\n        continue;\n      }\n\n      if (!column.width && autoWidth) {\n        // tries to find the corresponding cell\n        // from the ShadowTable and set the correct width\n\n        if (column.id in widths) {\n          // because a column can be hidden, too\n          column.width = px(widths[column.id]['width']);\n          column.minWidth = px(widths[column.id]['minWidth']);\n        }\n      } else {\n        // column width is already defined\n        // sets the column with based on the width of its container\n        column.width = px(width(column.width, containerWidth));\n      }\n    }\n\n    if (tableRef.current && autoWidth) {\n      // unmount the shadow table from temp\n      render(null, tempRef.current);\n    }\n\n    return this;\n  }\n\n  private setSort(\n    sortConfig: GenericSortConfig | boolean,\n    columns?: OneDArray<TColumn>,\n  ): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      // sorting can only be enabled for columns without any children\n      if (column.columns && column.columns.length > 0) {\n        column.sort = undefined;\n      } else if (column.sort === undefined && sortConfig) {\n        column.sort = {};\n      } else if (!column.sort) {\n        // false, null, etc.\n        column.sort = undefined;\n      } else if (typeof column.sort === 'object') {\n        column.sort = {\n          ...column.sort,\n        };\n      }\n\n      if (column.columns) {\n        this.setSort(sortConfig, column.columns);\n      }\n    }\n  }\n\n  private setResizable(resizable: boolean, columns?: OneDArray<TColumn>): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      if (column.resizable === undefined) {\n        column.resizable = resizable;\n      }\n\n      if (column.columns) {\n        this.setResizable(resizable, column.columns);\n      }\n    }\n  }\n\n  private setID(columns?: OneDArray<TColumn>): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      if (!column.id && typeof column.name === 'string') {\n        // let's guess the column ID if it's undefined\n        column.id = camelCase(column.name);\n      }\n\n      if (!column.id) {\n        logger.error(\n          `Could not find a valid ID for one of the columns. Make sure a valid \"id\" is set for all columns.`,\n        );\n      }\n\n      // nested columns\n      if (column.columns) {\n        this.setID(column.columns);\n      }\n    }\n  }\n\n  private populatePlugins(\n    pluginManager: PluginManager,\n    columns: OneDArray<TColumn>,\n  ): void {\n    // populate the cell columns\n    for (const column of columns) {\n      if (column.plugin !== undefined) {\n        pluginManager.add({\n          id: column.id,\n          ...column.plugin,\n          position: PluginPosition.Cell,\n        });\n      }\n    }\n  }\n\n  static fromColumns(\n    columns: OneDArray<TColumn | string | ComponentChild>,\n  ): Header {\n    const header = new Header();\n\n    for (const column of columns) {\n      if (typeof column === 'string' || isValidElement(column)) {\n        header.columns.push({\n          name: column,\n        });\n      } else if (typeof column === 'object') {\n        const typedColumn = column as TColumn;\n\n        if (typedColumn.columns) {\n          typedColumn.columns = Header.fromColumns(typedColumn.columns).columns;\n        }\n\n        // because the data for that cell is null\n        // if we are trying to render a plugin\n        if (typeof typedColumn.plugin === 'object') {\n          if (typedColumn.data === undefined) {\n            typedColumn.data = null;\n          }\n        }\n\n        // TColumn type\n        header.columns.push(column as TColumn);\n      }\n    }\n\n    return header;\n  }\n\n  static createFromConfig(config: Partial<Config>): Header | null {\n    const header = new Header();\n\n    // TODO: this part needs some refactoring\n    if (config.from) {\n      header.columns = Header.fromHTMLTable(config.from).columns;\n    } else if (config.columns) {\n      header.columns = Header.fromColumns(config.columns).columns;\n    } else if (\n      config.data &&\n      typeof config.data[0] === 'object' &&\n      !(config.data[0] instanceof Array)\n    ) {\n      // if data[0] is an object but not an Array\n      // used for when a JSON payload is provided\n      header.columns = Object.keys(config.data[0]).map((name) => {\n        return { name: name };\n      });\n    }\n\n    if (header.columns.length) {\n      header.setID();\n      header.setSort(config.sort);\n      header.setResizable(config.resizable);\n      header.populatePlugins(config.plugin, header.columns);\n      return header;\n    }\n\n    return null;\n  }\n\n  static fromHTMLTable(element: HTMLElement): Header {\n    const header = new Header();\n    const thead = element.querySelector('thead');\n    const ths = thead.querySelectorAll('th');\n\n    for (const th of ths as any) {\n      header.columns.push({\n        name: th.innerHTML,\n        width: th.width,\n      });\n    }\n\n    return header;\n  }\n\n  /**\n   * Converts the tree-like format of Header to a tabular format\n   *\n   * Example:\n   *\n   *    H1\n   *      H1-H1\n   *      H1-H2\n   *    H2\n   *      H2-H1\n   *\n   *    becomes:\n   *      [\n   *        [H1, H2],\n   *        [H1-H1, H1-H2, H2-H1]\n   *      ]\n   *\n   * @param columns\n   */\n  static tabularFormat(columns: OneDArray<TColumn>): TwoDArray<TColumn> {\n    let result: TwoDArray<TColumn> = [];\n    const cols = columns || [];\n    let nextRow = [];\n\n    if (cols && cols.length) {\n      result.push(cols);\n\n      for (const col of cols) {\n        if (col.columns && col.columns.length) {\n          nextRow = nextRow.concat(col.columns);\n        }\n      }\n\n      if (nextRow.length) {\n        result = result.concat(this.tabularFormat(nextRow));\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns an array of leaf columns (last columns in the tree)\n   *\n   * @param columns\n   */\n  static leafColumns(columns: OneDArray<TColumn>): OneDArray<TColumn> {\n    let result: OneDArray<TColumn> = [];\n    const cols = columns || [];\n\n    if (cols && cols.length) {\n      for (const col of cols) {\n        if (!col.columns || col.columns.length === 0) {\n          result.push(col);\n        }\n\n        if (col.columns) {\n          result = result.concat(this.leafColumns(col.columns));\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns the maximum depth of a column tree\n   * @param column\n   */\n  static maximumDepth(column: TColumn): number {\n    return this.tabularFormat([column]).length - 1;\n  }\n}\n\nexport default Header;\n","/**\n * Base Storage class. All storage implementation must inherit this class\n */\nimport { TData } from '../types';\n\nabstract class Storage<I> {\n  /**\n   * Returns all rows based on ...args\n   * @param args\n   */\n  abstract get(...args): Promise<StorageResponse>;\n\n  /**\n   * To set all rows\n   *\n   * @param data\n   */\n  set?(data: I | ((...args) => void)): this;\n}\n\nexport interface StorageResponse {\n  data: TData;\n  total: number;\n}\n\nexport default Storage;\n","import Storage, { StorageResponse } from './storage';\nimport { TData } from '../types';\n\nclass MemoryStorage extends Storage<TData> {\n  private data: (() => TData) | (() => Promise<TData>);\n\n  constructor(data: TData | (() => TData) | (() => Promise<TData>)) {\n    super();\n    this.set(data);\n  }\n\n  public async get(): Promise<StorageResponse> {\n    const data = await this.data();\n\n    return {\n      data: data,\n      total: data.length,\n    };\n  }\n\n  public set(data: TData | (() => TData) | (() => Promise<TData>)): this {\n    if (data instanceof Array) {\n      this.data = (): TData => data;\n    } else if (data instanceof Function) {\n      this.data = data;\n    }\n\n    return this;\n  }\n}\n\nexport default MemoryStorage;\n","import Storage, { StorageResponse } from './storage';\nimport log from '../util/log';\n\nexport interface ServerStorageOptions extends RequestInit {\n  url: string;\n  // to format the data and columns\n  then?: (data: any) => any[][];\n  // to handle the response from the server. `handle` will\n  // be called first and then `then` callback will be invoked\n  // The purpose of this function is to handle the behaviour\n  // of server and either reject and resolve the initial response\n  // before calling the `then` function\n  handle?: (response: Response) => Promise<any>;\n  total?: (data: any) => number;\n  // to bypass the current implementation of ServerStorage and process the\n  // request manually (e.g. when user wants to connect their own SDK/HTTP Client)\n  data?: (opts: ServerStorageOptions) => Promise<StorageResponse>;\n}\n\nclass ServerStorage extends Storage<ServerStorageOptions> {\n  private readonly options: ServerStorageOptions;\n\n  constructor(options: ServerStorageOptions) {\n    super();\n    this.options = options;\n  }\n\n  private handler(response: Response): Promise<any> {\n    if (typeof this.options.handle === 'function') {\n      return this.options.handle(response);\n    }\n\n    if (response.ok) {\n      return response.json();\n    } else {\n      log.error(\n        `Could not fetch data: ${response.status} - ${response.statusText}`,\n        true,\n      );\n      return null;\n    }\n  }\n\n  public get(options?: ServerStorageOptions): Promise<StorageResponse> {\n    // this.options is the initial config object\n    // options is the runtime config passed by the pipeline (e.g. search component)\n    const opts = {\n      ...this.options,\n      ...options,\n    };\n\n    // if `options.data` is provided, the current ServerStorage\n    // implementation will be ignored and we let options.data to\n    // handle the request. Useful when HTTP client needs to be\n    // replaced with something else\n    if (typeof opts.data === 'function') {\n      return opts.data(opts);\n    }\n\n    return fetch(opts.url, opts)\n      .then(this.handler.bind(this))\n      .then((res) => {\n        return {\n          data: opts.then(res),\n          total: typeof opts.total === 'function' ? opts.total(res) : undefined,\n        };\n      });\n  }\n}\n\nexport default ServerStorage;\n","import { Config } from '../config';\nimport MemoryStorage from './memory';\nimport Storage from './storage';\nimport ServerStorage from './server';\nimport log from '../util/log';\nimport { decode, html } from '../util/html';\n\nclass StorageUtils {\n  /**\n   * Accepts a Config object and tries to guess and return a Storage type\n   *\n   * @param config\n   */\n  public static createFromConfig(config: Config): Storage<any> {\n    let storage = null;\n    // `data` array is provided\n    if (config.data) {\n      storage = new MemoryStorage(config.data);\n    }\n\n    if (config.from) {\n      storage = new MemoryStorage(this.tableElementToArray(config.from));\n      // remove the source table element from the DOM\n      config.from.style.display = 'none';\n    }\n\n    if (config.server) {\n      storage = new ServerStorage(config.server);\n    }\n\n    if (!storage) {\n      log.error('Could not determine the storage type', true);\n    }\n\n    return storage;\n  }\n\n  /**\n   * Accepts a HTML table element and converts it into a 2D array of data\n   *\n   * TODO: This function can be a step in the pipeline: Convert Table -> Load into a memory storage -> ...\n   *\n   * @param element\n   */\n  static tableElementToArray(element: HTMLElement): any[][] {\n    const arr = [];\n    const tbody = element.querySelector('tbody');\n    const rows = tbody.querySelectorAll('tr');\n\n    for (const row of rows as any) {\n      const cells: HTMLElement[] = row.querySelectorAll('td');\n      const parsedRow = [];\n\n      for (const cell of cells) {\n        // try to capture a TD with single text element first\n        if (\n          cell.childNodes.length === 1 &&\n          cell.childNodes[0].nodeType === Node.TEXT_NODE\n        ) {\n          parsedRow.push(decode(cell.innerHTML));\n        } else {\n          parsedRow.push(html(cell.innerHTML));\n        }\n      }\n\n      arr.push(parsedRow);\n    }\n\n    return arr;\n  }\n}\n\nexport default StorageUtils;\n","import { PipelineProcessor, ProcessorType } from './processor';\nimport { ID } from '../util/id';\nimport log from '../util/log';\nimport { EventEmitter } from '../util/eventEmitter';\n\ninterface PipelineEvents<R> {\n  /**\n   * Generic updated event. Triggers the callback function when the pipeline\n   * is updated, including when a new processor is registered, a processor's props\n   * get updated, etc.\n   */\n  updated: <T, P>(processor: PipelineProcessor<T, P>) => void;\n  /**\n   * Triggers the callback function when a new\n   * processor is registered successfully\n   */\n  afterRegister: () => void;\n  /**\n   * Triggers the callback when a registered\n   * processor's property is updated\n   */\n  propsUpdated: () => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * is fully processed, before returning the results\n   *\n   * afterProcess will not be called if there is an\n   * error in the pipeline (i.e a step throw an Error)\n   */\n  afterProcess: (prev: R) => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * fails to process all steps or at least one step\n   * throws an Error\n   */\n  error: <T>(prev: T) => void;\n}\n\nclass Pipeline<R> extends EventEmitter<PipelineEvents<R>> {\n  // available steps for this pipeline\n  private readonly _steps: Map<\n    ProcessorType,\n    PipelineProcessor<unknown, unknown>[]\n  > = new Map<ProcessorType, PipelineProcessor<unknown, unknown>[]>();\n  // used to cache the results of processors using their id field\n  private cache: Map<string, unknown> = new Map<string, unknown>();\n  // keeps the index of the last updated processor in the registered\n  // processors list and will be used to invalidate the cache\n  // -1 means all new processors should be processed\n  private lastProcessorIndexUpdated = -1;\n\n  constructor(steps?: PipelineProcessor<unknown, unknown>[]) {\n    super();\n\n    if (steps) {\n      steps.forEach((step) => this.register(step));\n    }\n  }\n\n  /**\n   * Clears the `cache` array\n   */\n  clearCache(): void {\n    this.cache = new Map<string, object>();\n    this.lastProcessorIndexUpdated = -1;\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  register<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number = null,\n  ): PipelineProcessor<T, P> {\n    if (!processor) {\n      throw Error('Processor is not defined');\n    }\n\n    if (processor.type === null) {\n      throw Error('Processor type is not defined');\n    }\n\n    if (this.findProcessorIndexByID(processor.id) > -1) {\n      throw Error(`Processor ID ${processor.id} is already defined`);\n    }\n\n    // binding the propsUpdated callback to the Pipeline\n    processor.on('propsUpdated', this.processorPropsUpdated.bind(this));\n\n    this.addProcessorByPriority(processor, priority);\n    this.afterRegistered(processor);\n\n    return processor;\n  }\n\n  /**\n   * Tries to register a new processor\n   * @param processor\n   * @param priority\n   */\n  tryRegister<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number = null,\n  ): PipelineProcessor<T, P> | undefined {\n    try {\n      return this.register(processor, priority);\n    } catch (_) {\n      // noop\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Removes a processor from the list\n   *\n   * @param processor\n   */\n  unregister<T, P>(processor: PipelineProcessor<T, P>): void {\n    if (!processor) return;\n    if (this.findProcessorIndexByID(processor.id) === -1) return;\n\n    const subSteps = this._steps.get(processor.type);\n\n    if (subSteps && subSteps.length) {\n      this._steps.set(\n        processor.type,\n        subSteps.filter((proc) => proc != processor),\n      );\n      this.emit('updated', processor);\n    }\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  private addProcessorByPriority<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number,\n  ): void {\n    let subSteps = this._steps.get(processor.type);\n\n    if (!subSteps) {\n      const newSubStep = [];\n      this._steps.set(processor.type, newSubStep);\n      subSteps = newSubStep;\n    }\n\n    if (priority === null || priority < 0) {\n      subSteps.push(processor);\n    } else {\n      if (!subSteps[priority]) {\n        // slot is empty\n        subSteps[priority] = processor;\n      } else {\n        // slot is NOT empty\n        const first = subSteps.slice(0, priority - 1);\n        const second = subSteps.slice(priority + 1);\n\n        this._steps.set(processor.type, first.concat(processor).concat(second));\n      }\n    }\n  }\n\n  /**\n   * Flattens the _steps Map and returns a list of steps with their correct priorities\n   */\n  get steps(): PipelineProcessor<unknown, unknown>[] {\n    let steps: PipelineProcessor<unknown, unknown>[] = [];\n\n    for (const type of this.getSortedProcessorTypes()) {\n      const subSteps = this._steps.get(type);\n\n      if (subSteps && subSteps.length) {\n        steps = steps.concat(subSteps);\n      }\n    }\n\n    // to remove any undefined elements\n    return steps.filter((s) => s);\n  }\n\n  /**\n   * Accepts ProcessType and returns an array of the registered processes\n   * with the give type\n   *\n   * @param type\n   */\n  getStepsByType(type: ProcessorType): PipelineProcessor<unknown, unknown>[] {\n    return this.steps.filter((process) => process.type === type);\n  }\n\n  /**\n   * Returns a list of ProcessorType according to their priority\n   */\n  private getSortedProcessorTypes(): ProcessorType[] {\n    return Object.keys(ProcessorType)\n      .filter((key) => !isNaN(Number(key)))\n      .map((key) => Number(key));\n  }\n\n  /**\n   * Runs all registered processors based on their correct priority\n   * and returns the final output after running all steps\n   *\n   * @param data\n   */\n  async process(data?: R): Promise<R> {\n    const lastProcessorIndexUpdated = this.lastProcessorIndexUpdated;\n    const steps = this.steps;\n\n    let prev = data;\n\n    try {\n      for (const processor of steps) {\n        const processorIndex = this.findProcessorIndexByID(processor.id);\n\n        if (processorIndex >= lastProcessorIndexUpdated) {\n          // we should execute process() here since the last\n          // updated processor was before \"processor\".\n          // This is to ensure that we always have correct and up to date\n          // data from processors and also to skip them when necessary\n          prev = (await processor.process(prev)) as R;\n          this.cache.set(processor.id, prev);\n        } else {\n          // cached results already exist\n          prev = this.cache.get(processor.id) as R;\n        }\n      }\n    } catch (e) {\n      log.error(e);\n      // trigger the onError callback\n      this.emit('error', prev);\n\n      // rethrow\n      throw e;\n    }\n\n    // means the pipeline is up to date\n    this.lastProcessorIndexUpdated = steps.length;\n\n    // triggers the afterProcess callbacks with the results\n    this.emit('afterProcess', prev);\n\n    return prev;\n  }\n\n  /**\n   * Returns the registered processor's index in _steps array\n   *\n   * @param processorID\n   */\n  private findProcessorIndexByID(processorID: ID): number {\n    return this.steps.findIndex((p) => p.id == processorID);\n  }\n\n  /**\n   * Sets the last updates processors index locally\n   * This is used to invalid or skip a processor in\n   * the process() method\n   */\n  private setLastProcessorIndex<T, P>(\n    processor: PipelineProcessor<T, P>,\n  ): void {\n    const processorIndex = this.findProcessorIndexByID(processor.id);\n\n    if (this.lastProcessorIndexUpdated > processorIndex) {\n      this.lastProcessorIndexUpdated = processorIndex;\n    }\n  }\n\n  private processorPropsUpdated(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('propsUpdated');\n    this.emit('updated', processor);\n  }\n\n  private afterRegistered(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('afterRegister');\n    this.emit('updated', processor);\n  }\n}\n\nexport default Pipeline;\n","import Storage, { StorageResponse } from '../../storage/storage';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface StorageExtractorProps extends PipelineProcessorProps {\n  storage: Storage<any>;\n}\n\nclass StorageExtractor extends PipelineProcessor<\n  StorageResponse,\n  StorageExtractorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Extractor;\n  }\n\n  async _process(opts: any): Promise<StorageResponse> {\n    return await this.props.storage.get(opts);\n  }\n}\n\nexport default StorageExtractor;\n","import { PipelineProcessor, ProcessorType } from '../processor';\nimport Tabular from '../../tabular';\nimport { ArrayResponse } from './storageResponseToArray';\n\nclass ArrayToTabularTransformer extends PipelineProcessor<\n  Tabular,\n  Record<string, any>\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  _process(arrayResponse: ArrayResponse): Tabular {\n    const tabular = Tabular.fromArray(arrayResponse.data);\n\n    // for server-side storage\n    tabular.length = arrayResponse.total;\n\n    return tabular;\n  }\n}\n\nexport default ArrayToTabularTransformer;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerInitiatorProps extends PipelineProcessorProps {\n  serverStorageOptions: ServerStorageOptions;\n}\n\nclass ServerInitiator extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerInitiatorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Initiator;\n  }\n\n  _process(): ServerStorageOptions {\n    return Object.entries(this.props.serverStorageOptions)\n      .filter(([_, val]) => typeof val !== 'function')\n      .reduce(\n        (acc, [k, v]) => ({ ...acc, [k]: v }),\n        {},\n      ) as ServerStorageOptions;\n  }\n}\n\nexport default ServerInitiator;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { StorageResponse } from '../../storage/storage';\nimport { TCell, TData, TDataArray, TDataObject, TwoDArray } from '../../types';\nimport Header from '../../header';\nimport logger from '../../util/log';\n\nexport interface ArrayResponse {\n  data: TwoDArray<TCell>;\n  total: number;\n}\n\ninterface StorageResponseToArrayTransformerProps\n  extends PipelineProcessorProps {\n  header: Header;\n}\n\nclass StorageResponseToArrayTransformer extends PipelineProcessor<\n  ArrayResponse,\n  StorageResponseToArrayTransformerProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  private castData(data: TData): TwoDArray<TCell> {\n    if (!data || !data.length) {\n      return [];\n    }\n\n    if (!this.props.header || !this.props.header.columns) {\n      return data as TwoDArray<TCell>;\n    }\n\n    const columns = Header.leafColumns(this.props.header.columns);\n\n    // if it's a 2d array already\n    if (data[0] instanceof Array) {\n      return (data as TDataArray).map((row) => {\n        let pad = 0;\n\n        return columns.map((column, i) => {\n          // default `data` is provided for this column\n          if (column.data !== undefined) {\n            pad++;\n\n            if (typeof column.data === 'function') {\n              return column.data(row);\n            } else {\n              return column.data;\n            }\n          }\n\n          return row[i - pad];\n        });\n      });\n    }\n\n    // if it's an array of objects (but not array of arrays, i.e JSON payload)\n    if (typeof data[0] === 'object' && !(data[0] instanceof Array)) {\n      return (data as TDataObject).map((row) =>\n        columns.map((column, i) => {\n          if (column.data !== undefined) {\n            if (typeof column.data === 'function') {\n              return column.data(row);\n            } else {\n              return column.data;\n            }\n          } else if (column.id) {\n            return row[column.id];\n          } else {\n            logger.error(`Could not find the correct cell for column at position ${i}.\n                          Make sure either 'id' or 'selector' is defined for all columns.`);\n            return null;\n          }\n        }),\n      );\n    }\n\n    return [];\n  }\n\n  _process(storageResponse: StorageResponse): ArrayResponse {\n    return {\n      data: this.castData(storageResponse.data),\n      total: storageResponse.total,\n    };\n  }\n}\n\nexport default StorageResponseToArrayTransformer;\n","import { Config } from '../config';\nimport Pipeline from './pipeline';\nimport Tabular from '../tabular';\nimport StorageExtractor from './extractor/storage';\nimport ArrayToTabularTransformer from './transformer/arrayToTabular';\nimport ServerStorage from '../storage/server';\nimport ServerInitiator from './initiator/server';\nimport StorageResponseToArrayTransformer from './transformer/storageResponseToArray';\n\nclass PipelineUtils {\n  static createFromConfig(config: Config): Pipeline<Tabular> {\n    const pipeline = new Pipeline<Tabular>();\n\n    if (config.storage instanceof ServerStorage) {\n      pipeline.register(\n        new ServerInitiator({\n          serverStorageOptions: config.server,\n        }),\n      );\n    }\n\n    pipeline.register(new StorageExtractor({ storage: config.storage }));\n    pipeline.register(\n      new StorageResponseToArrayTransformer({ header: config.header }),\n    );\n    pipeline.register(new ArrayToTabularTransformer());\n\n    return pipeline;\n  }\n}\n\nexport default PipelineUtils;\n","export class Store<S = Record<string, unknown>> {\n  private state: S;\n  private listeners: ((current?: S, prev?: S) => void)[] = [];\n  private isDispatching = false;\n\n  constructor(initialState: S) {\n    this.state = initialState;\n  }\n\n  getState = () => this.state;\n  getListeners = () => this.listeners;\n\n  dispatch = (reducer: (state: S) => S) => {\n    if (typeof reducer !== 'function')\n      throw new Error('Reducer is not a function');\n    if (this.isDispatching)\n      throw new Error('Reducers may not dispatch actions');\n\n    this.isDispatching = true;\n\n    const prevState = this.state;\n    try {\n      this.state = reducer(this.state);\n    } finally {\n      this.isDispatching = false;\n    }\n\n    for (const listener of this.listeners) {\n      listener(this.state, prevState);\n    }\n\n    return this.state;\n  };\n\n  subscribe = (listener: (current?: S, prev?: S) => void): (() => void) => {\n    if (typeof listener !== 'function')\n      throw new Error('Listener is not a function');\n\n    this.listeners = [...this.listeners, listener];\n    return () =>\n      (this.listeners = this.listeners.filter((lis) => lis !== listener));\n  };\n}\n","import { CSSDeclaration, OneDArray, Status, TColumn, TData } from './types';\nimport Storage from './storage/storage';\nimport Pipeline from './pipeline/pipeline';\nimport Tabular from './tabular';\nimport { Search, SearchConfig } from './view/plugin/search/search';\nimport { Pagination, PaginationConfig } from './view/plugin/pagination';\nimport Header from './header';\nimport { ServerStorageOptions } from './storage/server';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\nimport { Language, Translator } from './i18n/language';\nimport { ComponentChild, createContext, createRef, RefObject } from 'preact';\nimport StorageUtils from './storage/storageUtils';\nimport PipelineUtils from './pipeline/pipelineUtils';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager, PluginPosition, Plugin } from './plugin';\nimport Grid from './grid';\nimport { Store } from './state/store';\n\nexport const ConfigContext = createContext(null);\n\nexport interface Config {\n  // a reference to the current Grid.js instance\n  instance: Grid;\n  store: Store;\n  eventEmitter: EventEmitter<GridEvents>;\n  plugin: PluginManager;\n  /** container element that is used to mount the Grid.js to */\n  // TODO: change this to an element reference\n  container?: Element;\n  /** pointer to the main table element */\n  tableRef?: RefObject<HTMLTableElement>;\n  data?: TData | (() => TData) | (() => Promise<TData>);\n  server?: ServerStorageOptions;\n  header?: Header;\n  /** to parse a HTML table and load the data */\n  from: HTMLElement;\n  storage: Storage<any>;\n  /** Pipeline process throttle timeout in milliseconds */\n  processingThrottleMs: number;\n  pipeline: Pipeline<Tabular>;\n  /** to automatically calculate the columns width */\n  autoWidth: boolean;\n  /** sets the width of the container and table */\n  width: string;\n  /** sets the height of the table */\n  height: string;\n  pagination: PaginationConfig | boolean;\n  sort: GenericSortConfig | boolean;\n  translator: Translator;\n  /** fixes the table header to the top of the table */\n  fixedHeader: boolean;\n  /** Resizable columns? */\n  resizable: boolean;\n  columns: OneDArray<TColumn | string | ComponentChild>;\n  search: SearchConfig | boolean;\n  language: Language;\n  plugins?: Plugin<any>[];\n  style?: Partial<{\n    table: CSSDeclaration;\n    td: CSSDeclaration;\n    th: CSSDeclaration;\n    container: CSSDeclaration;\n    header: CSSDeclaration;\n    footer: CSSDeclaration;\n  }>;\n  className?: Partial<{\n    table: string;\n    th: string;\n    thead: string;\n    tbody: string;\n    tr: string;\n    td: string;\n    container: string;\n    footer: string;\n    header: string;\n    search: string;\n    sort: string;\n    pagination: string;\n    paginationSummary: string;\n    paginationButton: string;\n    paginationButtonNext: string;\n    paginationButtonCurrent: string;\n    paginationButtonPrev: string;\n    loading: string;\n    notfound: string;\n    error: string;\n  }>;\n}\n\nexport class Config {\n  public constructor() {\n    Object.assign(this, Config.defaultConfig());\n  }\n  /**\n   * Assigns `updatedConfig` keys to the current config file\n   *\n   * @param partialConfig\n   */\n  assign(partialConfig: Partial<Config>): Config {\n    return Object.assign(this, partialConfig);\n  }\n\n  /**\n   * Updates the config from a partial Config\n   *\n   * @param partialConfig\n   */\n  update(partialConfig: Partial<Config>): Config {\n    if (!partialConfig) return this;\n\n    this.assign(\n      Config.fromPartialConfig({\n        ...this,\n        ...partialConfig,\n      }),\n    );\n\n    return this;\n  }\n\n  static defaultConfig(): Partial<Config> {\n    return {\n      store: new Store({\n        status: Status.Init,\n        header: undefined,\n        data: null,\n      }),\n      plugin: new PluginManager(),\n      tableRef: createRef(),\n      width: '100%',\n      height: 'auto',\n      processingThrottleMs: 100,\n      autoWidth: true,\n      style: {},\n      className: {},\n    };\n  }\n\n  static fromPartialConfig(partialConfig: Partial<Config>): Partial<Config> {\n    const config = new Config().assign(partialConfig);\n\n    // Sort\n    if (typeof partialConfig.sort === 'boolean' && partialConfig.sort) {\n      config.assign({\n        sort: {\n          multiColumn: true,\n        },\n      });\n    }\n\n    // Header\n    config.assign({\n      header: Header.createFromConfig(config),\n    });\n\n    config.assign({\n      storage: StorageUtils.createFromConfig(config),\n    });\n\n    config.assign({\n      pipeline: PipelineUtils.createFromConfig(config),\n    });\n\n    // Translator\n    config.assign({\n      translator: new Translator(config.language),\n    });\n\n    if (config.search) {\n      // Search\n      config.plugin.remove('search');\n      config.plugin.add({\n        id: 'search',\n        position: PluginPosition.Header,\n        component: Search,\n      });\n    }\n\n    if (config.pagination) {\n      // Pagination\n      config.plugin.remove('pagination');\n      config.plugin.add({\n        id: 'pagination',\n        position: PluginPosition.Footer,\n        component: Pagination,\n      });\n    }\n\n    // Additional plugins\n    if (config.plugins) {\n      config.plugins.forEach((p) => config.plugin.add(p));\n      config.plugins.forEach((p) => {config.plugin.remove(p.id);config.plugin.add(p);});\n    }\n\n    return config;\n  }\n}\n","import { h, ComponentChild, JSX } from 'preact';\n\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { CSSDeclaration, TColumn } from '../../types';\nimport Row from '../../row';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { PluginRenderer } from '../../plugin';\nimport { useConfig } from '../../hooks/useConfig';\n\nexport function TD(\n  props: {\n    cell: Cell;\n    row?: Row;\n    column?: TColumn;\n    style?: CSSDeclaration;\n    messageCell?: boolean;\n  } & Omit<JSX.HTMLAttributes<HTMLTableCellElement>, 'style'>,\n) {\n  const config = useConfig();\n\n  const content = (): ComponentChild => {\n    if (props.column && typeof props.column.formatter === 'function') {\n      return props.column.formatter(props.cell.data, props.row, props.column);\n    }\n\n    if (props.column && props.column.plugin) {\n      return (\n        <PluginRenderer\n          pluginId={props.column.id}\n          props={{\n            column: props.column,\n            cell: props.cell,\n            row: props.row,\n          }}\n        />\n      );\n    }\n\n    return props.cell.data;\n  };\n\n  const handleClick = (\n    e: JSX.TargetedMouseEvent<HTMLTableCellElement>,\n  ): void => {\n    if (props.messageCell) return;\n\n    config.eventEmitter.emit(\n      'cellClick',\n      e,\n      props.cell,\n      props.column,\n      props.row,\n    );\n  };\n\n  const getCustomAttributes = (\n    column: TColumn | null,\n  ): JSXInternal.HTMLAttributes<HTMLTableCellElement> => {\n    if (!column) return {};\n\n    if (typeof column.attributes === 'function') {\n      return column.attributes(props.cell.data, props.row, props.column);\n    } else {\n      return column.attributes;\n    }\n  };\n\n  return (\n    <td\n      role={props.role}\n      colSpan={props.colSpan}\n      data-column-id={props.column && props.column.id}\n      className={classJoin(\n        className('td'),\n        props.className,\n        config.className.td,\n      )}\n      style={{\n        ...props.style,\n        ...config.style.td,\n      }}\n      onClick={handleClick}\n      {...getCustomAttributes(props.column)}\n    >\n      {content()}\n    </td>\n  );\n}\n","import { h, JSX, ComponentChildren } from 'preact';\n\nimport Row from '../../row';\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { TColumn } from '../../types';\nimport { TD } from './td';\nimport Header from '../../header';\nimport { useConfig } from '../../hooks/useConfig';\nimport useSelector from '../../hooks/useSelector';\n\nexport function TR(props: {\n  row?: Row;\n  messageRow?: boolean;\n  children?: ComponentChildren;\n}) {\n  const config = useConfig();\n  const header = useSelector((state) => state.header);\n\n  const getColumn = (cellIndex: number): TColumn => {\n    if (header) {\n      const cols = Header.leafColumns(header.columns);\n\n      if (cols) {\n        return cols[cellIndex];\n      }\n    }\n\n    return null;\n  };\n\n  const handleClick = (\n    e: JSX.TargetedMouseEvent<HTMLTableRowElement>,\n  ): void => {\n    if (props.messageRow) return;\n    config.eventEmitter.emit('rowClick', e, props.row);\n  };\n\n  const getChildren = (): ComponentChildren => {\n    if (props.children) {\n      return props.children;\n    }\n\n    return props.row.cells.map((cell: Cell, i) => {\n      const column = getColumn(i);\n\n      if (column && column.hidden) return null;\n\n      return <TD key={cell.id} cell={cell} row={props.row} column={column} />;\n    });\n  };\n\n  return (\n    <tr\n      className={classJoin(className('tr'), config.className.tr)}\n      onClick={handleClick}\n    >\n      {getChildren()}\n    </tr>\n  );\n}\n","import { h } from 'preact';\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { TR } from './tr';\nimport { TD } from './td';\n\nexport function MessageRow(props: {\n  message: string;\n  colSpan?: number;\n  className?: string;\n}) {\n  return (\n    <TR messageRow={true}>\n      <TD\n        role=\"alert\"\n        colSpan={props.colSpan}\n        messageCell={true}\n        cell={new Cell(props.message)}\n        className={classJoin(\n          className('message'),\n          props.className ? props.className : null,\n        )}\n      />\n    </TR>\n  );\n}\n","import { h } from 'preact';\nimport Row from '../../row';\nimport { TR } from './tr';\nimport { classJoin, className } from '../../util/className';\nimport { Status } from '../../types';\nimport { MessageRow } from './messageRow';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useTranslator } from '../../i18n/language';\nimport useSelector from '../../hooks/useSelector';\n\nexport function TBody() {\n  const config = useConfig();\n  const data = useSelector((state) => state.data);\n  const status = useSelector((state) => state.status);\n  const header = useSelector((state) => state.header);\n  const _ = useTranslator();\n\n  const headerLength = () => {\n    if (header) {\n      return header.visibleColumns.length;\n    }\n    return 0;\n  };\n\n  return (\n    <tbody className={classJoin(className('tbody'), config.className.tbody)}>\n      {data &&\n        data.rows.map((row: Row) => {\n          return <TR key={row.id} row={row} />;\n        })}\n\n      {status === Status.Loading && (!data || data.length === 0) && (\n        <MessageRow\n          message={_('loading')}\n          colSpan={headerLength()}\n          className={classJoin(className('loading'), config.className.loading)}\n        />\n      )}\n\n      {status === Status.Rendered && data && data.length === 0 && (\n        <MessageRow\n          message={_('noRecordsFound')}\n          colSpan={headerLength()}\n          className={classJoin(\n            className('notfound'),\n            config.className.notfound,\n          )}\n        />\n      )}\n\n      {status === Status.Error && (\n        <MessageRow\n          message={_('error')}\n          colSpan={headerLength()}\n          className={classJoin(className('error'), config.className.error)}\n        />\n      )}\n    </tbody>\n  );\n}\n","import { Comparator, TCell } from '../../types';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport Row from '../../row';\nimport log from '../../util/log';\n\ninterface NativeSortProps extends PipelineProcessorProps {\n  columns: {\n    index: number;\n    // 1 ascending, -1 descending\n    direction?: 1 | -1;\n    compare?: Comparator<TCell>;\n  }[];\n}\n\nclass NativeSort extends PipelineProcessor<Tabular, NativeSortProps> {\n  protected validateProps(): void {\n    for (const condition of this.props.columns) {\n      if (condition.direction === undefined) {\n        condition.direction = 1;\n      }\n\n      if (condition.direction !== 1 && condition.direction !== -1) {\n        log.error(`Invalid sort direction ${condition.direction}`);\n      }\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Sort;\n  }\n\n  private compare(cellA: TCell, cellB: TCell): number {\n    if (cellA > cellB) {\n      return 1;\n    } else if (cellA < cellB) {\n      return -1;\n    }\n\n    return 0;\n  }\n\n  private compareWrapper(a: Row, b: Row): number {\n    let cmp = 0;\n\n    for (const column of this.props.columns) {\n      if (cmp === 0) {\n        const cellA = a.cells[column.index].data;\n        const cellB = b.cells[column.index].data;\n\n        if (typeof column.compare === 'function') {\n          cmp |= column.compare(cellA, cellB) * column.direction;\n        } else {\n          cmp |= this.compare(cellA, cellB) * column.direction;\n        }\n      } else {\n        break;\n      }\n    }\n\n    return cmp;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const sortedRows = [...data.rows];\n    sortedRows.sort(this.compareWrapper.bind(this));\n\n    const sorted = new Tabular(sortedRows);\n    // we have to set the tabular length manually\n    // because of the server-side storage\n    sorted.length = data.length;\n\n    return sorted;\n  }\n}\n\nexport default NativeSort;\n","import { Comparator, TCell } from '../../../types';\n\nexport const SortColumn =\n  (\n    index: number,\n    direction: 1 | -1,\n    multi?: boolean,\n    compare?: Comparator<TCell>,\n  ) =>\n  (state) => {\n    let columns = state.sort?.columns\n      ? state.sort.columns.map((x) => {\n          return { ...x };\n        })\n      : [];\n    const count = columns.length;\n    const column = columns.find((x) => x.index === index);\n    const exists = column !== undefined;\n\n    let add = false;\n    let reset = false;\n    let remove = false;\n    let update = false;\n\n    if (!exists) {\n      // the column has not been sorted\n      if (count === 0) {\n        // the first column to be sorted\n        add = true;\n      } else if (count > 0 && !multi) {\n        // remove the previously sorted column\n        // and sort the current column\n        add = true;\n        reset = true;\n      } else if (count > 0 && multi) {\n        // multi-sorting\n        // sort this column as well\n        add = true;\n      }\n    } else {\n      // the column has been sorted before\n      if (!multi) {\n        // single column sorting\n        if (count === 1) {\n          update = true;\n        } else if (count > 1) {\n          // this situation happens when we have already entered\n          // multi-sorting mode but then user tries to sort a single column\n          reset = true;\n          add = true;\n        }\n      } else {\n        // multi sorting\n        if (column.direction === -1) {\n          // remove the current column from the\n          // sorted columns array\n          remove = true;\n        } else {\n          update = true;\n        }\n      }\n    }\n\n    if (reset) {\n      // resetting the sorted columns\n      columns = [];\n    }\n\n    if (add) {\n      columns.push({\n        index: index,\n        direction: direction,\n        compare: compare,\n      });\n    } else if (update) {\n      const index = columns.indexOf(column);\n      columns[index].direction = direction;\n    } else if (remove) {\n      const index = columns.indexOf(column);\n      columns.splice(index, 1);\n    }\n\n    return {\n      ...state,\n      sort: {\n        columns: columns,\n      },\n    };\n  };\n\nexport const SortToggle =\n  (index: number, multi: boolean, compare?: Comparator<TCell>) => (state) => {\n    const columns = state.sort ? [...state.sort.columns] : [];\n    const column = columns.find((x) => x.index === index);\n\n    if (!column) {\n      return {\n        ...state,\n        ...SortColumn(index, 1, multi, compare)(state),\n      };\n    }\n\n    return {\n      ...state,\n      ...SortColumn(\n        index,\n        column.direction === 1 ? -1 : 1,\n        multi,\n        compare,\n      )(state),\n    };\n  };\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\nimport { TColumnSort } from '../../types';\n\ninterface ServerSortProps extends PipelineProcessorProps {\n  columns: TColumnSort[];\n  url?: (prevUrl: string, columns: TColumnSort[]) => string;\n  body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n}\n\nclass ServerSort extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerSortProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerSort;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.columns);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.columns);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerSort;\n","import { h, JSX } from 'preact';\n\nimport { classJoin, className } from '../../../util/className';\nimport { PipelineProcessor, ProcessorType } from '../../../pipeline/processor';\nimport NativeSort from '../../../pipeline/sort/native';\nimport { Comparator, TCell, TColumnSort } from '../../../types';\nimport * as actions from './actions';\nimport ServerSort from '../../../pipeline/sort/server';\nimport { useEffect, useState } from 'preact/hooks';\nimport { useConfig } from '../../../hooks/useConfig';\nimport { useTranslator } from '../../../i18n/language';\nimport useSelector from '../../../hooks/useSelector';\nimport { useStore } from '../../../hooks/useStore';\n\n// column specific config\nexport interface SortConfig {\n  compare?: Comparator<TCell>;\n}\n\n// generic sort config:\n//\n// Config {\n//    sort: GenericSortConfig\n// }\n//\nexport interface GenericSortConfig {\n  multiColumn?: boolean;\n  server?: {\n    url?: (prevUrl: string, columns: TColumnSort[]) => string;\n    body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n  };\n}\n\nexport function Sort(\n  props: {\n    // column index\n    index: number;\n  } & SortConfig,\n) {\n  const config = useConfig();\n  const { dispatch } = useStore();\n  const _ = useTranslator();\n  const [direction, setDirection] = useState(0);\n  const sortConfig = config.sort as GenericSortConfig;\n  const state = useSelector((state) => state.sort);\n  const processorType =\n    typeof sortConfig?.server === 'object'\n      ? ProcessorType.ServerSort\n      : ProcessorType.Sort;\n\n  const getSortProcessor = () => {\n    const processors = config.pipeline.getStepsByType(processorType);\n    if (processors.length) {\n      return processors[0];\n    }\n    return undefined;\n  };\n\n  const createSortProcessor = () => {\n    if (processorType === ProcessorType.ServerSort) {\n      return new ServerSort({\n        columns: state ? state.columns : [],\n        ...sortConfig.server,\n      });\n    }\n\n    return new NativeSort({\n      columns: state ? state.columns : [],\n    });\n  };\n\n  const getOrCreateSortProcessor = (): PipelineProcessor<any, any> => {\n    const existingSortProcessor = getSortProcessor();\n    if (existingSortProcessor) {\n      return existingSortProcessor;\n    }\n\n    return createSortProcessor();\n  };\n\n  useEffect(() => {\n    const processor = getOrCreateSortProcessor();\n    config.pipeline.tryRegister(processor);\n\n    return () => config.pipeline.unregister(processor);\n  }, [config]);\n\n  /**\n   * Sets the internal state of component\n   */\n  useEffect(() => {\n    if (!state) return;\n\n    const currentColumn = state.columns.find((x) => x.index === props.index);\n\n    if (!currentColumn) {\n      setDirection(0);\n    } else {\n      setDirection(currentColumn.direction);\n    }\n  }, [state]);\n\n  useEffect(() => {\n    const processor = getSortProcessor();\n\n    if (!processor) return;\n    if (!state) return;\n\n    processor.setProps({\n      columns: state.columns,\n    });\n  }, [state]);\n\n  const changeDirection = (e: JSX.TargetedMouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // to sort two or more columns at the same time\n    dispatch(\n      actions.SortToggle(\n        props.index,\n        e.shiftKey === true && sortConfig.multiColumn,\n        props.compare,\n      ),\n    );\n  };\n\n  const getSortClassName = (direction: number) => {\n    if (direction === 1) {\n      return 'asc';\n    } else if (direction === -1) {\n      return 'desc';\n    }\n\n    return 'neutral';\n  };\n\n  return (\n    <button\n      // because the corresponding <th> has tabIndex=0\n      tabIndex={-1}\n      aria-label={_(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n      title={_(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n      className={classJoin(\n        className('sort'),\n        className('sort', getSortClassName(direction)),\n        config.className.sort,\n      )}\n      onClick={changeDirection}\n    />\n  );\n}\n","/**\n * Throttle a given function\n * @param fn Function to be called\n * @param wait Throttle timeout in milliseconds\n * @returns Throttled function\n */\nexport const throttle = (fn: (...args) => void, wait = 100) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  let lastTime = Date.now();\n\n  const execute = (...args) => {\n    lastTime = Date.now();\n    fn(...args);\n  };\n\n  return (...args) => {\n    const currentTime = Date.now();\n    const elapsed = currentTime - lastTime;\n\n    if (elapsed >= wait) {\n      // If enough time has passed since the last call, execute the function immediately\n      execute(...args);\n    } else {\n      // If not enough time has passed, schedule the function call after the remaining delay\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n\n      timeoutId = setTimeout(() => {\n        execute(...args);\n        timeoutId = null;\n      }, wait - elapsed);\n    }\n  };\n};\n","import { h, RefObject } from 'preact';\nimport { classJoin, className } from '../../../util/className';\nimport { TColumn } from '../../../types';\nimport { throttle } from '../../../util/throttle';\n\nexport function Resize(props: {\n  column: TColumn;\n  thRef: RefObject<HTMLTableCellElement>;\n}) {\n  let moveFn: (e) => void;\n\n  const getPageX = (e: MouseEvent | TouchEvent) => {\n    if (e instanceof MouseEvent) {\n      return Math.floor(e.pageX);\n    } else {\n      return Math.floor(e.changedTouches[0].pageX);\n    }\n  };\n\n  const start = (e: MouseEvent | TouchEvent) => {\n    e.stopPropagation();\n\n    const thElement = props.thRef.current;\n\n    const offsetStart = parseInt(thElement.style.width, 10) - getPageX(e);\n\n    moveFn = throttle((e) => move(e, offsetStart), 10);\n\n    document.addEventListener('mouseup', end);\n    document.addEventListener('touchend', end);\n    document.addEventListener('mousemove', moveFn);\n    document.addEventListener('touchmove', moveFn);\n  };\n\n  const move = (e: MouseEvent | TouchEvent, offsetStart: number) => {\n    e.stopPropagation();\n\n    const thElement = props.thRef.current;\n\n    if (offsetStart + getPageX(e) >= parseInt(thElement.style.minWidth, 10)) {\n      thElement.style.width = `${offsetStart + getPageX(e)}px`;\n    }\n  };\n\n  const end = (e: MouseEvent | TouchEvent) => {\n    e.stopPropagation();\n\n    document.removeEventListener('mouseup', end);\n    document.removeEventListener('mousemove', moveFn);\n    document.removeEventListener('touchmove', moveFn);\n    document.removeEventListener('touchend', end);\n  };\n\n  return (\n    <div\n      className={classJoin(className('th'), className('resizable'))}\n      onMouseDown={start}\n      onTouchStart={start}\n      onClick={(e) => e.stopPropagation()}\n    />\n  );\n}\n","import { h, ComponentChild, JSX } from 'preact';\n\nimport { classJoin, className } from '../../util/className';\nimport { CSSDeclaration, TColumn } from '../../types';\nimport { GenericSortConfig, Sort } from '../plugin/sort/sort';\nimport { PluginRenderer } from '../../plugin';\nimport { Resize } from '../plugin/resize/resize';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../../hooks/useConfig';\nimport * as SortActions from '../plugin/sort/actions';\nimport { useStore } from '../../hooks/useStore';\n\nexport function TH(\n  props: {\n    index: number;\n    column: TColumn;\n    style?: CSSDeclaration;\n  } & Omit<JSX.HTMLAttributes<HTMLTableCellElement>, 'style'>,\n) {\n  const config = useConfig();\n  const thRef = useRef(null);\n  const [style, setStyle] = useState({});\n  const { dispatch } = useStore();\n\n  useEffect(() => {\n    // sets the `top` style if the current TH is fixed\n    if (config.fixedHeader && thRef.current) {\n      const offsetTop = thRef.current.offsetTop;\n\n      if (typeof offsetTop === 'number') {\n        setStyle({\n          top: offsetTop,\n        });\n      }\n    }\n  }, [thRef]);\n\n  const isSortable = (): boolean => props.column.sort != undefined;\n  const isResizable = (): boolean => props.column.resizable;\n  const onClick = (\n    e:\n      | JSX.TargetedMouseEvent<HTMLTableCellElement>\n      | JSX.TargetedKeyboardEvent<HTMLTableCellElement>,\n  ) => {\n    e.stopPropagation();\n\n    if (isSortable()) {\n      const sortConfig = config.sort as GenericSortConfig;\n\n      dispatch(\n        SortActions.SortToggle(\n          props.index,\n          e.shiftKey === true && sortConfig.multiColumn,\n          props.column.sort.compare,\n        ),\n      );\n    }\n  };\n\n  const keyDown = (e: JSX.TargetedKeyboardEvent<HTMLTableCellElement>) => {\n    // Enter key\n    if (isSortable() && e.which === 13) {\n      onClick(e);\n    }\n  };\n\n  const content = (): ComponentChild => {\n    if (props.column.name !== undefined) {\n      return props.column.name;\n    }\n\n    if (props.column.plugin !== undefined) {\n      return (\n        <PluginRenderer\n          pluginId={props.column.plugin.id}\n          props={{\n            column: props.column,\n          }}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  const getCustomAttributes = () => {\n    const column = props.column;\n\n    if (!column) return {};\n\n    if (typeof column.attributes === 'function') {\n      return column.attributes(null, null, props.column);\n    } else {\n      return column.attributes;\n    }\n  };\n\n  return (\n    <th\n      ref={thRef}\n      data-column-id={props.column && props.column.id}\n      className={classJoin(\n        className('th'),\n        isSortable() ? className('th', 'sort') : null,\n        config.fixedHeader ? className('th', 'fixed') : null,\n        config.className.th,\n      )}\n      onClick={onClick}\n      style={{\n        ...config.style.th,\n        ...{\n          minWidth: props.column.minWidth,\n          width: props.column.width,\n        },\n        ...style,\n        ...props.style,\n      }}\n      onKeyDown={keyDown}\n      rowSpan={props.rowSpan > 1 ? props.rowSpan : undefined}\n      colSpan={props.colSpan > 1 ? props.colSpan : undefined}\n      {...getCustomAttributes()}\n      {...(isSortable() ? { tabIndex: 0 } : {})}\n    >\n      <div className={className('th', 'content')}>{content()}</div>\n      {isSortable() && <Sort index={props.index} {...props.column.sort} />}\n      {isResizable() &&\n        props.index < config.header.visibleColumns.length - 1 && (\n          <Resize column={props.column} thRef={thRef} />\n        )}\n    </th>\n  );\n}\n","import { h } from 'preact';\nimport { TR } from './tr';\nimport { TH } from './th';\nimport { classJoin, className } from '../../util/className';\nimport Header from '../../header';\nimport { TColumn } from '../../types';\nimport { calculateRowColSpans } from '../../util/table';\nimport { useConfig } from '../../hooks/useConfig';\nimport useSelector from '../../hooks/useSelector';\n\nexport function THead() {\n  const config = useConfig();\n  const header = useSelector((state) => state.header);\n\n  const renderColumn = (\n    column: TColumn,\n    rowIndex: number,\n    columnIndex: number,\n    totalRows: number,\n  ) => {\n    const { rowSpan, colSpan } = calculateRowColSpans(\n      column,\n      rowIndex,\n      totalRows,\n    );\n\n    return (\n      <TH\n        column={column}\n        index={columnIndex}\n        colSpan={colSpan}\n        rowSpan={rowSpan}\n      />\n    );\n  };\n\n  const renderRow = (row: TColumn[], rowIndex: number, totalRows: number) => {\n    // because the only sortable columns are leaf columns (not parents)\n    const leafColumns = Header.leafColumns(header.columns);\n\n    return (\n      <TR>\n        {row.map((col) => {\n          if (col.hidden) return null;\n\n          return renderColumn(\n            col,\n            rowIndex,\n            leafColumns.indexOf(col),\n            totalRows,\n          );\n        })}\n      </TR>\n    );\n  };\n\n  const renderRows = () => {\n    const rows = Header.tabularFormat(header.columns);\n\n    return rows.map((row, rowIndex) => renderRow(row, rowIndex, rows.length));\n  };\n\n  if (header) {\n    return (\n      <thead\n        key={header.id}\n        className={classJoin(className('thead'), config.className.thead)}\n      >\n        {renderRows()}\n      </thead>\n    );\n  }\n\n  return null;\n}\n","import { TColumn } from '../types';\nimport Header from '../header';\n\nexport function calculateRowColSpans(\n  column: TColumn,\n  rowIndex: number,\n  totalRows: number,\n): { rowSpan: number; colSpan: number } {\n  const depth = Header.maximumDepth(column);\n  const remainingRows = totalRows - rowIndex;\n  const rowSpan = Math.floor(remainingRows - depth - depth / remainingRows);\n  const colSpan = (column.columns && column.columns.length) || 1;\n\n  return {\n    rowSpan: rowSpan,\n    colSpan: colSpan,\n  };\n}\n","import Header from 'src/header';\nimport Tabular from '../tabular';\nimport { Status } from '../types';\n\nexport const SetStatusToRendered = () => (state) => {\n  if (state.status === Status.Loaded) {\n    return {\n      ...state,\n      status: Status.Rendered,\n    };\n  }\n\n  return state;\n};\n\nexport const SetLoadingData = () => (state) => {\n  return {\n    ...state,\n    status: Status.Loading,\n  };\n};\n\nexport const SetData = (data: Tabular) => (state) => {\n  if (!data) return state;\n\n  return {\n    ...state,\n    data: data,\n    status: Status.Loaded,\n  };\n};\n\nexport const SetDataErrored = () => (state) => {\n  return {\n    ...state,\n    data: null,\n    status: Status.Error,\n  };\n};\n\nexport const SetHeader = (header: Header) => (state) => {\n  return {\n    ...state,\n    header: header,\n  };\n};\n\nexport const SetTableRef = (tableRef) => (state) => {\n  return {\n    ...state,\n    tableRef: tableRef,\n  };\n};\n","import { h } from 'preact';\nimport { TBody } from './tbody';\nimport { THead } from './thead';\nimport { classJoin, className } from '../../util/className';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useEffect, useRef } from 'preact/hooks';\nimport * as actions from '../actions';\nimport { useStore } from '../../hooks/useStore';\n\nexport function Table() {\n  const config = useConfig();\n  const tableRef = useRef(null);\n  const { dispatch } = useStore();\n\n  useEffect(() => {\n    if (tableRef) dispatch(actions.SetTableRef(tableRef));\n  }, [tableRef]);\n\n  return (\n    <table\n      ref={tableRef}\n      role=\"grid\"\n      className={classJoin(className('table'), config.className.table)}\n      style={{\n        ...config.style.table,\n        ...{\n          height: config.height,\n        },\n      }}\n    >\n      <THead />\n      <TBody />\n    </table>\n  );\n}\n","import { classJoin, className } from '../util/className';\nimport { h } from 'preact';\nimport { PluginPosition, PluginRenderer } from '../plugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../hooks/useConfig';\n\nexport function HeaderContainer() {\n  const [isActive, setIsActive] = useState(true);\n  const headerRef = useRef(null);\n  const config = useConfig();\n\n  useEffect(() => {\n    if (headerRef.current.children.length === 0) {\n      setIsActive(false);\n    }\n  }, [headerRef]);\n\n  if (isActive) {\n    return (\n      <div\n        ref={headerRef}\n        className={classJoin(className('head'), config.className.header)}\n        style={{ ...config.style.header }}\n      >\n        <PluginRenderer position={PluginPosition.Header} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { h } from 'preact';\nimport { classJoin, className } from '../util/className';\nimport { PluginPosition, PluginRenderer } from '../plugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../hooks/useConfig';\n\nexport function FooterContainer() {\n  const footerRef = useRef(null);\n  const [isActive, setIsActive] = useState(true);\n  const config = useConfig();\n\n  useEffect(() => {\n    if (footerRef.current.children.length === 0) {\n      setIsActive(false);\n    }\n  }, [footerRef]);\n\n  if (isActive) {\n    return (\n      <div\n        ref={footerRef}\n        className={classJoin(className('footer'), config.className.footer)}\n        style={{ ...config.style.footer }}\n      >\n        <PluginRenderer position={PluginPosition.Footer} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { createRef, h } from 'preact';\nimport { classJoin, className } from '../util/className';\nimport { Status } from '../types';\nimport { Table } from './table/table';\nimport { HeaderContainer } from './headerContainer';\nimport { FooterContainer } from './footerContainer';\nimport log from '../util/log';\nimport { useEffect } from 'preact/hooks';\nimport * as actions from './actions';\nimport { useStore } from '../hooks/useStore';\nimport useSelector from '../hooks/useSelector';\nimport { useConfig } from '../hooks/useConfig';\nimport { throttle } from '../util/throttle';\n\nexport function Container() {\n  const config = useConfig();\n  const { dispatch } = useStore();\n  const status = useSelector((state) => state.status);\n  const data = useSelector((state) => state.data);\n  const tableRef = useSelector((state) => state.tableRef);\n  const tempRef = createRef();\n\n  const processPipeline = throttle(async () => {\n    dispatch(actions.SetLoadingData());\n\n    try {\n      const data = await config.pipeline.process();\n      dispatch(actions.SetData(data));\n\n      // TODO: do we need this setTimemout?\n      setTimeout(() => {\n        dispatch(actions.SetStatusToRendered());\n      }, 0);\n    } catch (e) {\n      log.error(e);\n      dispatch(actions.SetDataErrored());\n    }\n  }, config.processingThrottleMs);\n\n  useEffect(() => {\n    // set the initial header object\n    // we update the header width later when \"data\"\n    // is available in the state\n    dispatch(actions.SetHeader(config.header));\n\n    processPipeline();\n    config.pipeline.on('updated', processPipeline);\n\n    return () => config.pipeline.off('updated', processPipeline);\n  }, []);\n\n  useEffect(() => {\n    if (config.header && status === Status.Loaded && data?.length) {\n      // now that we have the data, let's adjust columns width\n      // NOTE: that we only calculate the columns width once\n      dispatch(\n        actions.SetHeader(config.header.adjustWidth(config, tableRef, tempRef)),\n      );\n    }\n  }, [data, config, tempRef]);\n\n  return (\n    <div\n      role=\"complementary\"\n      className={classJoin(\n        'gridjs',\n        className('container'),\n        status === Status.Loading ? className('loading') : null,\n        config.className.container,\n      )}\n      style={{\n        ...config.style.container,\n        ...{\n          width: config.width,\n        },\n      }}\n    >\n      {status === Status.Loading && (\n        <div className={className('loading-bar')} />\n      )}\n\n      <HeaderContainer />\n\n      <div className={className('wrapper')} style={{ height: config.height }}>\n        <Table />\n      </div>\n\n      <FooterContainer />\n\n      <div ref={tempRef} id=\"gridjs-temp\" className={className('temp')} />\n    </div>\n  );\n}\n","import { Config } from './config';\nimport { h, render, VNode } from 'preact';\nimport { Container } from './view/container';\nimport log from './util/log';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager } from './plugin';\nimport { ConfigContext } from './config';\n\nclass Grid extends EventEmitter<GridEvents> {\n  public config: Config;\n  public plugin: PluginManager;\n\n  constructor(config?: Partial<Config>) {\n    super();\n    this.config = new Config()\n      .assign({ instance: this, eventEmitter: this })\n      .update(config);\n    this.plugin = this.config.plugin;\n  }\n\n  public updateConfig(config: Partial<Config>): this {\n    this.config.update(config);\n    return this;\n  }\n\n  createElement(): VNode {\n    return h(ConfigContext.Provider, {\n      value: this.config,\n      children: h(Container, {}),\n    });\n  }\n\n  /**\n   * Uses the existing container and tries to clear the cache\n   * and re-render the existing Grid.js instance again. This is\n   * useful when a new config is set/updated.\n   *\n   */\n  forceRender(): this {\n    if (!this.config || !this.config.container) {\n      log.error(\n        'Container is empty. Make sure you call render() before forceRender()',\n        true,\n      );\n    }\n\n    this.destroy();\n\n    // recreate the Grid instance\n    render(this.createElement(), this.config.container);\n\n    return this;\n  }\n\n  /**\n   * Deletes the Grid.js instance\n   */\n  destroy(): void {\n    this.config.pipeline.clearCache();\n    // TODO: not sure if it's a good idea to render a null element but I couldn't find a better way\n    render(null, this.config.container);\n  }\n\n  /**\n   * Mounts the Grid.js instance to the container\n   * and renders the instance\n   *\n   * @param container\n   */\n  render(container: Element): this {\n    if (!container) {\n      log.error('Container element cannot be null', true);\n    }\n\n    if (container.childNodes.length > 0) {\n      log.error(\n        `The container element ${container} is not empty. Make sure the container is empty and call render() again`,\n      );\n      return this;\n    }\n\n    this.config.container = container;\n    render(this.createElement(), container);\n\n    return this;\n  }\n}\n\nexport default Grid;\n"],"names":["Status","n","l","u","t","i","o","r","f","e","c","s","a","h","Array","isArray","v","p","parentNode","removeChild","y","arguments","length","children","call","defaultProps","d","type","props","key","ref","__k","__","__b","__e","__d","__c","constructor","__v","__i","__u","vnode","g","b","this","context","m","k","base","w","push","x","__r","debounceRendering","sort","shift","__P","L","__n","ownerSVGElement","M","C","_","String","H","N","P","z","S","nextSibling","insertBefore","I","setProperty","test","T","style","cssText","replace","toLowerCase","slice","Date","now","addEventListener","D","A","removeEventListener","removeAttribute","setAttribute","event","$","contextType","value","__E","prototype","render","O","sub","state","__h","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","indexOf","j","diffed","some","localName","nodeType","document","createTextNode","createElementNS","createElement","is","data","childNodes","attributes","name","__html","innerHTML","current","unmount","componentWillUnmount","q","firstChild","generateUUID","Math","random","toString","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","bind","resolve","setTimeout","Base","id","_id","_createClass","get","HTMLElement","parentElement","dangerouslySetInnerHTML","content","html","Cell","ProcessorType","_Base","_this","update","_inheritsLoose","_proto","cast","outerHTML","Row","cells","_cells","cell","index","toArray","map","fromCells","set","Tabular","rows","_rows","_length","row","fromRows","fromArray","oneDtoTwoD","len","EventEmitter","callbacks","init","listeners","on","listener","off","eventName","filter","emit","_arguments","apply","deepEqual","obj1","obj2","keys1","Object","keys","keys2","_i","_keys","hasOwnProperty","PipelineProcessor","_EventEmitter","_props","setProps","process","args","validateProps","Function","concat","result","_process","updatedProps","_extends","GlobalSearchFilter","_PipelineProcessor","keyword","trim","columns","ignoreHiddenColumns","tabular","selector","rowIndex","cellIndex","hidden","element","RegExp","Filter","className","reduce","prev","cur","classJoin","ServerGlobalSearchFilter","options","updates","url","body","ServerFilter","__H","__V","B","__N","every","F","requestAnimationFrame","clearTimeout","cancelAnimationFrame","useConfig","useContext","ConfigContext","hanjiTW","search","placeholder","sortAsc","sortDesc","pagination","previous","next","navigate","page","pages","showing","of","to","results","loading","noRecordsFound","error","Translator","language","_language","_defaultLanguage","getString","message","lang","splitted","split","val","join","translate","messageFormat","useTranslator","config","_config$translator","translator","SearchKeyword","payload","useStore","store","useSelector","_useState","useState","getState","setCurrent","useEffect","subscribe","updated","Search","_config$className","undefined","processor","setProcessor","dispatch","server","header","actions","pipeline","register","unregister","func","waitFor","timeout","debouncedOnInput","useCallback","target","HTMLInputElement","debounceTimeout","onInput","PaginationLimit","isNaN","Number","limit","Error","Limit","ServerPaginationLimit","ServerLimit","Pagination","_config$pagination","_config$pagination$su","summary","_config$pagination$ne","nextButton","_config$pagination$pr","prevButton","_config$pagination$bu","buttonsCount","_config$pagination$li","_config$pagination$pa","_config$pagination$re","resetPageOnUpdate","useRef","currentPage","setCurrentPage","_useState2","total","setTotal","onUpdate","updatedProcessor","ceil","setPage","Fragment","role","paginationSummary","title","min","tabIndex","disabled","onClick","paginationButton","paginationButtonPrev","maxCount","pagePivot","floor","from","paginationButtonCurrent","renderPages","paginationButtonNext","width","containerWidth","parseInt","px","ShadowTable","shadowTable","tableRef","cloneNode","position","zIndex","visibility","nodeElement","appendChild","camelCase","str","words","word","charAt","toUpperCase","PluginPosition","log","Logger","format","throwException","msg","console","warn","info","exports","PluginManager","plugins","find","add","plugin","remove","splice","list","order","PluginRenderer","pluginId","component","Header","_columns","adjustWidth","tempRef","container","autoWidth","clientWidth","widths","tableElement","querySelector","tableClassName","tableStyle","tableLayout","padding","margin","border","outline","obj","querySelectorAll","_extends2","getAttribute","minWidth","getShadowTableWidths","_step","_iterator","_createForOfIteratorHelperLoose","tabularFormat","done","column","setSort","sortConfig","_step2","_iterator2","setResizable","resizable","_step3","_iterator3","setID","_step4","_iterator4","logger","populatePlugins","pluginManager","_iterator5","_step5","fromColumns","_step6","_iterator6","isValidElement","typedColumn","createFromConfig","fromHTMLTable","_step7","_iterator7","th","cols","nextRow","_iterator8","_step8","col","leafColumns","_iterator9","_step9","maximumDepth","Storage","MemoryStorage","_Storage","reject","ServerStorage","handler","response","handle","ok","json","status","statusText","opts","fetch","res","StorageUtils","storage","tableElementToArray","display","arr","parsedRow","Node","TEXT_NODE","DOMParser","parseFromString","documentElement","textContent","_settle","pact","_Pact","observer","onFulfilled","onRejected","callback","_isSettledPact","thenable","Pipeline","steps","_steps","Map","cache","lastProcessorIndexUpdated","step","clearCache","priority","findProcessorIndexByID","processorPropsUpdated","addProcessorByPriority","afterRegistered","tryRegister","subSteps","proc","newSubStep","first","second","getStepsByType","getSortedProcessorTypes","_temp3","_result","_this2","_temp2","array","check","_cycle","_forOf","processorIndex","_temp","_processor$process","_catch","processorID","findIndex","setLastProcessorIndex","StorageExtractor","Extractor","ArrayToTabularTransformer","arrayResponse","Transformer","ServerInitiator","entries","serverStorageOptions","_ref","acc","_ref2","Initiator","StorageResponseToArrayTransformer","castData","pad","storageResponse","PipelineUtils","Store","initialState","isDispatching","getListeners","reducer","prevState","lis","Consumer","Provider","createContext","Config","assign","defaultConfig","partialConfig","fromPartialConfig","Init","height","processingThrottleMs","multiColumn","Footer","TD","colSpan","td","messageCell","eventEmitter","formatter","TR","tr","messageRow","getColumn","MessageRow","TBody","headerLength","visibleColumns","tbody","Loading","Rendered","notfound","NativeSort","condition","direction","compare","cellA","cellB","compareWrapper","cmp","sortedRows","sorted","Sort","SortColumn","multi","_state$sort","count","reset","SortToggle","ServerSort","setDirection","processorType","getSortProcessor","processors","currentColumn","getSortClassName","preventDefault","stopPropagation","shiftKey","throttle","fn","wait","timeoutId","lastTime","execute","elapsed","Resize","moveFn","getPageX","MouseEvent","pageX","changedTouches","start","offsetStart","thRef","move","end","thElement","onMouseDown","onTouchStart","TH","setStyle","fixedHeader","offsetTop","top","isSortable","SortActions","onKeyDown","which","rowSpan","THead","thead","totalRows","columnIndex","_calculateRowColSpans","depth","remainingRows","calculateRowColSpans","renderColumn","renderRow","SetHeader","SetTableRef","Table","table","HeaderContainer","isActive","setIsActive","headerRef","FooterContainer","footerRef","footer","Container","processPipeline","Loaded","Grid","instance","_assertThisInitialized","updateConfig","forceRender","destroy"],"mappings":"qoEA2DYA,GAAZ,SAAYA,GACVA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,MAAA,GAAA,OACD,CAND,CAAYA,IAAAA,EAMX,CAAA,ICjED,IAAIC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,GAAGC,EAAE,GAAGC,EAAE,oEAAoEC,EAAEC,MAAMC,QAAQ,SAASC,EAAEf,EAAEC,GAAG,IAAI,IAAIC,KAAKD,EAAED,EAAEE,GAAGD,EAAEC,GAAG,OAAOF,CAAC,CAAC,SAASgB,EAAEhB,GAAG,IAAIC,EAAED,EAAEiB,WAAWhB,GAAGA,EAAEiB,YAAYlB,EAAE,CAAC,SAASmB,EAAElB,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAEC,EAAE,CAAA,EAAG,IAAID,KAAKJ,EAAE,OAAOI,EAAEF,EAAEF,EAAEI,GAAG,OAAOA,EAAED,EAAEH,EAAEI,GAAGC,EAAED,GAAGJ,EAAEI,GAAG,GAAGc,UAAUC,OAAO,IAAId,EAAEe,SAASF,UAAUC,OAAO,EAAErB,EAAEuB,KAAKH,UAAU,GAAGjB,GAAG,mBAAmBF,GAAG,MAAMA,EAAEuB,aAAa,IAAIlB,KAAKL,EAAEuB,kBAAa,IAASjB,EAAED,KAAKC,EAAED,GAAGL,EAAEuB,aAAalB,IAAI,OAAOmB,EAAExB,EAAEM,EAAEH,EAAEC,EAAE,KAAK,CAAC,SAASoB,EAAEzB,EAAEG,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAE,CAACmB,KAAK1B,EAAE2B,MAAMxB,EAAEyB,IAAIxB,EAAEyB,IAAIxB,EAAEyB,IAAI,KAAKC,GAAG,KAAKC,IAAI,EAAEC,IAAI,KAAKC,SAAI,EAAOC,IAAI,KAAKC,iBAAY,EAAOC,IAAI,MAAM/B,IAAIJ,EAAEI,EAAEgC,KAAK,EAAEC,IAAI,GAAG,OAAO,MAAMjC,GAAG,MAAML,EAAEuC,OAAOvC,EAAEuC,MAAMjC,GAAGA,CAAC,CAAmC,SAASkC,EAAEzC,GAAG,OAAOA,EAAEsB,QAAQ,CAAC,SAASoB,EAAE1C,EAAEC,GAAG0C,KAAKhB,MAAM3B,EAAE2C,KAAKC,QAAQ3C,CAAC,CAAC,SAAS4C,EAAE7C,EAAEC,GAAG,GAAG,MAAMA,EAAE,OAAOD,EAAE+B,GAAGc,EAAE7C,EAAE+B,GAAG/B,EAAEsC,IAAI,GAAG,KAAK,IAAI,IAAIpC,EAAED,EAAED,EAAE8B,IAAIT,OAAOpB,IAAI,GAAG,OAAOC,EAAEF,EAAE8B,IAAI7B,KAAK,MAAMC,EAAE+B,IAAI,OAAO/B,EAAE+B,IAAI,MAAM,mBAAmBjC,EAAE0B,KAAKmB,EAAE7C,GAAG,IAAI,CAAC,SAAS8C,EAAE9C,GAAG,IAAIC,EAAEC,EAAE,GAAG,OAAOF,EAAEA,EAAE+B,KAAK,MAAM/B,EAAEmC,IAAI,CAAC,IAAInC,EAAEiC,IAAIjC,EAAEmC,IAAIY,KAAK,KAAK9C,EAAE,EAAEA,EAAED,EAAE8B,IAAIT,OAAOpB,IAAI,GAAG,OAAOC,EAAEF,EAAE8B,IAAI7B,KAAK,MAAMC,EAAE+B,IAAI,CAACjC,EAAEiC,IAAIjC,EAAEmC,IAAIY,KAAK7C,EAAE+B,IAAI,KAAK,CAAC,OAAOa,EAAE9C,EAAE,CAAC,CAAC,SAASgD,EAAEhD,KAAKA,EAAEkC,MAAMlC,EAAEkC,KAAI,IAAK9B,EAAE6C,KAAKjD,KAAKkD,EAAEC,OAAO9C,IAAIJ,EAAEmD,sBAAsB/C,EAAEJ,EAAEmD,oBAAoB9C,GAAG4C,EAAE,CAAC,SAASA,IAAI,IAAIlD,EAAEE,EAAEC,EAAEE,EAAEC,EAAEE,EAAEC,EAAEC,EAAEC,EAAE,IAAIP,EAAEiD,KAAK9C,GAAGP,EAAEI,EAAEkD,SAAStD,EAAEkC,MAAMhC,EAAEE,EAAEiB,OAAOhB,OAAE,EAAOG,GAAGF,GAAGH,EAAEH,GAAGqC,KAAKJ,IAAIvB,EAAE,GAAGC,EAAE,IAAIF,EAAEN,EAAEoD,QAAQlD,EAAEU,EAAE,CAAA,EAAGT,IAAI+B,IAAI/B,EAAE+B,IAAI,EAAEpC,EAAEuC,OAAOvC,EAAEuC,MAAMnC,GAAGmD,EAAE/C,EAAEJ,EAAEC,EAAEH,EAAEsD,SAAI,IAAShD,EAAEiD,gBAAgB,GAAGpD,EAAEiC,IAAI,CAAC/B,GAAG,KAAKE,EAAE,MAAMF,EAAEqC,EAAEvC,GAAGE,KAAK,GAAGF,EAAEiC,KAAK5B,GAAGN,EAAE0B,GAAGD,IAAIzB,EAAEiC,KAAKjC,EAAEsD,EAAEjD,EAAEL,EAAEM,GAAGN,EAAE4B,KAAKzB,GAAGsC,EAAEzC,IAAID,EAAEiB,OAAOnB,GAAGE,EAAEiD,KAAK9C,IAAI2C,EAAEC,IAAI,CAAC,CAAC,SAASS,EAAE5D,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEG,EAAEC,GAAG,IAAIG,EAAEC,EAAEG,EAAEM,EAAEoC,EAAEpB,EAAEtC,GAAGA,EAAE2B,KAAKpB,EAAEgC,EAAEzC,EAAEoB,OAAO,IAAInB,EAAEgC,IAAI1B,EAA0Z,SAAWR,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEP,EAAEoB,OAAOZ,EAAEP,EAAEmB,OAAOX,EAAED,EAAEE,EAAE,EAAE,IAAIX,EAAE8B,IAAI,GAAG3B,EAAE,EAAEA,EAAEK,EAAEL,IAAI,OAAOC,EAAEJ,EAAE8B,IAAI3B,GAAG,OAAOC,EAAEH,EAAEE,KAAK,kBAAkBC,GAAG,mBAAmBA,EAAE,KAAK,iBAAiBA,GAAG,iBAAiBA,GAAG,iBAAiBA,GAAGA,EAAEgC,aAAa0B,OAAOrC,EAAE,KAAKrB,EAAE,KAAK,KAAKA,GAAGQ,EAAER,GAAGqB,EAAEgB,EAAE,CAACnB,SAASlB,GAAG,KAAK,KAAK,WAAM,IAASA,EAAEgC,aAAahC,EAAE4B,IAAI,EAAEP,EAAErB,EAAEsB,KAAKtB,EAAEuB,MAAMvB,EAAEwB,IAAIxB,EAAEyB,IAAIzB,EAAEyB,IAAI,KAAKzB,EAAEiC,KAAKjC,IAAIA,EAAE2B,GAAG/B,EAAEI,EAAE4B,IAAIhC,EAAEgC,IAAI,EAAEzB,EAAEwD,EAAE3D,EAAEF,EAAEI,EAAEH,EAAEQ,EAAED,GAAGN,EAAEkC,IAAI/B,EAAEF,EAAE,MAAM,IAAIE,IAAIG,KAAKL,EAAEH,EAAEK,MAAMF,EAAEkC,KAAK,SAAS,MAAMlC,GAAG,OAAOA,EAAEgC,MAAM,GAAG9B,GAAGI,IAAI,mBAAmBP,EAAEsB,OAAOtB,EAAEmC,KAAK,QAAQhC,IAAID,IAAIC,IAAID,EAAE,EAAEK,IAAIJ,EAAED,EAAEI,EAAEF,EAAEF,EAAEK,GAAGJ,EAAED,EAAEK,IAAIA,EAAEJ,EAAED,GAAGC,GAAGD,EAAE,EAAEC,EAAED,EAAE,EAAEC,IAAIJ,EAAEQ,IAAIP,EAAEmC,KAAK,UAAUlC,EAAEH,EAAEC,KAAK,MAAME,EAAEuB,KAAKvB,EAAE4B,MAAM5B,EAAE4B,KAAKjC,EAAEkC,MAAMlC,EAAEkC,IAAIW,EAAExC,IAAI2D,EAAE3D,EAAEA,GAAE,GAAIH,EAAEC,GAAG,KAAKO,KAAK,GAAGA,EAAE,IAAIP,EAAE,EAAEA,EAAEM,EAAEN,IAAI,OAAOE,EAAEH,EAAEC,KAAK,IAAI,OAAOE,EAAEkC,OAAOlC,EAAE4B,KAAKjC,EAAEkC,MAAMlC,EAAEkC,IAAIW,EAAExC,IAAI2D,EAAE3D,EAAEA,GAAG,CAAhtC4D,CAAE/D,EAAED,EAAEwC,GAAGjC,EAAEN,EAAEgC,IAAInB,EAAE,EAAEA,EAAE2B,EAAE3B,IAAI,OAAOI,EAAEjB,EAAE4B,IAAIf,KAAK,kBAAkBI,GAAG,mBAAmBA,IAAIH,GAAG,IAAIG,EAAEmB,IAAI7B,EAAEgC,EAAEtB,EAAEmB,MAAM7B,EAAEU,EAAEmB,IAAIvB,EAAEyC,EAAExD,EAAEmB,EAAEH,EAAEZ,EAAEC,EAAEC,EAAEC,EAAEC,EAAEG,EAAEC,GAAGa,EAAEN,EAAEc,IAAId,EAAEU,KAAKb,EAAEa,KAAKV,EAAEU,MAAMb,EAAEa,KAAKqC,EAAElD,EAAEa,IAAI,KAAKV,GAAGP,EAAEqC,KAAK9B,EAAEU,IAAIV,EAAEgB,KAAKV,EAAEN,IAAI,MAAM0C,GAAG,MAAMpC,IAAIoC,EAAEpC,GAAG,MAAMN,EAAEoB,KAAKvB,EAAEc,MAAMX,EAAEW,IAAItB,EAAE2D,EAAEhD,EAAEX,EAAER,GAAG,mBAAmBmB,EAAEO,WAAM,IAASP,EAAEe,IAAI1B,EAAEW,EAAEe,IAAIT,IAAIjB,EAAEiB,EAAE2C,aAAajD,EAAEe,SAAI,EAAOf,EAAEoB,MAAM,QAAQrC,EAAEgC,IAAI1B,EAAEN,EAAE+B,IAAI4B,CAAC,CAA0zB,SAASM,EAAEnE,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAE,GAAG,mBAAmBJ,EAAE0B,KAAK,CAAC,IAAIvB,EAAEH,EAAE8B,IAAI1B,EAAE,EAAED,GAAGC,EAAED,EAAEkB,OAAOjB,IAAID,EAAEC,KAAKD,EAAEC,GAAG2B,GAAG/B,EAAEC,EAAEkE,EAAEhE,EAAEC,GAAGH,EAAEC,IAAI,OAAOD,CAAC,CAAC,OAAOD,EAAEiC,KAAKhC,IAAIC,EAAEmE,aAAarE,EAAEiC,IAAIhC,GAAG,MAAMA,EAAED,EAAEiC,KAAKhC,GAAGA,EAAEmE,WAAW,CAA6G,SAASL,EAAE/D,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAEJ,EAAE4B,IAAIvB,EAAEL,EAAE0B,KAAKpB,EAAEJ,EAAE,EAAEK,EAAEL,EAAE,EAAEM,EAAEP,EAAEC,GAAG,GAAG,OAAOM,GAAGA,GAAGJ,GAAGI,EAAEoB,KAAKvB,IAAIG,EAAEkB,KAAK,OAAOxB,EAAE,GAAGC,GAAG,MAAMK,GAAG,IAAI,OAAOA,EAAE+B,KAAK,EAAE,GAAG,KAAKjC,GAAG,GAAGC,EAAEN,EAAEoB,QAAQ,CAAC,GAAGf,GAAG,EAAE,CAAC,IAAIE,EAAEP,EAAEK,KAAK,IAAI,OAAOE,EAAE+B,MAAMnC,GAAGI,EAAEoB,KAAKvB,IAAIG,EAAEkB,KAAK,OAAOpB,EAAEA,GAAG,CAAC,GAAGC,EAAEN,EAAEoB,OAAO,CAAC,IAAIb,EAAEP,EAAEM,KAAK,IAAI,OAAOC,EAAE+B,MAAMnC,GAAGI,EAAEoB,KAAKvB,IAAIG,EAAEkB,KAAK,OAAOnB,EAAEA,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS+D,EAAEtE,EAAEC,EAAEC,GAAG,MAAMD,EAAE,GAAGD,EAAEuE,YAAYtE,EAAE,MAAMC,EAAE,GAAGA,GAAGF,EAAEC,GAAG,MAAMC,EAAE,GAAG,iBAAiBA,GAAGS,EAAE6D,KAAKvE,GAAGC,EAAEA,EAAE,IAAI,CAAC,SAASuE,EAAEzE,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAEL,EAAE,GAAG,UAAUC,EAAE,GAAG,iBAAiBC,EAAEF,EAAE0E,MAAMC,QAAQzE,MAAM,CAAC,GAAG,iBAAiBC,IAAIH,EAAE0E,MAAMC,QAAQxE,EAAE,IAAIA,EAAE,IAAIF,KAAKE,EAAED,GAAGD,KAAKC,GAAGoE,EAAEtE,EAAE0E,MAAMzE,EAAE,IAAI,GAAGC,EAAE,IAAID,KAAKC,EAAEC,GAAGD,EAAED,KAAKE,EAAEF,IAAIqE,EAAEtE,EAAE0E,MAAMzE,EAAEC,EAAED,GAAG,MAAM,GAAG,MAAMA,EAAE,IAAI,MAAMA,EAAE,GAAGI,EAAEJ,KAAKA,EAAEA,EAAE2E,QAAQ,6BAA6B,OAAO3E,EAAEA,EAAE4E,gBAAgB7E,EAAEC,EAAE4E,cAAcC,MAAM,GAAG7E,EAAE6E,MAAM,GAAG9E,EAAEC,IAAID,EAAEC,EAAE,CAAE,GAAED,EAAEC,EAAEA,EAAEI,GAAGH,EAAEA,EAAEC,EAAED,EAAEA,EAAEC,EAAED,GAAGA,EAAEA,EAAE6E,KAAKC,MAAMhF,EAAEiF,iBAAiBhF,EAAEI,EAAE6E,EAAEC,EAAE9E,IAAIL,EAAEoF,oBAAoBnF,EAAEI,EAAE6E,EAAEC,EAAE9E,OAAO,CAAC,GAAGD,EAAEH,EAAEA,EAAE2E,QAAQ,cAAc,KAAKA,QAAQ,SAAS,UAAU,GAAG,UAAU3E,GAAG,WAAWA,GAAG,SAASA,GAAG,SAASA,GAAG,SAASA,GAAG,aAAaA,GAAG,aAAaA,GAAG,YAAYA,GAAG,YAAYA,GAAG,SAASA,GAAGA,KAAKD,EAAE,IAAIA,EAAEC,GAAG,MAAMC,EAAE,GAAGA,EAAE,MAAMF,CAAC,CAAC,MAAMA,GAAE,CAAE,mBAAmBE,IAAI,MAAMA,IAAG,IAAKA,GAAG,MAAMD,EAAE,GAAGD,EAAEqF,gBAAgBpF,GAAGD,EAAEsF,aAAarF,EAAEC,GAAG,CAAC,CAAC,SAASiF,EAAEnF,GAAG,IAAIE,EAAEyC,KAAK1C,EAAED,EAAE0B,MAAK,GAAI,GAAG1B,EAAEG,GAAG,GAAGH,EAAEG,GAAGD,EAAEA,EAAE,YAAYF,EAAEG,EAAE4E,KAAKC,MAAM,OAAO9E,EAAED,EAAEsF,MAAMtF,EAAEsF,MAAMvF,GAAGA,EAAE,CAAC,SAASkF,EAAElF,GAAG,OAAO2C,KAAK1C,EAAED,EAAE0B,MAAK,GAAIzB,EAAEsF,MAAMtF,EAAEsF,MAAMvF,GAAGA,EAAE,CAAC,SAASwD,EAAExD,EAAEE,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAEK,EAAEG,EAAEM,EAAEoC,EAAEhB,EAAEC,EAAEE,EAAEE,EAAEe,EAAEE,EAAEqB,EAAEzB,EAAEO,EAAEG,EAAEU,EAAEjF,EAAEwB,KAAK,QAAG,IAASxB,EAAEkC,YAAY,OAAO,KAAK,IAAIjC,EAAEoC,MAAM9B,KAAK,GAAGN,EAAEoC,KAAKjC,EAAE,CAACE,EAAEN,EAAE+B,IAAI9B,EAAE8B,OAAOtB,EAAEV,EAAE+B,MAAMrB,EAAET,GAAGF,EAAE,GAAG,mBAAmBmF,EAAE,IAAI,GAAGnC,EAAE9C,EAAEyB,MAAMuB,GAAGvC,EAAEwE,EAAEM,cAAcrF,EAAEO,EAAEwB,KAAK8B,EAAEtD,EAAEuC,EAAEA,EAAEvB,MAAM+D,MAAM/E,EAAEoB,GAAG3B,EAAED,EAAEgC,IAAIW,GAAG9B,EAAEd,EAAEiC,IAAIhC,EAAEgC,KAAKJ,GAAGf,EAAE2E,KAAK,cAAcR,GAAGA,EAAES,UAAUC,OAAO3F,EAAEiC,IAAInB,EAAE,IAAImE,EAAEnC,EAAEiB,IAAI/D,EAAEiC,IAAInB,EAAE,IAAI0B,EAAEM,EAAEiB,GAAGjD,EAAEoB,YAAY+C,EAAEnE,EAAE6E,OAAOC,GAAG5C,GAAGA,EAAE6C,IAAI/E,GAAGA,EAAEW,MAAMqB,EAAEhC,EAAEgF,QAAQhF,EAAEgF,MAAM,CAAE,GAAEhF,EAAE4B,QAAQqB,EAAEjD,EAAEyC,IAAIrD,EAAEe,EAAEH,EAAEkB,KAAI,EAAGlB,EAAEiF,IAAI,GAAGjF,EAAEkF,IAAI,IAAI,MAAMlF,EAAEmF,MAAMnF,EAAEmF,IAAInF,EAAEgF,OAAO,MAAMb,EAAEiB,2BAA2BpF,EAAEmF,KAAKnF,EAAEgF,QAAQhF,EAAEmF,IAAIpF,EAAE,CAAE,EAACC,EAAEmF,MAAMpF,EAAEC,EAAEmF,IAAIhB,EAAEiB,yBAAyBpD,EAAEhC,EAAEmF,OAAO1E,EAAET,EAAEW,MAAMkC,EAAE7C,EAAEgF,MAAMhF,EAAEqB,IAAInC,EAAEiB,EAAE,MAAMgE,EAAEiB,0BAA0B,MAAMpF,EAAEqF,oBAAoBrF,EAAEqF,qBAAqB,MAAMrF,EAAEsF,mBAAmBtF,EAAEiF,IAAIhD,KAAKjC,EAAEsF,uBAAuB,CAAC,GAAG,MAAMnB,EAAEiB,0BAA0BpD,IAAIvB,GAAG,MAAMT,EAAEuF,2BAA2BvF,EAAEuF,0BAA0BvD,EAAEiB,IAAIjD,EAAEiB,MAAM,MAAMjB,EAAEwF,wBAAuB,IAAKxF,EAAEwF,sBAAsBxD,EAAEhC,EAAEmF,IAAIlC,IAAI/D,EAAEmC,MAAMlC,EAAEkC,KAAK,CAAC,IAAInC,EAAEmC,MAAMlC,EAAEkC,MAAMrB,EAAEW,MAAMqB,EAAEhC,EAAEgF,MAAMhF,EAAEmF,IAAInF,EAAEkB,KAAI,GAAIhC,EAAE+B,IAAI9B,EAAE8B,IAAI/B,EAAE4B,IAAI3B,EAAE2B,IAAI5B,EAAE4B,IAAI2E,QAAQ,SAASzG,GAAGA,IAAIA,EAAE+B,GAAG7B,EAAE,GAAGiE,EAAE,EAAEA,EAAEnD,EAAEkF,IAAI7E,OAAO8C,IAAInD,EAAEiF,IAAIhD,KAAKjC,EAAEkF,IAAI/B,IAAInD,EAAEkF,IAAI,GAAGlF,EAAEiF,IAAI5E,QAAQd,EAAE0C,KAAKjC,GAAG,MAAMhB,CAAC,CAAC,MAAMgB,EAAE0F,qBAAqB1F,EAAE0F,oBAAoB1D,EAAEhC,EAAEmF,IAAIlC,GAAG,MAAMjD,EAAE2F,oBAAoB3F,EAAEiF,IAAIhD,KAAK,WAAWjC,EAAE2F,mBAAmBlF,EAAEoC,EAAEhB,EAAE,EAAE,CAAC,GAAG7B,EAAE4B,QAAQqB,EAAEjD,EAAEW,MAAMqB,EAAEhC,EAAEuC,IAAIvD,EAAEgB,EAAEiB,KAAI,EAAGuD,EAAEvF,EAAEkD,IAAIY,EAAE,EAAE,cAAcoB,GAAGA,EAAES,UAAUC,OAAO,CAAC,IAAI7E,EAAEgF,MAAMhF,EAAEmF,IAAInF,EAAEkB,KAAI,EAAGsD,GAAGA,EAAEtF,GAAGS,EAAEK,EAAE6E,OAAO7E,EAAEW,MAAMX,EAAEgF,MAAMhF,EAAE4B,SAAS0B,EAAE,EAAEA,EAAEtD,EAAEkF,IAAI7E,OAAOiD,IAAItD,EAAEiF,IAAIhD,KAAKjC,EAAEkF,IAAI5B,IAAItD,EAAEkF,IAAI,EAAE,MAAM,GAAGlF,EAAEkB,KAAI,EAAGsD,GAAGA,EAAEtF,GAAGS,EAAEK,EAAE6E,OAAO7E,EAAEW,MAAMX,EAAEgF,MAAMhF,EAAE4B,SAAS5B,EAAEgF,MAAMhF,EAAEmF,UAAUnF,EAAEkB,OAAO6B,EAAE,IAAI/C,EAAEgF,MAAMhF,EAAEmF,IAAI,MAAMnF,EAAE4F,kBAAkBxG,EAAEW,EAAEA,EAAE,CAAA,EAAGX,GAAGY,EAAE4F,oBAAoBzF,GAAG,MAAMH,EAAE6F,0BAA0BhE,EAAE7B,EAAE6F,wBAAwBpF,EAAEoC,IAAID,EAAE5D,EAAEY,EAAE6D,EAAE,MAAM9D,GAAGA,EAAEe,OAAOe,GAAG,MAAM9B,EAAEiB,IAAIjB,EAAEgB,MAAML,SAASX,GAAG8D,EAAE,CAACA,GAAGvE,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,GAAGM,EAAE+B,KAAK7C,EAAE+B,IAAI/B,EAAEqC,MAAM,IAAIvB,EAAEiF,IAAI5E,QAAQd,EAAE0C,KAAKjC,GAAG8B,IAAI9B,EAAE2E,IAAI3E,EAAEe,GAAG,KAAK,CAAC,MAAM/B,GAAGE,EAAEmC,IAAI,KAAK5B,GAAG,MAAMH,GAAGJ,EAAE+B,IAAIzB,EAAEN,EAAEqC,KAAK9B,EAAE,IAAI,GAAGH,EAAEA,EAAEwG,QAAQtG,IAAI,OAAON,EAAE+B,IAAI9B,EAAE8B,IAAI/B,EAAE4B,IAAI3B,EAAE2B,KAAK7B,EAAEgC,IAAIjC,EAAEE,EAAEC,EAAE,MAAM,MAAMG,GAAGJ,EAAEmC,MAAMlC,EAAEkC,KAAKnC,EAAE4B,IAAI3B,EAAE2B,IAAI5B,EAAE+B,IAAI9B,EAAE8B,KAAK/B,EAAE+B,IAAI8E,EAAE5G,EAAE8B,IAAI/B,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEE,EAAEC,IAAIC,EAAEV,EAAE+G,SAASrG,EAAET,EAAE,CAAC,SAASyD,EAAE3D,EAAEE,EAAEC,GAAGD,EAAEgC,SAAI,EAAO,IAAI,IAAI9B,EAAE,EAAEA,EAAED,EAAEkB,OAAOjB,IAAI8D,EAAE/D,EAAEC,GAAGD,IAAIC,GAAGD,IAAIC,IAAIH,EAAEkC,KAAKlC,EAAEkC,IAAIjC,EAAEF,GAAGA,EAAEiH,KAAK,SAAS/G,GAAG,IAAIF,EAAEE,EAAE+F,IAAI/F,EAAE+F,IAAI,GAAGjG,EAAEiH,KAAK,SAASjH,GAAGA,EAAEuB,KAAKrB,EAAE,EAAE,CAAC,MAAMF,GAAGC,EAAEgC,IAAIjC,EAAEE,EAAEmC,IAAI,CAAC,EAAE,CAAC,SAAS0E,EAAE9G,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEE,GAAG,IAAIC,EAAEI,EAAEI,EAAEM,EAAEoC,EAAEpB,EAAEC,EAAEI,EAAE3C,EAAEwB,MAAMqB,EAAE9C,EAAEyB,MAAMuB,EAAEhD,EAAEwB,KAAK,GAAG,QAAQwB,IAAI7C,GAAE,GAAI,MAAMC,EAAE,IAAIK,EAAE,EAAEA,EAAEL,EAAEe,OAAOV,IAAI,IAAIkD,EAAEvD,EAAEK,KAAK,iBAAiBkD,KAAKX,IAAIA,EAAEW,EAAEqD,YAAYhE,EAAE,IAAIW,EAAEsD,UAAU,CAAClH,EAAE4D,EAAEvD,EAAEK,GAAG,KAAK,KAAK,CAAC,GAAG,MAAMV,EAAE,CAAC,GAAG,OAAOiD,EAAE,OAAOkE,SAASC,eAAerE,GAAG/C,EAAEI,EAAE+G,SAASE,gBAAgB,6BAA6BpE,GAAGkE,SAASG,cAAcrE,EAAEF,EAAEwE,IAAIxE,GAAG1C,EAAE,KAAKE,GAAE,CAAE,CAAC,GAAG,OAAO0C,EAAEJ,IAAIE,GAAGxC,GAAGP,EAAEwH,OAAOzE,IAAI/C,EAAEwH,KAAKzE,OAAO,CAAC,GAAG1C,EAAEA,GAAGN,EAAEuB,KAAKtB,EAAEyH,YAAY5E,EAAE3C,EAAEwB,OAAOlB,GAAGD,GAAG,MAAMF,EAAE,IAAIwC,EAAE,CAAE,EAACnC,EAAE,EAAEA,EAAEV,EAAE0H,WAAWtG,OAAOV,IAAImC,GAAGe,EAAE5D,EAAE0H,WAAWhH,IAAIiH,MAAM/D,EAAE6B,MAAM,IAAI/E,KAAKmC,EAAEe,EAAEf,EAAEnC,GAAG,YAAYA,IAAI,2BAA2BA,EAAEQ,EAAE0C,EAAE,QAAQlD,GAAGA,KAAKqC,GAAGyB,EAAExE,EAAEU,EAAE,KAAKkD,EAAExD,IAAI,IAAIM,KAAKqC,EAAEa,EAAEb,EAAErC,GAAG,YAAYA,EAAEc,EAAEoC,EAAE,2BAA2BlD,EAAEI,EAAE8C,EAAE,SAASlD,EAAE8B,EAAEoB,EAAE,WAAWlD,EAAE+B,EAAEmB,EAAE,QAAQlD,GAAGH,GAAG,mBAAmBqD,GAAGf,EAAEnC,KAAKkD,GAAGY,EAAExE,EAAEU,EAAEkD,EAAEf,EAAEnC,GAAGN,GAAG,GAAGU,EAAEP,GAAGW,IAAIJ,EAAE8G,SAAS1G,EAAE0G,QAAQ9G,EAAE8G,SAAS5H,EAAE6H,aAAa7H,EAAE6H,UAAU/G,EAAE8G,QAAQ3H,EAAE4B,IAAI,QAAQ,GAAGX,IAAIlB,EAAE6H,UAAU,IAAIlE,EAAE3D,EAAEW,EAAEa,GAAGA,EAAE,CAACA,GAAGvB,EAAEC,EAAEC,EAAEC,GAAG,kBAAkB6C,EAAE5C,EAAEC,EAAED,EAAEA,EAAE,GAAGH,EAAE2B,KAAKe,EAAE1C,EAAE,GAAGK,EAAEE,GAAG,MAAMJ,EAAE,IAAIK,EAAEL,EAAEe,OAAOV,KAAK,MAAML,EAAEK,IAAIK,EAAEV,EAAEK,IAAIH,IAAIG,EAAE,aAAQ,IAAS8B,IAAIA,IAAIxC,EAAEU,IAAI,aAAauC,IAAIT,GAAG,WAAWS,GAAGT,IAAIK,EAAEnC,KAAK8D,EAAExE,EAAEU,EAAE8B,EAAEK,EAAEnC,IAAG,GAAIA,EAAE,eAAU,IAAS+B,GAAGA,IAAIzC,EAAEU,IAAI8D,EAAExE,EAAEU,EAAE+B,EAAEI,EAAEnC,IAAG,GAAI,CAAC,OAAOV,CAAC,CAAC,SAASiE,EAAElE,EAAEE,EAAEC,GAAG,IAAI,mBAAmBH,EAAEA,EAAEE,GAAGF,EAAE+H,QAAQ7H,CAAC,CAAC,MAAMF,GAAGC,EAAEgC,IAAIjC,EAAEG,EAAE,CAAC,CAAC,SAAS6D,EAAEhE,EAAEE,EAAEC,GAAG,IAAIC,EAAEC,EAAE,GAAGJ,EAAE+H,SAAS/H,EAAE+H,QAAQhI,IAAII,EAAEJ,EAAE6B,OAAOzB,EAAE2H,SAAS3H,EAAE2H,UAAU/H,EAAEiC,KAAKiC,EAAE9D,EAAE,KAAKF,IAAI,OAAOE,EAAEJ,EAAEmC,KAAK,CAAC,GAAG/B,EAAE6H,qBAAqB,IAAI7H,EAAE6H,sBAAsB,CAAC,MAAMjI,GAAGC,EAAEgC,IAAIjC,EAAEE,EAAE,CAACE,EAAE2C,KAAK3C,EAAEmD,IAAI,KAAKvD,EAAEmC,SAAI,CAAM,CAAC,GAAG/B,EAAEJ,EAAE8B,IAAI,IAAIzB,EAAE,EAAEA,EAAED,EAAEiB,OAAOhB,IAAID,EAAEC,IAAI2D,EAAE5D,EAAEC,GAAGH,EAAEC,GAAG,mBAAmBH,EAAE0B,MAAMvB,GAAG,MAAMH,EAAEiC,KAAKjB,EAAEhB,EAAEiC,KAAKjC,EAAE+B,GAAG/B,EAAEiC,IAAIjC,EAAEkC,SAAI,CAAM,CAAC,SAAS4D,EAAE9F,EAAEC,EAAEC,GAAG,OAAOyC,KAAKP,YAAYpC,EAAEE,EAAE,CAAC,SAASgI,EAAEhI,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAEC,EAAEP,EAAE8B,IAAI9B,EAAE8B,GAAG7B,EAAEC,GAAGG,GAAGD,EAAE,mBAAmBD,GAAG,KAAKA,GAAGA,EAAE0B,KAAK3B,EAAE2B,IAAIvB,EAAE,GAAGC,EAAE,GAAGgD,EAAErD,EAAED,IAAIG,GAAGD,GAAGD,GAAG2B,IAAIX,EAAEsB,EAAE,KAAK,CAACvC,IAAII,GAAGG,EAAEA,OAAE,IAASN,EAAEuD,iBAAiBrD,GAAGD,EAAE,CAACA,GAAGE,EAAE,KAAKH,EAAEgI,WAAWnI,EAAEuB,KAAKpB,EAAEuH,YAAY,KAAKnH,GAAGF,GAAGD,EAAEA,EAAEE,EAAEA,EAAE2B,IAAI9B,EAAEgI,WAAW9H,EAAEG,GAAGmD,EAAEpD,EAAEL,EAAEM,EAAE,UCE16R4H,IACd,MAAO,uCAAuCxD,QAAQ,QAAS,SAAUnE,GACvE,IAAMH,EAAqB,GAAhB+H,KAAKC,SAAiB,EAEjC,OADW,KAAL7H,EAAWH,EAAS,EAAJA,EAAW,GACxBiI,SAAS,GACpB,EACF,CDR2vTvI,EAAEU,EAAEoE,MAAM7E,EAAE,CAACgC,IAAI,SAASjC,EAAEC,EAAEC,EAAEC,GAAG,IAAI,IAAIC,EAAEC,EAAEC,EAAEL,EAAEA,EAAE8B,IAAI,IAAI3B,EAAEH,EAAEkC,OAAO/B,EAAE2B,GAAG,IAAI,IAAI1B,EAAED,EAAEgC,cAAc,MAAM/B,EAAEmI,2BAA2BpI,EAAEqI,SAASpI,EAAEmI,yBAAyBxI,IAAIM,EAAEF,EAAE8B,KAAK,MAAM9B,EAAEsI,oBAAoBtI,EAAEsI,kBAAkB1I,EAAEG,GAAG,CAAA,GAAIG,EAAEF,EAAE8B,KAAK5B,EAAE,OAAOF,EAAEuF,IAAIvF,CAAC,CAAC,MAAMH,GAAGD,EAAEC,CAAC,CAAC,MAAMD,CAAC,GAAGE,EAAE,EAAEC,EAAE,SAASH,GAAG,OAAO,MAAMA,GAAG,MAAMA,EAAEoC,WAAW,EAAEM,EAAEkD,UAAU6C,SAAS,SAASzI,EAAEC,GAAG,IAAIC,EAAEA,EAAE,MAAMyC,KAAKwD,KAAKxD,KAAKwD,MAAMxD,KAAKqD,MAAMrD,KAAKwD,IAAIxD,KAAKwD,IAAIpF,EAAE,CAAE,EAAC4B,KAAKqD,OAAO,mBAAmBhG,IAAIA,EAAEA,EAAEe,EAAE,CAAE,EAACb,GAAGyC,KAAKhB,QAAQ3B,GAAGe,EAAEb,EAAEF,GAAG,MAAMA,GAAG2C,KAAKN,MAAMpC,GAAG0C,KAAKuD,IAAIjD,KAAKhD,GAAG+C,EAAEL,MAAM,EAAED,EAAEkD,UAAU+C,YAAY,SAAS3I,GAAG2C,KAAKN,MAAMM,KAAKV,KAAI,EAAGjC,GAAG2C,KAAKsD,IAAIhD,KAAKjD,GAAGgD,EAAEL,MAAM,EAAED,EAAEkD,UAAUC,OAAOpD,EAAErC,EAAE,GAAGE,EAAE,mBAAmBsI,QAAQA,QAAQhD,UAAUiD,KAAKC,KAAKF,QAAQG,WAAWC,WAAWzI,EAAE,SAASP,EAAEC,GAAG,OAAOD,EAAEqC,IAAIL,IAAI/B,EAAEoC,IAAIL,GAAG,EAAEkB,EAAEC,IAAI,EAAE3C,EAAE,EEA5gV,IAEvCyI,0BAGJ,SAAAA,EAAYC,GAAOvG,KAFFwG,SAGf,EAAAxG,KAAKwG,IAAMD,GAAMd,GACnB,QAACgB,EAAAH,EAAA,CAAA,CAAArH,IAAAyH,KAAAA,IAED,WACE,OAAO1G,KAAKwG,GACd,KAACF,CAAA,ICJa,SAAAK,EAAY3H,GAC1B,OAAOf,EAAEe,EAAM4H,eAAiB,OAAQ,CACtCC,wBAAyB,CAAE3B,OAAQlG,EAAM8H,UAE7C,CCHgB,SAAAC,EAAKD,EAAiBF,GACpC,OAAO3I,EAAE0I,EAAa,CAAEG,QAASA,EAASF,cAAeA,GAC3D,CCLMI,ICCMC,EDDND,wBAAKE,GAIT,SAAAF,EAAYlC,GAAWqC,IAAAA,EAGH,OAFlBA,EAAAD,EAAAtI,KAAAoB,OAAOA,MAHF8E,UAAI,EAKTqC,EAAKC,OAAOtC,GAAMqC,CACpB,CARSE,EAAAL,EAAAE,GAQR,IAAAI,EAAAN,EAAA/D,UAkBA,OAlBAqE,EAEOC,KAAA,SAAKzC,GACX,OAAIA,aAAgB6B,YACXI,EAAKjC,EAAK0C,WAGZ1C,CACT,EAACwC,EAOMF,OAAA,SAAOtC,GAEZ,OADA9E,KAAK8E,KAAO9E,KAAKuH,KAAKzC,GACf9E,IACT,EAACgH,CAAA,EA1BgBV,GEDbmB,gBAAIP,SAAAA,GAGR,SAAAO,EAAYC,GAAc,IAAAP,EAGC,OAFzBA,EAAAD,EAAAtI,kBAHM+I,YAKNR,EAAAA,EAAKO,MAAQA,GAAS,GAAGP,CAC3B,CAPQE,EAAAI,EAAAP,GAOP,IAAAI,EAAAG,EAAAxE,UA+BAwE,OA/BAH,EAEMM,KAAA,SAAKC,GACV,YAAYF,OAAOE,EACrB,EAACP,EAUMQ,QAAA,WACL,OAAO9H,KAAK0H,MAAMK,IAAI,SAACH,UAASA,EAAK9C,IAAI,EAC3C,EAAC2C,EASMO,UAAP,SAAiBN,GACf,WAAWD,EAAIC,EAAMK,IAAI,SAACH,GAAS,OAAA,IAAIZ,EAAKY,EAAK9C,KAAK,GACxD,EAAC2B,EAAAgB,EAAA,CAAA,CAAAxI,IAAAyH,QAAAA,IArBD,WACE,YAAYiB,MACd,EAACM,IAED,SAAiBP,GACf1H,KAAK2H,OAASD,CAChB,IAACzI,IAAA,SAAAyH,IAiBD,WACE,OAAW1G,KAAC0H,MAAMhJ,MACpB,KAAC+I,CAAA,CAtCOP,CAAQZ,GCEZ4B,gBAAQhB,SAAAA,GAIZ,SAAAgB,EAAYC,GAAkBhB,IAAAA,EAS3B,OARDA,EAAAD,EAAAtI,KAAAoB,OAAOA,MAJDoI,WAAKjB,EAAAA,EACLkB,aAKN,EACElB,EAAKgB,KADHA,aAAgBjK,MACNiK,EACHA,aAAgBV,GACb,CAACU,GAED,GACbhB,CACH,CAiBC,OA/BWE,EAAAa,EAAAhB,GAcXgB,EAAAjF,UAmBM6E,QAAA,WACL,YAAYK,KAAKJ,IAAI,SAACO,GAAG,OAAKA,EAAIR,SAAS,EAC7C,EAACI,EASMK,SAAP,SAAgBJ,GACd,WAAWD,EAAQC,EAAKJ,IAAI,SAACO,GAAQ,OAAAb,GAAIO,UAAUM,EAAIZ,MAAM,GAC/D,EAACQ,EASMM,UAAP,SACE1D,GAIA,OAAW,IAAAoD,GAFXpD,EC9DY,SAAcA,GAC5B,OAAIA,EAAK,IAAQA,EAAK,aAAc5G,MAI7B4G,EAHE,CAACA,EAIZ,CDwDW2D,CAAW3D,IAGXiD,IAAI,SAACO,GAAG,OAAS,IAAAb,GAAIa,EAAIP,IAAI,SAACH,GAAI,WAASZ,EAAKY,EAAK,GAAE,GAEhE,EAACnB,EAAAyB,EAAAjJ,CAAAA,CAAAA,IAAAyH,OAAAA,IA/CD,WACE,OAAO1G,KAAKoI,KACd,EAACH,IAED,SAASE,GACPnI,KAAKoI,MAAQD,CACf,GAAC,CAAAlJ,IAAA,SAAAyH,IAED,WACE,OAAW1G,KAACqI,SAAWrI,KAAKmI,KAAKzJ,MACnC,EAACuJ,IAGD,SAAWS,GACT1I,KAAKqI,QAAUK,CACjB,KAACR,CAAA,CA/BWhB,CAAQZ,GE8BTqC,gBAAYA,WAAAA,SAAAA,IACfC,KAAAA,eAAStB,CAAAA,CAAAA,IAAAA,EAAAqB,EAAA1F,iBAAAqE,EAKTuB,KAAA,SAAKjG,GACN5C,KAAK4I,YACR5I,KAAK4I,UAAY,CAClB,GAEGhG,IAAU5C,KAAK4I,UAAUhG,KAC3B5C,KAAK4I,UAAUhG,GAAS,GAE5B,EAAC0E,EAEDwB,UAAA,WACE,OAAW9I,KAAC4I,SACd,EAACtB,EAEDyB,GAAA,SACEnG,EACAoG,GAIA,OAFAhJ,KAAK6I,KAAKjG,GACV5C,KAAK4I,UAAUhG,GAAiBtC,KAAK0I,GAEvChJ,IAAA,EAACsH,EAED2B,IAAA,SACErG,EACAoG,GAEA,IAAME,EAAYtG,EAIlB,OAFA5C,KAAK6I,OAEA7I,KAAK4I,UAAUM,IAAmD,IAArClJ,KAAK4I,UAAUM,GAAWxK,QAK5DsB,KAAK4I,UAAUM,GAAalJ,KAAK4I,UAAUM,GAAWC,OACpD,SAACpG,GAAK,OAAKA,GAASiG,CAAQ,GAGvBhJ,MAPEA,IAQX,EAACsH,EAED8B,KAAA,SACExG,GACyC,IAAAyG,EAAA5K,UAEnCyK,EAAYtG,EAIlB,OAFA5C,KAAK6I,KAAKK,GAENlJ,KAAK4I,UAAUM,GAAWxK,OAAS,IACrCsB,KAAK4I,UAAUM,GAAWpF,QAAQ,SAACf,GAAK,OAAKA,EAAKuG,WAAAnH,EAAAA,GAAAA,MAAAvD,KAAAyK,EAAQ,GAAC,IACpD,EAIX,EAACV,CAAA,CA/DsBA,GC9BT,SAAAY,GAAgBC,EAASC,GAEvC,UAAWD,UAAgBC,EACzB,OACD,EAED,GAAa,OAATD,GAA0B,OAATC,EACnB,OACD,EAED,GAAoB,iBAATD,EAGT,OAAOA,IAASC,EAGlB,GAAIvL,MAAMC,QAAQqL,IAAStL,MAAMC,QAAQsL,GAAO,CAC9C,GAAID,EAAK9K,SAAW+K,EAAK/K,OACvB,SAEF,IAAK,IAAIjB,EAAI,EAAGA,EAAI+L,EAAK9K,OAAQjB,IAC/B,IAAK8L,GAAUC,EAAK/L,GAAIgM,EAAKhM,IAC3B,OACD,EAEH,QACD,CAED,IAAMiM,EAAQC,OAAOC,KAAKJ,GACpBK,EAAQF,OAAOC,KAAKH,GAC1B,GAAIC,EAAMhL,SAAWmL,EAAMnL,OACzB,OACD,EACD,IAAAoL,IAAAA,IAAAC,EAAkBL,EAAKI,EAAAC,EAAArL,OAAAoL,IAAE,CAApB,IAAM7K,EAAG8K,EAAAD,GAEZ,IAAKL,EAAKO,eAAe/K,KAASsK,GAAUC,EAAKvK,GAAMwK,EAAKxK,IAC1D,OACD,CACF,CACD,OACF,CAAA,ELxCA,SAAYgI,GACVA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,aAAA,GAAA,eACAA,EAAAA,EAAA,WAAA,GAAA,aACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,MAAA,GAAA,OACD,CAVD,CAAYA,IAAAA,EAUX,CAAA,IAWqB,IAAAgD,gBAGpBC,SAAAA,GAQA,SAAAD,EAAYjL,GAAkB,IAAAmI,EAMI,OALhCA,EAAA+C,EAAAtL,kBARc2H,QAAEY,EAAAA,EACVgD,YAAM,EASZhD,EAAKgD,OAAS,CAAO,EACrBhD,EAAKZ,GAAKd,IAENzG,GAAOmI,EAAKiD,SAASpL,GAAOmI,CAClC,CAfAE,EAAA4C,EAAAC,GAeC,IAAA5C,EAAA2C,EAAAhH,UAmCAgH,OAnCA3C,EAQD+C,QAAA,WAAW,IAAAC,EAAInI,GAAAA,MAAAvD,KAAAH,WACTuB,KAAKuK,yBAAyBC,UAChCxK,KAAKuK,cAAajB,MAAlBtJ,KAAsBsK,GAGxBtK,KAAKoJ,KAAIE,MAATtJ,MAAU,iBAAeyK,OAAKH,IAC9B,IAAMI,EAAS1K,KAAK2K,SAAQrB,MAAbtJ,KAAiBsK,GAEhC,OADAtK,KAAKoJ,KAAIE,MAATtJ,KAAU,CAAA,gBAAcyK,OAAKH,IACtBI,CACT,EAACpD,EAED8C,SAAA,SAASpL,GACP,IAAM4L,EAAYC,EACb,CAAA,EAAA7K,KAAKmK,OACLnL,GAQL,OALKuK,GAAUqB,EAAc5K,KAAKmK,UAChCnK,KAAKmK,OAASS,EACd5K,KAAKoJ,KAAK,eAAgBpJ,OAGrBA,IACT,EAACyG,EAAAwD,EAAA,CAAA,CAAAhL,IAAAyH,QAAAA,IAED,WACE,YAAYyD,MACd,KAACF,CAAA,CAlDDC,CAAQvB,IMdJmC,gBAAmBC,SAAAA,GAAAD,SAAAA,IAAAC,OAAAA,EAAAzB,MAAA7K,KAAAA,YAAA6I,IAAAA,CAMtB,OANsBD,EAAAyD,EAAAC,GAAAD,EAAA7H,UAQvB0H,SAAA,SAAS7F,GACP,OAAI9E,KAAKhB,MAAMgM,SCnBjBA,EDqBM7J,OAAOnB,KAAKhB,MAAMgM,SAASC,OCpBjCC,EDqBMlL,KAAKhB,MAAMkM,QCpBjBC,EDqBMnL,KAAKhB,MAAMmM,oBCpBjBC,EDqBMtG,ECpBNuG,EDqBMrL,KAAKhB,MAAMqM,SClBjBL,EAAUA,EAAQ/I,QAAQ,2BAA4B,YAE3CiG,GACTkD,EAAQjD,KAAKgB,OAAO,SAACb,EAAKgD,GACxB,OAAAhD,EAAIZ,MAAMpD,KAAK,SAACsD,EAAM2D,GACpB,IAAK3D,EACH,OACD,EAED,GAAIuD,GAEAD,GACAA,EAAQK,IACsB,iBAAvBL,EAAQK,IAEKL,EAAQK,GACZC,OACd,OAAO,EAKb,IAAI1G,EAAO,GAEX,GAAwB,mBAAbuG,EACTvG,EAAOuG,EAASzD,EAAK9C,KAAMwG,EAAUC,QAChC,GAAyB,iBAAd3D,EAAK9C,KAAmB,CAExC,IAAM2G,EAAU7D,EAAK9C,KACjB2G,GAAWA,EAAQzM,OAASyM,EAAQzM,MAAM8H,UAE5ChC,EAAO2G,EAAQzM,MAAM8H,QAExB,MAEChC,EAAO3D,OAAOyG,EAAK9C,MAGrB,OAAW,IAAA4G,OAAOV,EAAS,MAAMnJ,KAAKiD,EACxC,EAAE,KDjBGA,EC9BG,IACZkG,EACAE,EACAC,EACAC,EACAC,CD0BA,EAAC5E,EAAAqE,EAAA7L,CAAAA,CAAAA,IAAAyH,OAAAA,IAhBD,WACE,OAAOO,EAAc0E,MACvB,KAACb,CAAA,CANsBC,CAAQd,IEdjB,SAAA2B,KAGd,MAFe,SAEI,GAAAzJ,MAAAvD,KAAAH,WAAKoN,OACtB,SAACC,EAAcC,GAAW,OAAQD,EAAI,IAAIC,CAAG,EAC7C,GAEJ,UAEgBC,KAGd,MAAO,GAAA7J,MAAAvD,KAAAH,WACJsJ,IAAI,SAACxH,GAAC,OAAMA,EAAIA,EAAEqF,WAAa,EAAE,GACjCuD,OAAO,SAAC5I,UAAMA,CAAC,GACfsL,OAAO,SAACD,EAAWE,GAAYF,OAAAA,GAAa,IAAE,IAAIE,CAAI,EAAI,IAC1Db,MACL,CCfsB,ICJezN,GAAEG,GAAEJ,GAAEE,GDarCwO,yBAAyBlB,GAAAkB,SAAAA,WAAAlB,EAAAzB,MAAAtJ,KAAAvB,YAAA6I,IAAAA,CAM5B,OAN4BD,EAAA4E,EAAAlB,GAAAkB,EAAAhJ,UAQ7B0H,SAAA,SAASuB,GACP,IAAKlM,KAAKhB,MAAMgM,QAAS,OAAOkB,EAEhC,IAAMC,EAAU,CAAE,EAUlB,OARInM,KAAKhB,MAAMoN,MACbD,EAAa,IAAInM,KAAKhB,MAAMoN,IAAIF,EAAQE,IAAKpM,KAAKhB,MAAMgM,UAGtDhL,KAAKhB,MAAMqN,OACbF,EAAc,KAAInM,KAAKhB,MAAMqN,KAAKH,EAAQG,KAAMrM,KAAKhB,MAAMgM,UAG7DH,EAAA,GACKqB,EACAC,EAEP,EAAC1F,EAAAwF,EAAA,CAAA,CAAAhN,IAAAyH,OAAAA,IArBD,WACE,OAAOO,EAAcqF,YACvB,KAACL,CAAA,EANoChC,ICbMvM,GAAE,EAAEE,GAAE,GAAGE,GAAE,GAAGD,GAAER,EAAEgC,IAAIrB,GAAEX,EAAEmD,IAAIpC,GAAEf,EAAEgH,OAAO/G,GAAED,EAAEmC,IAAIU,GAAE7C,EAAEgI,QAAQ,SAASvG,GAAEtB,EAAED,GAAGF,EAAEiG,KAAKjG,EAAEiG,IAAI3F,GAAEH,EAAEE,IAAGH,GAAGG,GAAE,EAAE,IAAID,EAAEE,GAAE4O,MAAM5O,GAAE4O,IAAI,CAACnN,GAAG,GAAGkE,IAAI,KAAK,OAAO9F,GAAGC,EAAE2B,GAAGV,QAAQjB,EAAE2B,GAAGkB,KAAK,CAACkM,IAAI1O,KAAIL,EAAE2B,GAAG5B,EAAE,CAAC,SAASS,GAAEZ,GAAG,OAAOK,GAAE,EAAS,SAAWL,EAAEE,EAAEE,GAAG,IAAIC,EAAEoB,GAAEtB,KAAI,GAAG,GAAGE,EAAEF,EAAEH,GAAGK,EAAE8B,MAAM9B,EAAE0B,GAAG,CAAQqN,QAAE,EAAOlP,GAAG,SAASF,GAAG,IAAIG,EAAEE,EAAEgP,IAAIhP,EAAEgP,IAAI,GAAGhP,EAAE0B,GAAG,GAAGzB,EAAED,EAAEF,EAAEA,EAAEH,GAAGG,IAAIG,IAAID,EAAEgP,IAAI,CAAC/O,EAAED,EAAE0B,GAAG,IAAI1B,EAAE8B,IAAIsG,SAAS,IAAI,GAAGpI,EAAE8B,IAAI7B,IAAGA,GAAEJ,GAAG,CAAC,IAAIK,EAAE,SAASP,EAAEG,EAAEG,GAAG,IAAID,EAAE8B,IAAI+M,IAAI,OAAM,EAAG,IAAIhP,EAAEG,EAAE8B,IAAI+M,IAAInN,GAAG+J,OAAO,SAAS9L,GAAG,OAAOA,EAAEmC,GAAG,GAAG,GAAGjC,EAAEoP,MAAM,SAAStP,GAAG,OAAOA,EAAEqP,GAAG,GAAG,OAAO5O,GAAGA,EAAEc,KAAKoB,KAAK3C,EAAEG,EAAEG,GAAG,IAAIF,GAAE,EAAG,OAAOF,EAAEuG,QAAQ,SAASzG,GAAG,GAAGA,EAAEqP,IAAI,CAAC,IAAIlP,EAAEH,EAAE+B,GAAG,GAAG/B,EAAE+B,GAAG/B,EAAEqP,IAAIrP,EAAEqP,SAAI,EAAOlP,IAAIH,EAAE+B,GAAG,KAAK3B,GAAE,EAAG,CAAC,MAAMA,GAAGC,EAAE8B,IAAIR,QAAQ3B,MAAMS,GAAGA,EAAEc,KAAKoB,KAAK3C,EAAEG,EAAEG,GAAG,EAAEA,GAAEJ,GAAE,EAAG,IAAIO,EAAEH,GAAEkG,sBAAsBhG,EAAEF,GAAEoG,oBAAoBpG,GAAEoG,oBAAoB,SAAS1G,EAAEG,EAAEG,GAAG,GAAGqC,KAAKV,IAAI,CAAC,IAAI/B,EAAEO,EAAEA,OAAE,EAAOF,EAAEP,EAAEG,EAAEG,GAAGG,EAAEP,CAAC,CAACM,GAAGA,EAAEe,KAAKoB,KAAK3C,EAAEG,EAAEG,EAAE,EAAEA,GAAEkG,sBAAsBjG,CAAC,CAAC,OAAOF,EAAEgP,KAAKhP,EAAE0B,EAAE,CAA3tBrB,CAAE0O,GAAEpP,EAAE,CAAstB,SAASgB,GAAEd,EAAEE,GAAG,IAAIC,EAAEoB,GAAEtB,KAAI,IAAIH,EAAEmG,KAAKjC,GAAE7D,EAAE6O,IAAI9O,KAAKC,EAAE0B,GAAG7B,EAAEG,EAAED,EAAEA,EAAEE,GAAE4O,IAAIjJ,IAAIhD,KAAK5C,GAAG,CAAiF,SAASwD,GAAE7D,GAAG,OAAOK,GAAE,EAAEkP,GAAE,WAAW,MAAM,CAACxH,QAAQ/H,EAAE,EAAE,GAAG,CAAsL,SAASuP,GAAEvP,EAAEM,GAAG,IAAIJ,EAAEuB,GAAEtB,KAAI,GAAG,OAAO+D,GAAEhE,EAAEgP,IAAI5O,IAAIJ,EAAEiP,IAAInP,IAAIE,EAAEE,EAAEE,EAAEJ,EAAE+F,IAAIjG,EAAEE,EAAEiP,KAAKjP,EAAE6B,EAAE,CAAqiB,SAASW,KAAI,IAAI,IAAIvC,EAAEA,EAAEI,GAAE+C,SAAS,GAAGnD,EAAEoD,KAAKpD,EAAE+O,IAAI,IAAI/O,EAAE+O,IAAIjJ,IAAIQ,QAAQ3D,IAAG3C,EAAE+O,IAAIjJ,IAAIQ,QAAQzD,IAAG7C,EAAE+O,IAAIjJ,IAAI,EAAE,CAAC,MAAM3F,GAAGH,EAAE+O,IAAIjJ,IAAI,GAAGjG,EAAEiC,IAAI3B,EAAEH,EAAEkC,IAAI,CAAC,CAACrC,EAAEgC,IAAI,SAAShC,GAAGM,GAAE,KAAKE,IAAGA,GAAER,EAAE,EAAEA,EAAEmD,IAAI,SAASnD,GAAGW,IAAGA,GAAEX,GAAGG,GAAE,EAAE,IAAIC,GAAGE,GAAEN,EAAEmC,KAAK+M,IAAI9O,IAAIF,KAAII,IAAGF,EAAE6F,IAAI,GAAG3F,GAAE2F,IAAI,GAAG7F,EAAE2B,GAAG0E,QAAQ,SAASzG,GAAGA,EAAEqP,MAAMrP,EAAE+B,GAAG/B,EAAEqP,KAAKrP,EAAEmP,IAAI1O,GAAET,EAAEqP,IAAIrP,EAAEI,OAAE,CAAM,KAAKA,EAAE6F,IAAIQ,QAAQ3D,IAAG1C,EAAE6F,IAAIQ,QAAQzD,IAAG5C,EAAE6F,IAAI,GAAG9F,GAAE,IAAID,GAAEI,EAAC,EAAEN,EAAEgH,OAAO,SAAS7G,GAAGY,IAAGA,GAAEZ,GAAG,IAAIE,EAAEF,EAAEgC,IAAI9B,GAAGA,EAAE6O,MAAM7O,EAAE6O,IAAIjJ,IAAI5E,SAAS,IAAId,GAAE0C,KAAK5C,IAAID,KAAIJ,EAAEwP,yBAAyBpP,GAAEJ,EAAEwP,wBAAwBzI,IAAGrE,KAAIrC,EAAE6O,IAAInN,GAAG0E,QAAQ,SAASzG,GAAGA,EAAEI,IAAIJ,EAAEkP,IAAIlP,EAAEI,GAAGJ,EAAEmP,MAAM1O,KAAIT,EAAE+B,GAAG/B,EAAEmP,KAAKnP,EAAEI,OAAE,EAAOJ,EAAEmP,IAAI1O,EAAC,IAAIP,GAAEI,GAAE,IAAI,EAAEN,EAAEmC,IAAI,SAAShC,EAAEG,GAAGA,EAAE2G,KAAK,SAAS9G,GAAG,IAAIA,EAAE8F,IAAIQ,QAAQ3D,IAAG3C,EAAE8F,IAAI9F,EAAE8F,IAAI6F,OAAO,SAAS9L,GAAG,OAAOA,EAAE+B,IAAIiB,GAAEhD,EAAE,EAAE,CAAC,MAAME,GAAGI,EAAE2G,KAAK,SAASjH,GAAGA,EAAEiG,MAAMjG,EAAEiG,IAAI,GAAG,GAAG3F,EAAE,GAAGN,EAAEiC,IAAI/B,EAAEC,EAAEkC,IAAI,CAAC,GAAGpC,IAAGA,GAAEE,EAAEG,EAAE,EAAEN,EAAEgI,QAAQ,SAAS7H,GAAG0C,IAAGA,GAAE1C,GAAG,IAAIG,EAAEJ,EAAEC,EAAEgC,IAAIjC,GAAGA,EAAEgP,MAAMhP,EAAEgP,IAAInN,GAAG0E,QAAQ,SAASzG,GAAG,IAAI8C,GAAE9C,EAAE,CAAC,MAAMA,GAAGM,EAAEN,CAAC,CAAC,GAAGE,EAAEgP,SAAI,EAAO5O,GAAGN,EAAEiC,IAAI3B,EAAEJ,EAAEmC,KAAK,EAAE,IAAII,GAAE,mBAAmB+M,sBAAsB,SAASzI,GAAE/G,GAAG,IAAIG,EAAEG,EAAE,WAAWmP,aAAavP,GAAGuC,IAAGiN,qBAAqBvP,GAAG6I,WAAWhJ,EAAE,EAAEE,EAAE8I,WAAW1I,EAAE,KAAKmC,KAAItC,EAAEqP,sBAAsBlP,GAAG,CAAC,SAASwC,GAAE9C,GAAG,IAAIG,EAAEG,GAAEJ,EAAEF,EAAEmC,IAAI,mBAAmBjC,IAAIF,EAAEmC,SAAI,EAAOjC,KAAKI,GAAEH,CAAC,CAAC,SAAS6C,GAAEhD,GAAG,IAAIG,EAAEG,GAAEN,EAAEmC,IAAInC,EAAE+B,KAAKzB,GAAEH,CAAC,CAAC,SAAS+D,GAAElE,EAAEG,GAAG,OAAOH,GAAGA,EAAEqB,SAASlB,EAAEkB,QAAQlB,EAAE8G,KAAK,SAAS9G,EAAEG,GAAG,OAAOH,IAAIH,EAAEM,EAAE,EAAE,CAAC,SAAS8O,GAAEpP,EAAEG,GAAG,MAAM,mBAAmBA,EAAEA,EAAEH,GAAGG,CAAC,UCG12GwP,KACd,ODJ+/C,SAAW3P,GAAG,IAAIE,EAAEI,GAAEsC,QAAQ5C,EAAEmC,KAAK/B,EAAEqB,GAAEtB,KAAI,GAAG,OAAOC,EAAEK,EAAET,EAAEE,GAAG,MAAME,EAAE2B,KAAK3B,EAAE2B,IAAG,EAAG7B,EAAE6F,IAAIzF,KAAIJ,EAAEyB,MAAM+D,OAAO1F,EAAE+B,EAAE,CCI1mD6N,CAAWC,GACpB,CCLe,IAAAC,GAAA,CACbC,OAAQ,CACNC,YAAa,YAEf3M,KAAM,CACJ4M,QAAU,OACVC,SAAU,QAEZC,WAAY,CACVC,SAAU,MACVC,KAAM,MACNC,SAAU,SAACC,EAAMC,GAAkBD,MAAAA,QAAAA,EAAWC,OAAAA,CAAK,EACnDD,KAAM,SAACA,GAAI,MAAA,QAAaA,CAAI,EAC5BE,QAAS,KACTC,GAAI,MACJC,GAAI,IACJC,QAAS,OAEXC,QAAS,SACTC,eAAgB,YAChBC,MAAO,eCbIC,gBAIX,WAAA,SAAAA,EAAYC,GAAmBtO,KAHduO,eAAS,EAAAvO,KACTwO,sBAGf,EAAAxO,KAAKuO,UAAYD,EACjBtO,KAAKwO,iBAAmBrB,EAC1B,CAAC,IAAA7F,EAAA+G,EAAApL,UA6CA,OA7CAqE,EASDmH,UAAA,SAAUC,EAAiBC,GACzB,IAAKA,IAASD,EAAS,OAAW,KAElC,IAAME,EAAWF,EAAQG,MAAM,KACzB5P,EAAM2P,EAAS,GAErB,GAAID,EAAK1P,GAAM,CACb,IAAM6P,EAAMH,EAAK1P,GAEjB,MAAmB,iBAAR6P,EACF,WAAA,OAAcA,CAAG,EACA,mBAARA,EACTA,EAEI9O,KAACyO,UAAUG,EAASzM,MAAM,GAAG4M,KAAK,KAAMD,EAEtD,CAED,OACF,IAAA,EAACxH,EAED0H,UAAA,SAAUN,GACR,IACIO,EAQJ,OALEA,EAJiBjP,KAAKyO,UAAUC,EAAS1O,KAAKuO,YAM9BvO,KAAKyO,UAAUC,EAAS1O,KAAKwO,mBAItCS,EAAa3F,WAAA,EAAA,GAAAnH,MAAAvD,KAAAH,UAAA,IAGfiQ,CACT,EAACL,CAAA,CAhDD,YAmDca,KACd,IAAMC,EAASnC,KAEf,OAAiB0B,SAAAA,GAAwB,IAAAU,EACvC,OAAOA,EAAAD,EAAOE,YAAWL,UAAS1F,MAAA8F,EAACV,CAAAA,GAAOjE,OAAA,GAAAtI,MAAAvD,KAAAH,UAAA,IAC5C,CACF,CCpEO,IAAM6Q,GAAgB,SAACC,GAAY,OAAA,SAAClM,GACzC,OAAAwH,EAAA,CAAA,EACKxH,EAAK,CACR+J,OAAQ,CACNpC,QAASuE,IAGf,CAAC,ECLe,SAAAC,KAEd,OADexC,KACDyC,KAChB,CCFwB,SAAAC,GAAerE,GACrC,IAAMoE,EAAQD,KACdG,EAA8BC,GAASvE,EAASoE,EAAMI,aAA/CzK,EAAOuK,EAAA,GAAEG,EAAUH,EAAA,GAc1B,OAZAI,GAAU,WASR,OARoBN,EAAMO,UAAU,WAClC,IAAMC,EAAU5E,EAASoE,EAAMI,YAE3BzK,IAAY6K,GACdH,EAAWG,EAEf,EAGF,EAAG,IAEI7K,CACT,UCIgB8K,SAAMC,EACpBR,EAAkCC,QAEhCQ,GAFKC,EAASV,EAAA,GAAEW,EAAYX,EAG9B,GAAMR,EAASnC,KACThO,EAAQmQ,EAAO/B,OACflM,EAAIgO,KACFqB,EAAaf,KAAbe,SACFlN,EAAQqM,GAAY,SAACrM,GAAU,OAAAA,EAAM+J,MAAM,GAEjD2C,GAAU,WACHM,GAELA,EAAUjG,SAAS,CACjBY,QAAc,MAAL3H,OAAK,EAALA,EAAO2H,SAEpB,EAAG,CAAC3H,EAAOgN,IAEXN,GAAU,WAENO,EADEtR,EAAMwR,OAEN,IAAIvE,GAAyB,CAC3BjB,QAAShM,EAAMgM,QACfoB,IAAKpN,EAAMwR,OAAOpE,IAClBC,KAAMrN,EAAMwR,OAAOnE,OAKrB,IAAIvB,GAAmB,CACrBE,QAAShM,EAAMgM,QACfE,QAASiE,EAAOsB,QAAUtB,EAAOsB,OAAOvF,QACxCC,oBACEnM,EAAMmM,0BACwBiF,IAA9BpR,EAAMmM,oBACRE,SAAUrM,EAAMqM,YAMlBrM,EAAMgM,SAASuF,EAASG,GAAsB1R,EAAMgM,SAC1D,EAAG,CAAChM,IAEJ+Q,GAAU,WACR,GAAKM,EAIL,OAFAlB,EAAOwB,SAASC,SAAyBP,GAElC,WAAA,OAAMlB,EAAOwB,SAASE,WAA2BR,EAAU,CACpE,EAAG,CAAClB,EAAQkB,IAEZ,IC3EAS,EACAC,EAEIC,EDwEEC,EP5Eo8C,SAAW5T,EAAEG,GAAG,OAAOE,GAAE,EAAEkP,GAAE,WAAW,OAAOvP,CAAC,EAAEG,EAAE,CO4Er+C0T,EC3EzBJ,ED6EI,SAAClO,GACKA,EAAMuO,kBAAkBC,kBAC1Bb,EAASG,GAAsB9N,EAAMuO,OAAOpO,OAEhD,EChFJgO,EDiFIV,aAAqBpE,GACjBjN,EAAMqS,iBAAmB,IACzB,EC/ED,WAAA,IAAAhI,EAAA5K,UACL,OAAA,IAAIwH,QAAQ,SAACG,GACP4K,GACFlE,aAAakE,GAGfA,EAAU3K,WAAW,WAAA,OAAMD,EAAQ0K,EAAIxH,WAAA,EAAA,GAAAnH,MAAAvD,KAAAyK,IAAU,EAAE0H,EACrD,EAAE,GD0EF,CAAC/R,EAAOqR,IAGV,OACEpS,EAAK2N,MAAAA,CAAAA,UAAWA,GAAUI,GAAU,SAA0B,OAAlBmE,EAAEhB,EAAOvD,gBAAS,EAAhBuE,EAAkB/C,UAC9DnP,EACEc,QAAAA,CAAAA,KAAK,SACLsO,YAAanM,EAAE,sBACf,aAAYA,EAAE,sBACdoQ,QAASL,EACTrF,UAAWI,GAAUJ,GAAU,SAAUA,GAAU,SAAU,UAC7D7I,OAAY,MAALM,OAAK,EAALA,EAAO2H,UAAW,GACzBQ,QACAzJ,EAAAA,MAAM,mBAId,CEnGsB,IAOhBwP,gBAAgB,SAAAxG,GAAA,SAAAwG,IAAAxG,OAAAA,EAAAzB,MAAAtJ,KAAAvB,YAAAuB,IAAA,CAAAqH,EAAAkK,EAAAxG,GAAA,IAAAzD,EAAAiK,EAAAtO,iBAAAqE,EACViD,cAAA,WACR,GAAIiH,MAAMC,OAAOzR,KAAKhB,MAAM0S,SAAWF,MAAMC,OAAOzR,KAAKhB,MAAM4O,OAC7D,MAAM+D,MAAM,4BAEhB,EAACrK,EAMSqD,SAAA,SAAS7F,GACjB,IAAM8I,EAAO5N,KAAKhB,MAAM4O,KAIxB,OAAW,IAAA1F,GAAQpD,EAAKqD,KAAKhG,MAHfyL,EAAO5N,KAAKhB,MAAM0S,OACnB9D,EAAO,GAAK5N,KAAKhB,MAAM0S,OAGtC,EAACjL,EAAA8K,EAAAtS,CAAAA,CAAAA,IAAAyH,OAAAA,IAVD,WACE,OAAOO,EAAc2K,KACvB,KAACL,CAAA,CATmB,CAAQtH,ICExB4H,yBAAsB9G,GAAA8G,SAAAA,WAAA9G,EAAAzB,MAAAtJ,KAAAvB,YAAA6I,IAAAA,CAMzB,OANyBD,EAAAwK,EAAA9G,GAAA8G,EAAA5O,UAQ1B0H,SAAA,SAASuB,GACP,IAAMC,EAAU,CAAA,EAkBhB,OAhBInM,KAAKhB,MAAMoN,MACbD,EAAa,IAAInM,KAAKhB,MAAMoN,IAC1BF,EAAQE,IACRpM,KAAKhB,MAAM4O,KACX5N,KAAKhB,MAAM0S,QAIX1R,KAAKhB,MAAMqN,OACbF,EAAc,KAAInM,KAAKhB,MAAMqN,KAC3BH,EAAQG,KACRrM,KAAKhB,MAAM4O,KACX5N,KAAKhB,MAAM0S,QAIf7G,EAAA,GACKqB,EACAC,EAEP,EAAC1F,EAAAoL,EAAA,CAAA,CAAA5S,IAAAyH,OAAAA,IA3BD,WACE,OAAOO,EAAc6K,WACvB,KAACD,CAAA,EANiC5H,aCQpB8H,KACd,IAAM5C,EAASnC,KACfgF,EASI7C,EAAO3B,WARTgD,EAAMwB,EAANxB,OAAMyB,EAAAD,EACNE,QAAAA,OAAO,IAAAD,GAAOA,EAAAE,EAAAH,EACdI,WAAAA,OAAa,IAAHD,GAAOA,EAAAE,EAAAL,EACjBM,WAAAA,OAAU,IAAAD,GAAOA,EAAAE,EAAAP,EACjBQ,aAAAA,OAAY,IAAAD,EAAG,EAACA,EAAAE,EAAAT,EAChBN,MAAAA,OAAQ,IAAHe,EAAG,GAAEA,EAAAC,EAAAV,EACVpE,KAAAA,WAAI8E,EAAG,EAACA,EAAAC,EAAAX,EACRY,kBAAAA,WAAiBD,GAAOA,EAGpBtC,EAAYwC,GAAgD,MAClElD,EAAsCC,GAAShC,GAAxCkF,EAAWnD,KAAEoD,EAAcpD,EAAA,GAClCqD,EAA0BpD,GAAS,GAA5BqD,EAAKD,EAAA,GAAEE,EAAQF,EACtB,GAAM9R,EAAIgO,KAEVa,GAAU,WAuCR,OAtCIS,GACFH,EAAUjL,QAAU,IAAIyM,GAAsB,CAC5CH,MAAOA,EACP9D,KAAMkF,EACN1G,IAAKoE,EAAOpE,IACZC,KAAMmE,EAAOnE,OAGf8C,EAAOwB,SAASC,SAASP,EAAUjL,WAEnCiL,EAAUjL,QAAU,IAAImM,GAAgB,CACtCG,MAAOA,EACP9D,KAAMkF,IAGR3D,EAAOwB,SAASC,SAASP,EAAUjL,UAGjCiL,EAAUjL,mBAAmByM,GAC/B1C,EAAOwB,SAAS5H,GAAG,eAAgB,SAACqC,GAAY,OAAA8H,EAAS9H,EAAQ1M,OAAO,GAC/D2R,EAAUjL,mBAAmBmM,IAItClB,EAAUjL,QAAQ2D,GAAG,gBAAiB,SAACqC,GACrC,OAAA8H,EAAS9H,EAAQ1M,OAAO,GAI5ByQ,EAAOwB,SAAS5H,GAAG,UAAWoK,GAI9BhE,EAAOwB,SAAS5H,GAAG,QAAS,WAC1BmK,EAAS,GACTH,EAAe,EACjB,GAEO,WACL5D,EAAOwB,SAASE,WAA2BR,EAAUjL,SACrD+J,EAAOwB,SAAS1H,IAAI,UAAWkK,EACjC,CACF,EAAG,IAEH,IAAMA,EAAW,SAACC,GAGZR,GAAqBQ,IAAqB/C,EAAUjL,SACtD2N,EAAe,EAEnB,EAEMlF,EAAQ,WAAH,OAASnI,KAAK2N,KAAKJ,EAAQvB,EAAM,EAEtC4B,EAAU,SAAC1F,GACf,GAAIA,GAAQC,KAAWD,EAAO,GAAKA,IAASkF,EAC1C,OAAO,KAGTC,EAAenF,GAEfyC,EAAUjL,QAAQgF,SAAS,CACzBwD,KAAMA,GAEV,EAmHA,OACE3P,EACE2N,MAAAA,CAAAA,UAAWI,GACTJ,GAAU,cACVuD,EAAOvD,UAAU4B,aA1BnBvP,EAACsV,OACErB,GAAWe,EAAQ,GAClBhV,EACEuV,MAAAA,CAAAA,KAAK,SACL,YAAU,SACV5H,UAAWI,GACTJ,GAAU,WACVuD,EAAOvD,UAAU6H,mBAEnBC,MAAOxS,EAAE,sBAAuB4R,EAAc,EAAGjF,MAEhD3M,EAAE,sBAAuB,IAAAjD,EAAIiD,IAAAA,KAAAA,EAAK4R,IAAAA,EAAcpB,EAAQ,KAAU,IAClExQ,EAAE,iBAAkB,IACrBjD,EAAA,IAAA,KAAIiD,EAAKwE,GAAAA,KAAKiO,KAAKb,EAAc,GAAKpB,EAAOuB,KAAe,IAC3D/R,EAAE,iBAAkB,IAAAjD,EAAIiD,IAAAA,KAAAA,KAAK+R,IAAc,IAC3C/R,EAAE,wBAgBTjD,SAAK2N,UAAWA,GAAU,UACvB0G,GACCrU,EAAA,SAAA,CACE2V,SAAU,EACVJ,KAAK,SACLK,SAA0B,IAAhBf,EACVgB,QAAS,WAAM,OAAAR,EAAQR,EAAc,EAAE,EACvCY,MAAOxS,EAAE,uBACT,aAAYA,EAAE,uBACd0K,UAAWI,GACTmD,EAAOvD,UAAUmI,iBACjB5E,EAAOvD,UAAUoI,uBAGlB9S,EAAE,wBAxIO,WAClB,GAAIsR,GAAgB,EAClB,OACD,KAGD,IAAMyB,EAAmBvO,KAAKiO,IAAI9F,IAAS2E,GAEvC0B,EAAYxO,KAAKiO,IAAIb,EAAapN,KAAKyO,MAAMF,EAAW,IAK5D,OAJInB,EAAcpN,KAAKyO,MAAMF,EAAW,IAAMpG,MAC5CqG,EAAYD,GAAYpG,IAAUiF,IAIlC7U,EAACsV,EAAQ,KACN1F,IAAUoG,GAAYnB,EAAcoB,EAAY,GAC/CjW,EAACsV,OACCtV,EAAA,SAAA,CACE2V,SAAU,EACVJ,KAAK,SACLM,QAAS,WAAM,OAAAR,EAAQ,EAAE,EACzBI,MAAOxS,EAAE,wBACT,aAAYA,EAAE,wBACd0K,UAAWuD,EAAOvD,UAAUmI,kBAE3B7S,EAAE,MAELjD,EACE2V,SAAAA,CAAAA,UAAW,EACXhI,UAAWI,GACTJ,GAAU,UACVuD,EAAOvD,UAAUmI,mBAGnB,QAKL7V,MAAMkW,KAAKlW,MAAM+V,GAAUrK,QACzB7B,IAAI,SAACtK,GAAM,OAAAqV,GAAerV,EAAIyW,EAAU,GACxCnM,IAAI,SAACtK,GAAC,OACLQ,YACE2V,SAAU,EACVJ,KAAK,SACLM,QAAS,WAAM,OAAAR,EAAQ7V,EAAE,EACzBmO,UAAWI,GACT8G,IAAgBrV,EACZuO,GACEJ,GAAU,eACVuD,EAAOvD,UAAUyI,yBAEnB,KACJlF,EAAOvD,UAAUmI,kBAEnBL,MAAOxS,EAAE,kBAAmBzD,EAAI,GAChC,aAAYyD,EAAE,kBAAmBzD,EAAI,IAEpCyD,MAAKzD,EAAI,IACH,GAGZoQ,IAAUoG,GAAYpG,IAAUiF,EAAcoB,EAAY,GACzDjW,EAACsV,OACCtV,EAAA,SAAA,CACE2V,UAAW,EACXhI,UAAWI,GACTJ,GAAU,UACVuD,EAAOvD,UAAUmI,mBAGnB,OAEF9V,EAAA,SAAA,CACE2V,SAAU,EACVJ,KAAK,SACLM,QAAS,WAAA,OAAMR,EAAQzF,IAAU,EAAE,EACnC6F,MAAOxS,EAAE,kBAAmB2M,KAC5B,aAAY3M,EAAE,kBAAmB2M,KACjCjC,UAAWuD,EAAOvD,UAAUmI,kBAE3B7S,EAAC,GAAI2M,OAMlB,CAqDOyG,GAEAlC,GACCnU,EACE2V,SAAAA,CAAAA,SAAU,EACVJ,KAAK,SACLK,SAAUhG,MAAYiF,EAAc,GAAiB,IAAZjF,IACzCiG,QAAS,kBAAMR,EAAQR,EAAc,EAAE,EACvCY,MAAOxS,EAAE,mBACT,aAAYA,EAAE,mBACd0K,UAAWI,GACTmD,EAAOvD,UAAUmI,iBACjB5E,EAAOvD,UAAU2I,uBAGlBrT,EAAE,qBAMf,UC5QgBsT,GAAMA,EAAwBC,GAC5C,MAAoB,iBAATD,EACLA,EAAMrQ,QAAQ,MAAQ,EAChBsQ,EAAiB,IAAOC,SAASF,EAAO,IAEzCE,SAASF,EAAO,IAIpBA,CACT,CAEgB,SAAAG,GAAGH,GACjB,OAAKA,EACK9O,KAAKyO,MAAMK,GACvB,KAFqB,EAErB,UCRgBI,GAAY5V,GAC1B,IAAM6V,EAAc7V,EAAM8V,SAASC,WAAU,GAO7C,OALAF,EAAY9S,MAAMiT,SAAW,WAC7BH,EAAY9S,MAAMyS,MAAQ,OAC1BK,EAAY9S,MAAMkT,OAAS,cAC3BJ,EAAY9S,MAAMmT,WAAa,SAG7BjX,EAAA,MAAA,CACEiB,IAAK,SAACiW,GACJA,GAAeA,EAAYC,YAAYP,EACzC,GAGN,CCtBM,SAAUQ,GAAUC,GACxB,IAAKA,EAAK,MAAO,GAEjB,IAAMC,EAAQD,EAAIzG,MAAM,KAGxB,OAAqB,IAAjB0G,EAAM7W,QAAgB,iBAAiBmD,KAAKyT,GACvCA,EAGFC,EACJxN,IAAI,SAAUyN,EAAM3N,GAEnB,OAAa,GAATA,EACK2N,EAAKtT,cAIPsT,EAAKC,OAAO,GAAGC,cAAgBF,EAAKrT,MAAM,GAAGD,aACtD,GACC6M,KAAK,GACV,CChBM,ICDM4G,GDyBZC,GAAe,iBAxBH,WAAA,SAAAC,IAAA,CAAA,IAAAvO,EAAAuO,EAAA5S,UAqBT,OArBSqE,EACFwO,OAAA,SAAOpH,EAAiB3P,GAC9B,oBAAqBA,EAAK2W,cAAa,MAAMhH,CAC/C,EAACpH,EAED8G,MAAA,SAAMM,EAAiBqH,QAAAA,IAAAA,IAAAA,GAAiB,GACtC,IAAMC,EAAMhW,KAAK8V,OAAOpH,EAAS,SAEjC,GAAIqH,EACF,MAAMpE,MAAMqE,GAEZC,QAAQ7H,MAAM4H,EAElB,EAAC1O,EAED4O,KAAA,SAAKxH,GACHuH,QAAQC,KAAKlW,KAAK8V,OAAOpH,EAAS,QACpC,EAACpH,EAED6O,KAAA,SAAKzH,GACHuH,QAAQE,KAAKnW,KAAK8V,OAAOpH,EAAS,QACpC,EAACmH,CAAA,CArBS,ICDZO,EAAAT,oBAAA,GAAYA,GAAAA,EAAcA,iBAAdA,EAAcA,eAIzB,KAHCA,GAAA,OAAA,GAAA,SACAA,GAAAA,GAAA,OAAA,GAAA,SACAA,GAAAA,GAAA,KAAA,GAAA,OAUF,IAAaU,2BAGX,SAAAA,IAAArW,KAFiBsW,aAAO,EAGtBtW,KAAKsW,QAAU,EACjB,CAAC,IAAAhP,EAAA+O,EAAApT,UAyCAoT,OAzCA/O,EAEDZ,IAAA,SAAiCH,GAC/B,OAAWvG,KAACsW,QAAQC,KAAK,SAAClY,GAAC,OAAKA,EAAEkI,KAAOA,CAAE,EAC7C,EAACe,EAEDkP,IAAA,SAAsCC,GACpC,OAAKA,EAAOlQ,GAKRvG,KAAK0G,IAAI+P,EAAOlQ,KAClBqP,GAAIxH,MAAK,wBAAyBqI,EAAOlQ,IAClCvG,OAGTA,KAAKsW,QAAQhW,KAAKmW,UAThBb,GAAIxH,MAAM,6BAEXpO,KASH,EAACsH,EAEDoP,OAAA,SAAOnQ,GACL,IAAMkQ,EAASzW,KAAK0G,IAAIH,GAMxB,OAJIkQ,GACFzW,KAAKsW,QAAQK,OAAO3W,KAAKsW,QAAQnS,QAAQsS,GAAS,GAItDzW,IAAA,EAACsH,EAEDsP,KAAA,SAAkC5B,GAChC,IAAIsB,EAQJ,OALEA,EADc,MAAZtB,GAAgC5E,MAAZ4E,EACZhV,KAAKsW,QAAQnN,OAAO,SAAC9K,GAAC,OAAKA,EAAE2W,WAAaA,CAAQ,GAElDhV,KAAKsW,QAGVA,EAAQ5V,KAAK,SAAC1C,EAAG+B,GAAC,OAAM/B,EAAE6Y,OAAS9W,EAAE8W,MAAQ7Y,EAAE6Y,MAAQ9W,EAAE8W,MAAQ,CAAC,EAC3E,EAACR,CAAA,aAGaS,GAAe9X,GAM9B,IAAAmI,EACCnH,KAAMmP,EAASnC,KAEf,GAAIhO,EAAM+X,SAAU,CAElB,IAAMN,EAAStH,EAAOsH,OAAO/P,IAAI1H,EAAM+X,UAEvC,OAAKN,EAEExY,EACLsV,EACA,CAAA,EACAtV,EAAEwY,EAAOO,UAASnM,EAAA,CAChB4L,OAAQA,GACLzX,EAAMA,aAGd,CAAM,YAAuBoR,IAAnBpR,EAAMgW,SAER/W,EACLsV,EACA,CAAE,EACFpE,EAAOsH,OAAOG,KAAK5X,EAAMgW,UAAUjN,IAAI,SAAC1J,GACtC,OAAOJ,EAAEI,EAAE2Y,UAASnM,EAAI4L,CAAAA,OAAQpY,GAAM8I,EAAKnI,MAAMA,OACnD,IAKN,IAAA,CC5FyD,IAGnDiY,gBAAO,SAAA/P,GAGX,SAAA+P,IAAA9P,IAAAA,EAGqB,OAFnBA,EAAAD,EAAAtI,YAAOoB,MAHDkX,gBAKN/P,EAAK+P,SAAW,GAAG/P,CACrB,CAPWE,EAAA4P,EAAA/P,GAOV,IAAAI,EAAA2P,EAAAhU,iBAAAqE,EAsBD6P,YAAA,SACEhI,EACA2F,EACAsC,GAEA,IAAMC,EAAqBlI,EAAOkI,UAC5BC,EAAYnI,EAAOmI,UAEzB,IAAKD,EAGH,OACDrX,KAGD,IAAMyU,EAAiB4C,EAAUE,YAE7BC,EAAS,GAET1C,EAAS1P,SAAWkS,IAMtBpU,EACEjF,EAAE2W,GAAa,CACbE,SAAUA,EAAS1P,UAErBgS,EAAQhS,SAGVoS,EJjDA,SAA+BJ,GAGnC,IAAMK,EAAiCL,EAAQM,cAC7C,SAGF,IAAKD,EACH,MAAO,CACR,EAED,IAAME,EAAiBF,EAAa7L,UAC9BgM,EAAaH,EAAa1V,MAAMC,QACtCyV,EAAa7L,UAAe+L,MAAkB/L,GAAU,eAExD6L,EAAa1V,MAAM8V,YAAc,OACjCJ,EAAa1V,MAAMyS,MAAQ,OAC3BiD,EAAa1V,MAAM+V,QAAU,IAC7BL,EAAa1V,MAAMgW,OAAS,IAC5BN,EAAa1V,MAAMiW,OAAS,OAC5BP,EAAa1V,MAAMkW,QAAU,OAE7B,IAAIC,EAAMha,MAAMkW,KACdqD,EAAanZ,WAAW6Z,iBAA8B,aACtDtM,OAAO,SAACC,EAAM1G,GAAW,IAAAgT,EAGzB,OAFAhT,EAAQrD,MAAMyS,MAAWpP,EAAQmS,iBAEjC1M,IAAAuN,EAAAA,CAAAA,GACGhT,EAAQiT,aAAa,mBAAoB,CACxCC,SAAUlT,EAAQmS,aACnBa,GACEtM,EAEP,EAAG,CAAA,GAcH,OAZA2L,EAAa7L,UAAY+L,EACzBF,EAAa1V,MAAMC,QAAU4V,EAC7BH,EAAa1V,MAAM8V,YAAc,OAE3B3Z,MAAMkW,KACVqD,EAAanZ,WAAW6Z,iBAA8B,aACtDtM,OAAO,SAACC,EAAM1G,GAGd,OAFA0G,EAAK1G,EAAQiT,aAAa,mBAA0B,MAAIjT,EAAQmS,YAEzDzL,CACT,EAAGoM,EAGL,CICeK,CAAqBnB,EAAQhS,UAGxC,IAAA,IAAgEoT,EAAhEC,EAAAC,EAA6BzB,EAAO0B,cAAc3Y,KAAKkL,SxBjE3CW,OAAO,SAACC,EAAMvL,GAAC,OAAKuL,EAAKrB,OAAOlK,EAAE,EAAE,OwBiEgBiY,EAAAC,KAAAG,MAAE,CAAA,IAAvDC,EAAML,EAAAzV,MAEX8V,EAAO3N,SAAW2N,EAAO3N,QAAQxM,OAAS,KAIzCma,EAAOrE,OAAS8C,EAIfuB,EAAOtS,MAAMiR,IAEfqB,EAAOrE,MAAQG,GAAG6C,EAAOqB,EAAOtS,IAAW,OAC3CsS,EAAOP,SAAW3D,GAAG6C,EAAOqB,EAAOtS,IAAc,WAKnDsS,EAAOrE,MAAQG,GAAGH,GAAMqE,EAAOrE,MAAOC,IAEzC,CAOD,OALIK,EAAS1P,SAAWkS,GAEtBpU,EAAO,KAAMkU,EAAQhS,SAGhBpF,IACT,EAACsH,EAEOwR,QAAA,SACNC,EACA7N,GAIA,IAFA,IAEyB8N,EAAzBC,EAAAP,EAFaxN,GAAWlL,KAAKkL,SAAW,MAEf8N,EAAAC,KAAAL,MAAE,KAAhBC,EAAMG,EAAAjW,MAEX8V,EAAO3N,SAAW2N,EAAO3N,QAAQxM,OAAS,EAC5Cma,EAAOnY,UAAO0P,OACWA,IAAhByI,EAAOnY,MAAsBqY,EACtCF,EAAOnY,KAAO,CAAA,EACJmY,EAAOnY,KAGe,iBAAhBmY,EAAOnY,OACvBmY,EAAOnY,KAAImK,EACNgO,CAAAA,EAAAA,EAAOnY,OAHZmY,EAAOnY,UAAO0P,EAOZyI,EAAO3N,SACTlL,KAAK8Y,QAAQC,EAAYF,EAAO3N,QAEnC,CACH,EAAC5D,EAEO4R,aAAA,SAAaC,EAAoBjO,GAGvC,IAFA,IAEyBkO,EAAzBC,EAAAX,EAFaxN,GAAWlL,KAAKkL,SAAW,MAEfkO,EAAAC,KAAAT,MAAE,CAAhB,IAAAC,EAAMO,EAAArW,WACUqN,IAArByI,EAAOM,YACTN,EAAOM,UAAYA,GAGjBN,EAAO3N,SACTlL,KAAKkZ,aAAaC,EAAWN,EAAO3N,QAEvC,CACH,EAAC5D,EAEOgS,MAAA,SAAMpO,GAGZ,IAFA,IAEyBqO,EAAzBC,EAAAd,EAFaxN,GAAWlL,KAAKkL,SAAW,MAEfqO,EAAAC,KAAAZ,MAAE,CAAhB,IAAAC,EAAMU,EAAAxW,MACV8V,EAAOtS,IAA6B,iBAAhBsS,EAAO5T,OAE9B4T,EAAOtS,GAAK8O,GAAUwD,EAAO5T,OAG1B4T,EAAOtS,IACVkT,GAAOrL,0GAMLyK,EAAO3N,SACTlL,KAAKsZ,MAAMT,EAAO3N,QAErB,CACH,EAAC5D,EAEOoS,gBAAA,SACNC,EACAzO,GAGA,IAAA0O,IAA4BC,EAA5BD,EAAAlB,EAAqBxN,KAAO2O,EAAAD,KAAAhB,MAAE,CAAA,IAAnBC,EAAMgB,EAAA9W,WACOqN,IAAlByI,EAAOpC,QACTkD,EAAcnD,IAAG3L,EACftE,CAAAA,GAAIsS,EAAOtS,IACRsS,EAAOpC,OAAM,CAChBzB,SAAUW,EAAAA,eAAe3O,OAG9B,CACH,EAACiQ,EAEM6C,YAAP,SACE5O,GAIA,IAFA,IAE4B6O,EAFtBtJ,EAAS,IAAIwG,EAEnB+C,EAAAtB,EAAqBxN,KAAO6O,EAAAC,KAAApB,MAAE,CAAA,IAAnBC,EAAMkB,EAAAhX,MACf,GAAsB,iBAAX8V,GAAuBoB,EAAepB,GAC/CpI,EAAOvF,QAAQ5K,KAAK,CAClB2E,KAAM4T,SAEC,GAAkB,iBAAXA,EAAqB,CACrC,IAAMqB,EAAcrB,EAEhBqB,EAAYhP,UACdgP,EAAYhP,QAAU+L,EAAO6C,YAAYI,EAAYhP,SAASA,SAK9B,iBAAvBgP,EAAYzD,aACIrG,IAArB8J,EAAYpV,OACdoV,EAAYpV,KAAO,MAKvB2L,EAAOvF,QAAQ5K,KAAKuY,EACrB,CACF,CAED,OAAOpI,CACT,EAACwG,EAEMkD,iBAAP,SAAwBhL,GACtB,IAAMsB,EAAS,IAAIwG,EAmBnB,OAhBI9H,EAAOiF,KACT3D,EAAOvF,QAAU+L,EAAOmD,cAAcjL,EAAOiF,MAAMlJ,QAC1CiE,EAAOjE,QAChBuF,EAAOvF,QAAU+L,EAAO6C,YAAY3K,EAAOjE,SAASA,SAEpDiE,EAAOrK,MACmB,iBAAnBqK,EAAOrK,KAAK,IACjBqK,EAAOrK,KAAK,aAAc5G,QAI5BuS,EAAOvF,QAAUvB,OAAOC,KAAKuF,EAAOrK,KAAK,IAAIiD,IAAI,SAAC9C,GAChD,MAAO,CAAEA,KAAMA,EACjB,IAGEwL,EAAOvF,QAAQxM,QACjB+R,EAAO6I,QACP7I,EAAOqI,QAAQ3J,EAAOzO,MACtB+P,EAAOyI,aAAa/J,EAAOgK,WAC3B1I,EAAOiJ,gBAAgBvK,EAAOsH,OAAQhG,EAAOvF,SACtCuF,OAIX,EAACwG,EAEMmD,cAAP,SAAqB3O,GAKnB,IAJA,IAI2B4O,EAJrB5J,EAAS,IAAIwG,EAInBqD,EAAA5B,EAHcjN,EAAQiM,cAAc,SAClBS,iBAAiB,SAERkC,EAAAC,KAAA1B,MAAE,CAAlB,IAAA2B,EAAEF,EAAAtX,MACX0N,EAAOvF,QAAQ5K,KAAK,CAClB2E,KAAMsV,EAAGpV,UACTqP,MAAO+F,EAAG/F,OAEb,CAED,OAAO/D,CACT,EAACwG,EAqBM0B,cAAP,SAAqBzN,GACnB,IAAIR,EAA6B,GAC3B8P,EAAOtP,GAAW,GACpBuP,EAAU,GAEd,GAAID,GAAQA,EAAK9b,OAAQ,CACvBgM,EAAOpK,KAAKka,GAEZ,IAAAE,IAAsBC,EAAtBD,EAAAhC,EAAkB8B,KAAIG,EAAAD,KAAA9B,MAAE,CAAA,IAAbgC,EAAGD,EAAA5X,MACR6X,EAAI1P,SAAW0P,EAAI1P,QAAQxM,SAC7B+b,EAAUA,EAAQhQ,OAAOmQ,EAAI1P,SAEhC,CAEGuP,EAAQ/b,SACVgM,EAASA,EAAOD,OAAOzK,KAAK2Y,cAAc8B,IAE7C,CAED,OAAO/P,CACT,EAACuM,EAOM4D,YAAP,SAAmB3P,GACjB,IAAIR,EAA6B,GAC3B8P,EAAOtP,GAAW,GAExB,GAAIsP,GAAQA,EAAK9b,OACf,IAAAoc,IAAsBC,EAAtBD,EAAApC,EAAkB8B,KAAIO,EAAAD,KAAAlC,MAAE,CAAA,IAAbgC,EAAGG,EAAAhY,MACP6X,EAAI1P,SAAkC,IAAvB0P,EAAI1P,QAAQxM,QAC9BgM,EAAOpK,KAAKsa,GAGVA,EAAI1P,UACNR,EAASA,EAAOD,OAAOzK,KAAK6a,YAAYD,EAAI1P,UAE/C,CAGH,OAAOR,CACT,EAACuM,EAMM+D,aAAP,SAAoBnC,GAClB,OAAW7Y,KAAC2Y,cAAc,CAACE,IAASna,OAAS,CAC/C,EAAC+H,EAAAwQ,EAAAhY,CAAAA,CAAAA,cAAAyH,IA1TD,WACE,OAAO1G,KAAKkX,QACd,EAACjP,IAED,SAAYiD,GACVlL,KAAKkX,SAAWhM,CAClB,GAACjM,CAAAA,qBAAAyH,IAED,WACE,OAAO1G,KAAKkX,SAAS/N,OAAO,SAACrL,GAAC,OAAMA,EAAE0N,MAAM,EAC9C,KAACyL,CAAA,CAnBU,CAAQ3Q,GCPN2U,GAAOA,WAoBtB,ECtBMC,gBAAc,SAAAC,GAGlB,SAAAD,EAAYpW,GAAoDqC,IAAAA,EAE/C,OADfA,EAAAgU,EAAAvc,YAAQuI,MAHFrC,UAAI,EAIVqC,EAAKc,IAAInD,GAAMqC,CACjB,CANkBE,EAAA6T,EAAAC,GAMjB,IAAA7T,EAAA4T,EAAAjY,UAmBA,OAnBAqE,EAEYZ,IAAG,WAAA,IACST,OAAAA,QAAAG,QAAJpG,KAAK8E,QAAMoB,KAAxBpB,SAAAA,GAEN,MAAO,CACLA,KAAMA,EACNmO,MAAOnO,EAAKpG,OACZ,EACJ,CAAC,MAAAb,GAAAoI,OAAAA,QAAAmV,OAAAvd,KAAAyJ,EAEMW,IAAA,SAAInD,GAOT,OANIA,aAAgB5G,MAClB8B,KAAK8E,KAAO,WAAA,OAAaA,CAAI,EACpBA,aAAgB0F,WACzBxK,KAAK8E,KAAOA,GAGP9E,IACT,EAACkb,CAAA,CAzBiB,CAAQD,ICgBtBI,gBAAc,SAAAF,GAGlB,SAAAE,EAAYnP,OAA6B/E,EAEhB,OADvBA,EAAAgU,EAAAvc,KAAAoB,OAAOA,MAHQkM,aAAO,EAItB/E,EAAK+E,QAAUA,EAAQ/E,CACzB,CANkBE,EAAAgU,EAAAF,GAMjB,IAAA7T,EAAA+T,EAAApY,UA0CA,OA1CAqE,EAEOgU,QAAA,SAAQC,GACd,MAAmC,mBAAxBvb,KAAKkM,QAAQsP,OACXxb,KAACkM,QAAQsP,OAAOD,GAGzBA,EAASE,GACJF,EAASG,QAEhB9F,GAAIxH,MACuBmN,yBAAAA,EAASI,OAAYJ,MAAAA,EAASK,YACvD,GAGH,KACH,EAACtU,EAEMZ,IAAA,SAAIwF,GAGT,IAAM2P,EAAIhR,EACL,CAAA,EAAA7K,KAAKkM,QACLA,GAOL,MAAyB,mBAAd2P,EAAK/W,KACP+W,EAAK/W,KAAK+W,GAGZC,MAAMD,EAAKzP,IAAKyP,GACpB3V,KAAKlG,KAAKsb,QAAQnV,KAAKnG,OACvBkG,KAAK,SAAC6V,GACL,MAAO,CACLjX,KAAM+W,EAAK3V,KAAK6V,GAChB9I,MAA6B,mBAAf4I,EAAK5I,MAAuB4I,EAAK5I,MAAM8I,QAAO3L,EAEhE,EACJ,EAACiL,CAAA,CAhDiB,CAAQJ,ICZtBe,oCAAYA,IAAA,CA8DfA,OA9DeA,EAMF7B,iBAAP,SAAwBhL,GAC7B,IAAI8M,EAAU,KAoBd,OAlBI9M,EAAOrK,OACTmX,EAAU,IAAIf,GAAc/L,EAAOrK,OAGjCqK,EAAOiF,OACT6H,EAAU,IAAIf,GAAclb,KAAKkc,oBAAoB/M,EAAOiF,OAE5DjF,EAAOiF,KAAKrS,MAAMoa,QAAU,QAG1BhN,EAAOqB,SACTyL,EAAU,IAAIZ,GAAclM,EAAOqB,SAGhCyL,GACHrG,GAAIxH,MAAM,wCAAwC,GAG7C6N,CACT,EAACD,EASME,oBAAP,SAA2BzQ,GAKzB,IAJA,IAI6B+M,EjC9CV1R,EiC0CbsV,EAAM,GAIZ3D,EAAAC,EAHcjN,EAAQiM,cAAc,SACjBS,iBAAiB,SAEPK,EAAAC,KAAAG,MAAE,CAI7B,QAAwBI,EAFlBqD,EAAY,GAElBpD,EAAAP,EAJYF,EAAAzV,MACqBoV,iBAAiB,SAG1Ba,EAAAC,KAAAL,MAAE,CAAA,IAAfhR,EAAIoR,EAAAjW,MAGgB,IAA3B6E,EAAK7C,WAAWrG,QAChBkJ,EAAK7C,WAAW,GAAGP,WAAa8X,KAAKC,UAErCF,EAAU/b,MjCxDGwG,EiCwDSc,EAAKzC,WjCvDrB,IAAIqX,WAAYC,gBAAgB3V,EAAS,aAC1C4V,gBAAgBC,ciCwDrBN,EAAU/b,KAAKyG,EAAKa,EAAKzC,WAE5B,CAEDiX,EAAI9b,KAAK+b,EACV,CAED,OAAOD,CACT,EAACJ,CAAA,4GC6CA,SAAAY,GAAAC,EAAAxZ,EAAAN,GAOD,IAAA8Z,EAAA9e,EAAU,CACR,GAAAgF,aAAc+Z,GAAA,OAAS/e,EAWtB,YADCgF,EAAArF,EAAAkf,GAAUzW,UAAW0W,EAAAxZ,IATf,EAARA,MAA6DN,EAAAhF,GAI7DgF,EAAIA,EAAQ3E,EAmBZ,GAAA2E,GAAYA,EAAAmD,mBAERA,QAAWC,KAAA,KAAA0W,EAAAxZ,GAAAuZ,GAAAzW,KAAA,KAAA0W,EAAA,UAIdA,EAAAze,EAAA2E,EAED,IAAAga,IAAiBrf,EACfqf,GACDA,EAAAF,EACC,CAEE,CAAA,IA7JQC,gBAAc,WAC9B,SAAAA,IAAS,CA0GJ,OAvECA,EAAA7Z,eAAmD,SAAA+Z,EAAAC,GAEtC,IAAAvS,EAGT,IAAAoS,EAEAzZ,EAAkCrD,KAAsBjC,KAI/BsF,EAAA,CAEjC,IAAA6Z,EAAyD,EAAA7Z,EAAA2Z,EAAAC,EACvD,GAAAC,EAAQ,CAER,IACEN,GAAAlS,EAAM,EAAAwS,EAAeld,KAAG5B,GACzB,CAAA,MAAAP,GACF+e,GAAAlS,EAAA,EAAA7M,EAKD,CACE,OAAA6M,CACA,CACF,OAAC1K,YAaGA,KAAAtC,EAAA,SAAWyJ,GACZ,IAED,IAAApE,EAAaoE,EAAK/I,EACV,EAAN+I,EAAApJ,EACD6e,GAAAlS,EAAA,EAAAsS,EAAAA,EAAAja,GAAAA,GAEGka,KACIvS,EAAA,EAAMuS,EAAgBla,IAI9B6Z,GAAAlS,EAAa,EAAA3H,EAGb,CAAA,MAAIlF,GAEJ+e,GAAAlS,OAQF,EAIMA,GAEHoS,CAAC,CA3GwB,GA8JjB,SAAAK,GAAAC,GAEL,OAAAA,aAAWN,IAA6B,EAAlBM,EAAQrf,MA5HhCsf,gBAAY,SAAAnT,GAahB,SAAAmT,EAAYC,OAA6CnW,EAKtD,OAJDA,EAAA+C,EAAAtL,KAAAoB,OAAOA,MAZQud,OAGb,IAAIC,IAA2DrW,EAE3DsW,MAA8B,IAAID,IAAsBrW,EAIxDuW,2BAA6B,EAK/BJ,GACFA,EAAMxZ,QAAQ,SAAC6Z,GAAI,OAAKxW,EAAKyJ,SAAS+M,EAAK,GAC5CxW,CACH,CAnBgBE,EAAAgW,EAAAnT,GAmBf,IAAA5C,EAAA+V,EAAApa,UAiIA,OAjIAqE,EAKDsW,WAAA,WACE5d,KAAKyd,MAAQ,IAAID,IACjBxd,KAAK0d,2BAA6B,CACpC,EAACpW,EAQDsJ,SAAA,SACEP,EACAwN,GAEA,QAFA,IAAAA,IAAAA,EAAmB,OAEdxN,EACH,MAAMsB,MAAM,4BAGd,GAAuB,OAAnBtB,EAAUtR,KACZ,MAAM4S,MAAM,iCAGd,GAAI3R,KAAK8d,uBAAuBzN,EAAU9J,KAAO,EAC/C,MAAMoL,MAAsBtB,gBAAAA,EAAU9J,GAAE,uBAS1C,OALA8J,EAAUtH,GAAG,eAAgB/I,KAAK+d,sBAAsB5X,KAAKnG,OAE7DA,KAAKge,uBAAuB3N,EAAWwN,GACvC7d,KAAKie,gBAAgB5N,GAEdA,CACT,EAAC/I,EAOD4W,YAAA,SACE7N,EACAwN,QAAAA,IAAAA,IAAAA,EAAmB,MAEnB,IACE,OAAO7d,KAAK4Q,SAASP,EAAWwN,EACjC,CAAC,MAAO3c,IAKX,EAACoG,EAODuJ,WAAA,SAAiBR,GACf,GAAKA,IAC8C,IAA/CrQ,KAAK8d,uBAAuBzN,EAAU9J,IAA1C,CAEA,IAAM4X,EAAWne,KAAKud,OAAO7W,IAAI2J,EAAUtR,MAEvCof,GAAYA,EAASzf,SACvBsB,KAAKud,OAAOtV,IACVoI,EAAUtR,KACVof,EAAShV,OAAO,SAACiV,GAAS,OAAAA,GAAQ/N,CAAS,IAE7CrQ,KAAKoJ,KAAK,UAAWiH,GAPvB,CASF,EAAC/I,EAQO0W,uBAAA,SACN3N,EACAwN,GAEA,IAAIM,EAAWne,KAAKud,OAAO7W,IAAI2J,EAAUtR,MAEzC,IAAKof,EAAU,CACb,IAAME,EAAa,GACnBre,KAAKud,OAAOtV,IAAIoI,EAAUtR,KAAMsf,GAChCF,EAAWE,CACZ,CAED,GAAiB,OAAbR,GAAqBA,EAAW,EAClCM,EAAS7d,KAAK+P,QAEd,GAAK8N,EAASN,GAGP,CAEL,IAAMS,EAAQH,EAAShc,MAAM,EAAG0b,EAAW,GACrCU,EAASJ,EAAShc,MAAM0b,EAAW,GAEzC7d,KAAKud,OAAOtV,IAAIoI,EAAUtR,KAAMuf,EAAM7T,OAAO4F,GAAW5F,OAAO8T,GAChE,MAPCJ,EAASN,GAAYxN,CAS3B,EAAC/I,EA0BDkX,eAAA,SAAezf,GACb,OAAWiB,KAACsd,MAAMnU,OAAO,SAACkB,GAAY,OAAAA,EAAQtL,OAASA,CAAI,EAC7D,EAACuI,EAKOmX,wBAAA,WACN,OAAO9U,OAAOC,KAAK3C,GAChBkC,OAAO,SAAClK,GAAG,OAAMuS,MAAMC,OAAOxS,GAAK,GACnC8I,IAAI,SAAC9I,GAAG,OAAKwS,OAAOxS,EAAI,EAC7B,EAACqI,EAQK+C,QAAOA,SAACvF,GAAQ,QAAA4Z,EAAA,SAAAC,GAqCpB,OALAC,EAAKlB,0BAA4BJ,EAAM5e,OAGvCkgB,EAAKxV,KAAK,eAAgB0C,GAEnBA,CAAK,EAAA8S,EApCsB5e,KAA5B0d,EAA4BkB,EAAKlB,0BACjCJ,EAAQsB,EAAKtB,MAEfxR,EAAOhH,EAAK+Z,4hBAkCjB,SAAAC,EAAAzS,EAAA0S,GAOO,IAAAlC,EAAAzB,EAAA3d,GAAA,SACN,SAAAuhB,SAQM,OAAAvhB,EAAAqhB,EAAApgB,QAKN,MAFM2N,EAAA5O,KAE4BiN,EAAAxE,KAAA,CAChC,IAAAiX,GAAKzS,GAKP,YADMA,EAAAxE,KAAA8Y,EAAsB5D,IAASA,EAAAwB,GAAAzW,KAAA,KAAA0W,EAAA,IAAAC,GAAA,KAHpCpS,EAAAA,EAAAtM,CAMD,CAGMye,EACND,GAAIC,EAAC,EAAAnS,GAELmS,EAAAnS,CAEH,CAAA,MAAA7M,GAED+e,GAAAC,MAAwB,IAAAC,IAAA,EAAAjf,yCAvEhBohB,CACsB3B,EAAK,SAAlBjN,GACT,IAAM6O,EAAiBN,EAAKd,uBAAuBzN,EAAU9J,IAAI4Y,EAE7DD,WAAAA,GAAAA,GAAkBxB,SAAyBzX,QAAAG,QAK/BiK,EAAUhG,QAAQyB,IAAK5F,KAAAkZ,SAAAA,GACrCR,EAAKnB,MAAMxV,IAAIoI,EAAU9J,GADzBuF,EAAIsT,EAC+B,GAGnCtT,EAAO8S,EAAKnB,MAAM/W,IAAI2J,EAAU9J,IAT9B2Y,MASuCC,GAAAA,EAAAjZ,KAAA,OAAAiZ,EAAAjZ,KAAA,WAAA,EAE5C,4DAjBamZ,CAEZ,EAgBH,SAAQxhB,GAMP,MALA+X,GAAIxH,MAAMvQ,GAEV+gB,EAAKxV,KAAK,QAAS0C,GAGbjO,CACP,GAAA,OAAAoI,QAAAG,QAAAyY,GAAAA,EAAA3Y,KAAA2Y,EAAA3Y,KAAAwY,GAAAA,IASH,CAAC,MAAA7gB,GAAA,OAAAoI,QAAAmV,OAAAvd,EAAA,CAAA,EAAAyJ,EAOOwW,uBAAA,SAAuBwB,GAC7B,OAAOtf,KAAKsd,MAAMiC,UAAU,SAAClhB,GAAC,OAAKA,EAAEkI,IAAM+Y,CAAW,EACxD,EAAChY,EAOOkY,sBAAA,SACNnP,GAEA,IAAM6O,EAAiBlf,KAAK8d,uBAAuBzN,EAAU9J,IAEzDvG,KAAK0d,0BAA4BwB,IACnClf,KAAK0d,0BAA4BwB,EAErC,EAAC5X,EAEOyW,sBAAA,SAAsB1N,GAC5BrQ,KAAKwf,sBAAsBnP,GAC3BrQ,KAAKoJ,KAAK,gBACVpJ,KAAKoJ,KAAK,UAAWiH,EACvB,EAAC/I,EAEO2W,gBAAA,SAAgB5N,GACtBrQ,KAAKwf,sBAAsBnP,GAC3BrQ,KAAKoJ,KAAK,iBACVpJ,KAAKoJ,KAAK,UAAWiH,EACvB,EAAC5J,EAAA4W,EAAA,CAAA,CAAApe,IAAA,QAAAyH,IAlHD,WAGE,IAFA,IAEiD8R,EAF7C8E,EAA+C,GAEnD7E,EAAAC,EAAmB1Y,KAAKye,6BAAyBjG,EAAAC,KAAAG,MAAE,CAAA,IAC3CuF,EAAWne,KAAKud,OAAO7W,IADhB8R,EAAAzV,OAGTob,GAAYA,EAASzf,SACvB4e,EAAQA,EAAM7S,OAAO0T,GAExB,CAGD,OAAOb,EAAMnU,OAAO,SAACpL,GAAC,OAAKA,CAAC,EAC9B,KAACsf,CAAA,CApJe,CAAQ1U,IC3BpB8W,gBAAiB,SAAA1U,GAAA0U,SAAAA,WAAA1U,EAAAzB,MAAA7K,KAAAA,iBAMpBghB,OANoBpY,EAAAoY,EAAA1U,GAAA0U,EAAAxc,UAQf0H,SAAQA,SAACkR,GAAS,IACL5V,OAAAA,QAAAG,QAAJpG,KAAKhB,MAAMid,QAAQvV,IAAImV,GACtC,CAAC,MAAAhe,UAAAoI,QAAAmV,OAAAvd,KAAA4I,EAAAgZ,EAAAxgB,CAAAA,CAAAA,WAAAyH,IAND,WACE,OAAOO,EAAcyY,SACvB,KAACD,CAAA,CANoB,CAAQxV,ICPzB0V,gBAA0B,SAAA5U,YAAA4U,IAAA,OAAA5U,EAAAzB,WAAA7K,YAAAuB,IAAA,CAM7B2f,OAN6BtY,EAAAsY,EAAA5U,GAAA4U,EAAA1c,UAQ9B0H,SAAA,SAASiV,GACP,IAAMxU,EAAUlD,GAAQM,UAAUoX,EAAc9a,MAKhD,OAFAsG,EAAQ1M,OAASkhB,EAAc3M,MAExB7H,CACT,EAAC3E,EAAAkZ,EAAA,CAAA,CAAA1gB,IAAAyH,OAAAA,IAXD,WACE,OAAOO,EAAc4Y,WACvB,KAACF,CAAA,CAN6B,CAAQ1V,ICOlC6V,gBAAgB,SAAA/U,GAAA+U,SAAAA,IAAA/U,OAAAA,EAAAzB,MAAAtJ,KAAAvB,YAAAuB,IAAA,CAMnB8f,OANmBzY,EAAAyY,EAAA/U,GAAA+U,EAAA7c,UAQpB0H,SAAA,WACE,OAAOhB,OAAOoW,QAAQ/f,KAAKhB,MAAMghB,sBAC9B7W,OAAO,SAAA8W,GAAc,MAAe,mBAArBA,EAAM,EAAyB,GAC9CpU,OACC,SAACqU,EAAGC,GAAA/H,IAAAA,SAAOvN,EAAA,GAAYqV,IAAG9H,EAAA,CAAA,GAAlB+H,EAAE/hB,IAAC+hB,KAAuB/H,GAAG,EACrC,CAAE,EAER,EAAC3R,EAAAqZ,EAAA,CAAA,CAAA7gB,IAAA,OAAAyH,IAXD,WACE,OAAOO,EAAcmZ,SACvB,KAACN,CAAA,CANmB,CAAQ7V,ICSxBoW,gBAAkCtV,SAAAA,YAAAsV,IAAA,OAAAtV,EAAAzB,WAAA7K,YAAAuB,IAAA,CAAAqH,EAAAgZ,EAAAtV,GAAA,IAAAzD,EAAA+Y,EAAApd,iBAAAqE,EAQ9BgZ,SAAA,SAASxb,GACf,IAAKA,IAASA,EAAKpG,OACjB,MAAO,GAGT,IAAKsB,KAAKhB,MAAMyR,SAAWzQ,KAAKhB,MAAMyR,OAAOvF,QAC3C,OAAOpG,EAGT,IAAMoG,EAAU+L,GAAO4D,YAAY7a,KAAKhB,MAAMyR,OAAOvF,SAGrD,OAAIpG,EAAK,aAAc5G,MACb4G,EAAoBiD,IAAI,SAACO,GAC/B,IAAIiY,EAAM,EAEV,OAAOrV,EAAQnD,IAAI,SAAC8Q,EAAQpb,GAE1B,YAAoB2S,IAAhByI,EAAO/T,MACTyb,IAE2B,mBAAhB1H,EAAO/T,KACT+T,EAAO/T,KAAKwD,GAEZuQ,EAAO/T,MAIXwD,EAAI7K,EAAI8iB,EACjB,EACF,GAIqB,iBAAZzb,EAAK,IAAqBA,EAAK,aAAc5G,MAoBjD,GAnBG4G,EAAqBiD,IAAI,SAACO,GAAG,OACnC4C,EAAQnD,IAAI,SAAC8Q,EAAQpb,GACnB,YAAoB2S,IAAhByI,EAAO/T,KACkB,mBAAhB+T,EAAO/T,KACT+T,EAAO/T,KAAKwD,GAEZuQ,EAAO/T,KAEP+T,EAAOtS,GACT+B,EAAIuQ,EAAOtS,KAElBkT,GAAOrL,MAAK,0DAA2D3Q,EACO,qGAGlF,EAAE,EAKR,EAAC6J,EAEDqD,SAAA,SAAS6V,GACP,MAAO,CACL1b,KAAM9E,KAAKsgB,SAASE,EAAgB1b,MACpCmO,MAAOuN,EAAgBvN,MAE3B,EAACxM,EAAA4Z,EAAA,CAAA,CAAAphB,IAAA,OAAAyH,IAlED,WACE,OAAOO,EAAc4Y,WACvB,KAACQ,CAAA,CANqCtV,CAAQd,ICX1CwW,gBAAa,WAAA,SAAAA,KAmBhBA,OAnBgBA,EACVtG,iBAAP,SAAwBhL,GACtB,IAAMwB,EAAW,IAAI0M,GAgBrB,OAdIlO,EAAO8M,mBAAmBZ,IAC5B1K,EAASC,SACP,IAAIkP,GAAgB,CAClBE,qBAAsB7Q,EAAOqB,UAKnCG,EAASC,SAAS,IAAI6O,GAAiB,CAAExD,QAAS9M,EAAO8M,WACzDtL,EAASC,SACP,IAAIyP,GAAkC,CAAE5P,OAAQtB,EAAOsB,UAEzDE,EAASC,SAAS,IAAI+O,IAEfhP,CACT,EAAC8P,CAAA,CAnBgB,GCTNC,GAKX,SAAYC,GAAexZ,IAAAA,EAJnB9D,KAAAA,KAAAA,kBACAyF,UAAiD,GACjD8X,KAAAA,eAAgB,EAAK5gB,KAM7B6P,SAAW,WAAM,OAAA1I,EAAK9D,KAAK,OAC3Bwd,aAAe,kBAAM1Z,EAAK2B,SAAS,EAEnCyH,KAAAA,SAAW,SAACuQ,GACV,GAAuB,mBAAZA,EACT,MAAM,IAAInP,MAAM,6BAClB,GAAIxK,EAAKyZ,cACP,MAAM,IAAIjP,MAAM,qCAElBxK,EAAKyZ,eAAgB,EAErB,IAAMG,EAAY5Z,EAAK9D,MACvB,IACE8D,EAAK9D,MAAQyd,EAAQ3Z,EAAK9D,MAC3B,CAAA,QACC8D,EAAKyZ,eAAgB,CACtB,CAED,IAAAnI,IAAqCD,EAArCC,EAAAC,EAAuBvR,EAAK2B,aAAS0P,EAAAC,KAAAG,OACnC5P,EADiBwP,EAAAzV,OACRoE,EAAK9D,MAAO0d,GAGvB,OAAO5Z,EAAK9D,KACd,EAACrD,KAEDgQ,UAAY,SAAChH,GACX,GAAwB,mBAAbA,EACT,UAAU2I,MAAM,8BAGlB,OADAxK,EAAK2B,aAAS2B,OAAOtD,EAAK2B,UAAS,CAAEE,IAC9B,WAAA,OACJ7B,EAAK2B,UAAY3B,EAAK2B,UAAUK,OAAO,SAAC6X,GAAQ,OAAAA,IAAQhY,CAAQ,EAAC,CACtE,EAnCEhJ,KAAKqD,MAAQsd,CACf,ECYWzT,G7CnBkvS,SAAW7P,EAAEC,GAAG,IAAIC,EAAE,CAACiC,IAAIlC,EAAE,OAAOO,IAAIuB,G6CmB5vS,K7CnBiwS6hB,SAAS,SAAS5jB,EAAEC,GAAG,OAAOD,EAAEsB,SAASrB,EAAE,EAAE4jB,SAAS,SAAS7jB,GAAG,IAAIE,EAAEC,EAAE,OAAOwC,KAAKiE,kBAAkB1G,EAAE,IAAIC,EAAE,CAAE,GAAEF,GAAG0C,KAAKA,KAAKiE,gBAAgB,WAAW,OAAOzG,CAAC,EAAEwC,KAAK6D,sBAAsB,SAASxG,GAAG2C,KAAKhB,MAAM+D,QAAQ1F,EAAE0F,OAAOxF,EAAE+G,KAAK,SAASjH,GAAGA,EAAEiC,KAAI,EAAGe,EAAEhD,EAAE,EAAE,EAAE2C,KAAKoD,IAAI,SAAS/F,GAAGE,EAAE+C,KAAKjD,GAAG,IAAIC,EAAED,EAAEiI,qBAAqBjI,EAAEiI,qBAAqB,WAAW/H,EAAEoZ,OAAOpZ,EAAE4G,QAAQ9G,GAAG,GAAGC,GAAGA,EAAEsB,KAAKvB,EAAE,CAAC,GAAGA,EAAEsB,QAAQ,GAAG,OAAOpB,EAAE2jB,SAAS9hB,GAAG7B,EAAE0jB,SAASne,YAAYvF,CAAC,C6CmB7tT4jB,GAuEhBC,gBACX,WAAA,SAAAA,IACEzX,OAAO0X,OAAOrhB,KAAMohB,EAAOE,gBAC7B,CAAC,IAAAha,EAAA8Z,EAAAne,UAuGA,OAvGAqE,EAMD+Z,OAAA,SAAOE,GACL,OAAO5X,OAAO0X,OAAOrhB,KAAMuhB,EAC7B,EAACja,EAODF,OAAA,SAAOma,GACL,OAAKA,GAELvhB,KAAKqhB,OACHD,EAAOI,kBAAiB3W,EAAA,GACnB7K,KACAuhB,WALoBvhB,IAU7B,EAACohB,EAEME,cAAP,WACE,MAAO,CACL7R,MAAO,IAAIiR,GAAM,CACf/E,OAAQve,EAAOqkB,KACfhR,YAAQL,EACRtL,KAAM,OAER2R,OAAQ,IAAIJ,GACZvB,S7CjI0tB,CAAC1P,QAAQ,M6CkInuBoP,MAAO,OACPkN,OAAQ,OACRC,qBAAsB,IACtBrK,WAAW,EACXvV,MAAO,CAAA,EACP6J,UAAW,GAEf,EAACwV,EAEMI,kBAAP,SAAyBD,GACvB,IAAMpS,GAAS,IAAIiS,GAASC,OAAOE,GAuDnC,MApDkC,kBAAvBA,EAAc7gB,MAAsB6gB,EAAc7gB,MAC3DyO,EAAOkS,OAAO,CACZ3gB,KAAM,CACJkhB,aAAa,KAMnBzS,EAAOkS,OAAO,CACZ5Q,OAAQwG,GAAOkD,iBAAiBhL,KAGlCA,EAAOkS,OAAO,CACZpF,QAASD,GAAa7B,iBAAiBhL,KAGzCA,EAAOkS,OAAO,CACZ1Q,SAAU8P,GAActG,iBAAiBhL,KAI3CA,EAAOkS,OAAO,CACZhS,WAAY,IAAIhB,GAAWc,EAAOb,YAGhCa,EAAO/B,SAET+B,EAAOsH,OAAOC,OAAO,UACrBvH,EAAOsH,OAAOD,IAAI,CAChBjQ,GAAI,SACJyO,SAAUW,EAAcA,eAACsB,OACzBD,UAAW9G,MAIXf,EAAO3B,aAET2B,EAAOsH,OAAOC,OAAO,cACrBvH,EAAOsH,OAAOD,IAAI,CAChBjQ,GAAI,aACJyO,SAAUW,iBAAekM,OACzB7K,UAAWjF,MAKX5C,EAAOmH,UACTnH,EAAOmH,QAAQxS,QAAQ,SAACzF,GAAC,OAAK8Q,EAAOsH,OAAOD,IAAInY,EAAE,GAClD8Q,EAAOmH,QAAQxS,QAAQ,SAACzF,GAAO8Q,EAAOsH,OAAOC,OAAOrY,EAAEkI,IAAI4I,EAAOsH,OAAOD,IAAInY,EAAG,IAG1E8Q,CACT,EAACiS,CAAA,CAzGD,GCjFI,SAAUU,GACd9iB,GAQA,IAsCE6Z,EAtCI1J,EAASnC,KAiDf,OACE/O,EAAA4M,KAAAA,GACE2I,KAAMxU,EAAMwU,KACZuO,QAAS/iB,EAAM+iB,QACf,iBAAgB/iB,EAAM6Z,QAAU7Z,EAAM6Z,OAAOtS,GAC7CqF,UAAWI,GACTJ,GAAU,MACV5M,EAAM4M,UACNuD,EAAOvD,UAAUoW,IAEnBjgB,MAAK8I,EACA7L,CAAAA,EAAAA,EAAM+C,MACNoN,EAAOpN,MAAMigB,IAElBlO,QAxCgB,SAClBjW,GAEImB,EAAMijB,aAEV9S,EAAO+S,aAAa9Y,KAClB,YACAvL,EACAmB,EAAM4I,KACN5I,EAAM6Z,OACN7Z,EAAMsJ,IAEV,IAGEuQ,EA0B0B7Z,EAAM6Z,QAtBC,mBAAtBA,EAAO7T,WACT6T,EAAO7T,WAAWhG,EAAM4I,KAAK9C,KAAM9F,EAAMsJ,IAAKtJ,EAAM6Z,QAEpDA,EAAO7T,WALI,CAAA,GArChBhG,EAAM6Z,QAA4C,mBAA3B7Z,EAAM6Z,OAAOsJ,UAC/BnjB,EAAM6Z,OAAOsJ,UAAUnjB,EAAM4I,KAAK9C,KAAM9F,EAAMsJ,IAAKtJ,EAAM6Z,QAG9D7Z,EAAM6Z,QAAU7Z,EAAM6Z,OAAOpC,OAE7BxY,EAAC6Y,GACCC,CAAAA,SAAU/X,EAAM6Z,OAAOtS,GACvBvH,MAAO,CACL6Z,OAAQ7Z,EAAM6Z,OACdjR,KAAM5I,EAAM4I,KACZU,IAAKtJ,EAAMsJ,OAMZtJ,EAAM4I,KAAK9C,KAiDtB,CC7EgB,SAAAsd,GAAGpjB,GAKjB,IAAMmQ,EAASnC,KACTyD,EAASf,GAAY,SAACrM,GAAK,OAAKA,EAAMoN,MAAM,GAmClD,OACExS,EAAA,KAAA,CACE2N,UAAWI,GAAUJ,GAAU,MAAOuD,EAAOvD,UAAUyW,IACvDvO,QAxBgB,SAClBjW,GAEImB,EAAMsjB,YACVnT,EAAO+S,aAAa9Y,KAAK,WAAYvL,EAAGmB,EAAMsJ,IAChD,GAGMtJ,EAAML,SACDK,EAAML,SAGRK,EAAMsJ,IAAIZ,MAAMK,IAAI,SAACH,EAAYnK,GACtC,IAAMob,EAzBQ,SAACtN,GACjB,GAAIkF,EAAQ,CACV,IAAM+J,EAAOvD,GAAO4D,YAAYpK,EAAOvF,SAEvC,GAAIsP,EACF,OAAOA,EAAKjP,EAEf,CAED,OACF,IAAA,CAemBgX,CAAU9kB,GAEzB,OAAIob,GAAUA,EAAOrN,OAAe,KAE7BvN,EAAC6jB,GAAG7iB,CAAAA,IAAK2I,EAAKrB,GAAIqB,KAAMA,EAAMU,IAAKtJ,EAAMsJ,IAAKuQ,OAAQA,GAC/D,GAWJ,UCtDgB2J,GAAWxjB,GAKzB,OACEf,EAACmkB,IAAGE,YAAY,GACdrkB,EAAC6jB,GACCtO,CAAAA,KAAK,QACLuO,QAAS/iB,EAAM+iB,QACfE,aAAa,EACbra,KAAM,IAAIZ,EAAKhI,EAAM0P,SACrB9C,UAAWI,GACTJ,GAAU,WACV5M,EAAM4M,UAAY5M,EAAM4M,UAAY,QAK9C,UCfgB6W,KACd,IAAMtT,EAASnC,KACTlI,EAAO4K,GAAY,SAACrM,GAAU,OAAAA,EAAMyB,IAAI,GACxC6W,EAASjM,GAAY,SAACrM,GAAK,OAAKA,EAAMsY,MAAM,GAC5ClL,EAASf,GAAY,SAACrM,GAAK,OAAKA,EAAMoN,MAAM,GAC5CvP,EAAIgO,KAEJwT,EAAe,WACnB,OAAIjS,EACKA,EAAOkS,eAAejkB,OAExB,CACT,EAEA,OACET,EAAA,QAAA,CAAO2N,UAAWI,GAAUJ,GAAU,SAAUuD,EAAOvD,UAAUgX,QAC9D9d,GACCA,EAAKqD,KAAKJ,IAAI,SAACO,GACb,OAAOrK,EAACmkB,GAAE,CAACnjB,IAAKqJ,EAAI/B,GAAI+B,IAAKA,GAC/B,GAEDqT,IAAWve,EAAOylB,WAAa/d,GAAwB,IAAhBA,EAAKpG,SAC3CT,EAACukB,IACC9T,QAASxN,EAAE,WACX6gB,QAASW,IACT9W,UAAWI,GAAUJ,GAAU,WAAYuD,EAAOvD,UAAUsC,WAI/DyN,IAAWve,EAAO0lB,UAAYhe,GAAwB,IAAhBA,EAAKpG,QAC1CT,EAACukB,GAAU,CACT9T,QAASxN,EAAE,kBACX6gB,QAASW,IACT9W,UAAWI,GACTJ,GAAU,YACVuD,EAAOvD,UAAUmX,YAKtBpH,IAAWve,EAAOuU,OACjB1T,EAACukB,GAAU,CACT9T,QAASxN,EAAE,SACX6gB,QAASW,IACT9W,UAAWI,GAAUJ,GAAU,SAAUuD,EAAOvD,UAAUwC,SAKpE,CCnDiC,IAW3B4U,gBAAWjY,SAAAA,YAAAiY,IAAA,OAAAjY,EAAAzB,WAAA7K,YAAAuB,IAAA,CAAAqH,EAAA2b,EAAAjY,GAAA,IAAAzD,EAAA0b,EAAA/f,iBAAAqE,EACLiD,cAAA,WACR,QAA0CiO,EAA1CC,EAAAC,EAAwB1Y,KAAKhB,MAAMkM,WAAOsN,EAAAC,KAAAG,MAAE,CAAjC,IAAAqK,EAASzK,EAAAzV,WACUqN,IAAxB6S,EAAUC,YACZD,EAAUC,UAAY,GAGI,IAAxBD,EAAUC,YAA4C,IAAzBD,EAAUC,WACzCtN,GAAIxH,gCAAgC6U,EAAUC,UAEjD,CACH,EAAC5b,EAMO6b,QAAA,SAAQC,EAAcC,GAC5B,OAAID,EAAQC,EAEX,EAAUD,EAAQC,GACT,GAIZ,EAAC/b,EAEOgc,eAAA,SAAetlB,EAAQ+B,GAG7B,IAFA,IAEuCiZ,EAFnCuK,EAAM,EAEVtK,EAAAP,EAAqB1Y,KAAKhB,MAAMkM,WAAO8N,EAAAC,KAAAL,MAAE,CAA9B,IAAAC,EAAMG,EAAAjW,MACf,GAAY,IAARwgB,EAUF,MATA,IAAMH,EAAQplB,EAAE0J,MAAMmR,EAAOhR,OAAO/C,KAC9Bue,EAAQtjB,EAAE2H,MAAMmR,EAAOhR,OAAO/C,KAGlCye,GAD4B,mBAAnB1K,EAAOsK,QACTtK,EAAOsK,QAAQC,EAAOC,GAASxK,EAAOqK,UAEtCljB,KAAKmjB,QAAQC,EAAOC,GAASxK,EAAOqK,SAKhD,CAED,OAAOK,CACT,EAACjc,EAESqD,SAAA,SAAS7F,GACjB,IAAM0e,EAAU/Y,GAAAA,OAAO3F,EAAKqD,MAC5Bqb,EAAW9iB,KAAKV,KAAKsjB,eAAend,KAAKnG,OAEzC,IAAMyjB,EAAS,IAAIvb,GAAQsb,GAK3B,OAFAC,EAAO/kB,OAASoG,EAAKpG,OAEd+kB,CACT,EAAChd,EAAAuc,IAAA/jB,IAAA,OAAAyH,IA7CD,WACE,OAAOO,EAAcyc,IACvB,KAACV,CAAA,CAfcjY,CAAQd,ICjBZ0Z,GACX,SACE9b,EACAqb,EACAU,EACAT,GAEF,OAAA,SAAC9f,GAAS,IAAAwgB,EACJ3Y,EAAoB,OAAV2Y,EAAAxgB,EAAM3C,OAANmjB,EAAY3Y,QACtB7H,EAAM3C,KAAKwK,QAAQnD,IAAI,SAACxH,GACtB,OAAAsK,KAAYtK,EACd,GACA,GACEujB,EAAQ5Y,EAAQxM,OAChBma,EAAS3N,EAAQqL,KAAK,SAAChW,GAAC,OAAKA,EAAEsH,QAAUA,CAAK,GAGhD2O,GAAM,EACNuN,GAAQ,EACRrN,GAAS,EACTtP,GAAS,EA8Cb,QAnD0BgJ,IAAXyI,EAwBR+K,GAYuB,IAAtB/K,EAAOqK,UAGTxM,GAAS,EAETtP,GAAS,EAfG,IAAV0c,EACF1c,GAAS,EACA0c,EAAQ,IAGjBC,GAAQ,EACRvN,GAAM,GAvBI,IAAVsN,EAEFtN,GAAM,EACGsN,EAAQ,IAAMF,GAGvBpN,GAAM,EACNuN,GAAQ,GACCD,EAAQ,GAAKF,IAGtBpN,GAAM,GA0BNuN,IAEF7Y,EAAU,IAGRsL,EACFtL,EAAQ5K,KAAK,CACXuH,MAAOA,EACPqb,UAAWA,EACXC,QAASA,SAEF/b,GAAAA,EAAQ,CACjB,IAAMS,EAAQqD,EAAQ/G,QAAQ0U,GAC9B3N,EAAQrD,GAAOqb,UAAYA,CAC5B,MAAM,GAAIxM,EAAQ,CACjB,IAAM7O,EAAQqD,EAAQ/G,QAAQ0U,GAC9B3N,EAAQyL,OAAO9O,EAAO,EACvB,CAED,OAAAgD,EACKxH,CAAAA,EAAAA,GACH3C,KAAM,CACJwK,QAASA,IAGf,CAAC,EAEU8Y,GACX,SAACnc,EAAe+b,EAAgBT,GAAgC,OAAA,SAAC9f,GAC/D,IACMwV,GADUxV,EAAM3C,KAAI+J,GAAAA,OAAOpH,EAAM3C,KAAKwK,SAAW,IAChCqL,KAAK,SAAChW,GAAC,OAAKA,EAAEsH,QAAUA,CAAK,GAEpD,OAOAgD,EAAA,CAAA,EACKxH,EARAwV,EASA8K,GACD9b,EACqB,IAArBgR,EAAOqK,WAAmB,EAAI,EAC9BU,EACAT,EAJCQ,CAKDtgB,GAXGsgB,GAAW9b,EAAO,EAAG+b,EAAOT,EAA5BQ,CAAqCtgB,GAa9C,CAAC,ECjGG4gB,gBAAWlZ,SAAAA,GAAA,SAAAkZ,IAAA,OAAAlZ,EAAAzB,MAAA7K,KAAAA,YAAA6I,IAAAA,CAMd,OANcD,EAAA4c,EAAAlZ,GAAAkZ,EAAAhhB,UAQf0H,SAAA,SAASuB,GACP,IAAMC,EAAU,CAAE,EAUlB,OARInM,KAAKhB,MAAMoN,MACbD,EAAa,IAAInM,KAAKhB,MAAMoN,IAAIF,EAAQE,IAAKpM,KAAKhB,MAAMkM,UAGtDlL,KAAKhB,MAAMqN,OACbF,EAAc,KAAInM,KAAKhB,MAAMqN,KAAKH,EAAQG,KAAMrM,KAAKhB,MAAMkM,UAG7DL,EAAA,CAAA,EACKqB,EACAC,EAEP,EAAC1F,EAAAwd,EAAAhlB,CAAAA,CAAAA,WAAAyH,IAnBD,WACE,OAAOO,EAAcgd,UACvB,KAACA,CAAA,CANclZ,CAAQd,ICmBT,SAAAyZ,GACd1kB,GAKA,IAAMmQ,EAASnC,KACPuD,EAAaf,KAAbe,SACFrP,EAAIgO,KACVS,EAAkCC,GAAS,GAApCsT,EAASvT,EAAA,GAAEuU,EAAYvU,EAC9B,GAAMoJ,EAAa5J,EAAOzO,KACpB2C,EAAQqM,GAAY,SAACrM,UAAUA,EAAM3C,IAAI,GACzCyjB,EAC0B,iBAAvBpL,MAAAA,OAAAA,EAAAA,EAAYvI,QACfvJ,EAAcgd,WACdhd,EAAcyc,KAEdU,EAAmB,WACvB,IAAMC,EAAalV,EAAOwB,SAAS6N,eAAe2F,GAClD,GAAIE,EAAW3lB,OACb,OAAO2lB,EAAW,EAGtB,EAgFA,OAxDAtU,GAAU,WACR,IAAMM,EATwB+T,MAb1BD,IAAkBld,EAAcgd,WACvB,IAAAA,GAAUpZ,EACnBK,CAAAA,QAAS7H,EAAQA,EAAM6H,QAAU,IAC9B6N,EAAWvI,SAIP,IAAAwS,GAAW,CACpB9X,QAAS7H,EAAQA,EAAM6H,QAAU,MAiBnC,OAFAiE,EAAOwB,SAASuN,YAAY7N,qBAEflB,EAAOwB,SAASE,WAAWR,EAAU,CACpD,EAAG,CAAClB,IAKJY,GAAU,WACR,GAAK1M,EAAL,CAEA,IAAMihB,EAAgBjhB,EAAM6H,QAAQqL,KAAK,SAAChW,GAAM,OAAAA,EAAEsH,QAAU7I,EAAM6I,KAAK,GAKrEqc,EAHGI,EAGUA,EAAcpB,UAFd,EALH,CASd,EAAG,CAAC7f,IAEJ0M,GAAU,WACR,IAAMM,EAAY+T,IAEb/T,GACAhN,GAELgN,EAAUjG,SAAS,CACjBc,QAAS7H,EAAM6H,SAEnB,EAAG,CAAC7H,IA0BFpF,EAEE2V,SAAAA,CAAAA,UAAW,EACX,aAAY1S,EAAC,aAA2B,IAAdgiB,EAAkB,OAAS,QACrDxP,MAAOxS,EAAC,aAA2B,IAAdgiB,EAAkB,OAAS,QAChDtX,UAAWI,GACTJ,GAAU,QACVA,GAAU,OAlBS,SAACsX,GACxB,OAAkB,IAAdA,EACK,OACiB,IAAfA,EACF,OAGF,SACT,CAUwBqB,CAAiBrB,IACnC/T,EAAOvD,UAAUlL,MAEnBoT,QAlCoB,SAACjW,GACvBA,EAAE2mB,iBACF3mB,EAAE4mB,kBAEFlU,EACEG,GACE1R,EAAM6I,OACS,IAAfhK,EAAE6mB,UAAqB3L,EAAW6I,YAClC5iB,EAAMmkB,SAGZ,GA0BF,CChJa,IAAAwB,GAAW,SAACC,EAAuBC,GAC9C,IAAIC,OAD0CD,IAAAA,IAAAA,EAAO,KAErD,IAAIE,EAAW3iB,KAAKC,MAEd2iB,EAAU,WACdD,EAAW3iB,KAAKC,MAChBuiB,EAAEtb,WAAAnH,EAAAA,GAAAA,MAAAvD,KAAAH,WACJ,EAEA,OAAO,WAAI,IAAA6L,EAAInI,GAAAA,MAAAvD,KAAAH,WAEPwmB,EADc7iB,KAAKC,MACK0iB,EAE1BE,GAAWJ,EAEbG,EAAO1b,WAAA,EAAIgB,IAGPwa,GACFhY,aAAagY,GAGfA,EAAYze,WAAW,WACrB2e,EAAO1b,WAAIgB,EAAAA,GACXwa,EAAY,IACd,EAAGD,EAAOI,GAEd,CACF,EC7BgB,SAAAC,GAAOlmB,GAIrB,IAAImmB,EAEEC,EAAW,SAACvnB,GAChB,OAAIA,aAAawnB,WACR3f,KAAKyO,MAAMtW,EAAEynB,OAEb5f,KAAKyO,MAAMtW,EAAE0nB,eAAe,GAAGD,MAE1C,EAEME,EAAQ,SAAC3nB,GACbA,EAAE4mB,kBAEF,IAEMgB,EAAc/Q,SAFF1V,EAAM0mB,MAAMtgB,QAESrD,MAAMyS,MAAO,IAAM4Q,EAASvnB,GAEnEsnB,EAASR,GAAS,SAAC9mB,GAAC,OAAK8nB,EAAK9nB,EAAG4nB,EAAY,EAAE,IAE/ChhB,SAASnC,iBAAiB,UAAWsjB,GACrCnhB,SAASnC,iBAAiB,WAAYsjB,GACtCnhB,SAASnC,iBAAiB,YAAa6iB,GACvC1gB,SAASnC,iBAAiB,YAAa6iB,EACzC,EAEMQ,EAAO,SAAC9nB,EAA4B4nB,GACxC5nB,EAAE4mB,kBAEF,IAAMoB,EAAY7mB,EAAM0mB,MAAMtgB,QAE1BqgB,EAAcL,EAASvnB,IAAM6W,SAASmR,EAAU9jB,MAAMuW,SAAU,MAClEuN,EAAU9jB,MAAMyS,MAAWiR,EAAcL,EAASvnB,GAAE,KAExD,EAEM+nB,EAAM,SAANA,EAAO/nB,GACXA,EAAE4mB,kBAEFhgB,SAAShC,oBAAoB,UAAWmjB,GACxCnhB,SAAShC,oBAAoB,YAAa0iB,GAC1C1gB,SAAShC,oBAAoB,YAAa0iB,GAC1C1gB,SAAShC,oBAAoB,WAAYmjB,EAC3C,EAEA,OACE3nB,EACE2N,MAAAA,CAAAA,UAAWI,GAAUJ,GAAU,MAAOA,GAAU,cAChDka,YAAaN,EACbO,aAAcP,EACd1R,QAAS,SAACjW,GAAM,OAAAA,EAAE4mB,iBAAiB,GAGzC,CCjDgB,SAAAuB,GACdhnB,GAMA,IAAMmQ,EAASnC,KACT0Y,EAAQ7S,GAAO,MACrBlD,EAA0BC,GAAS,CAAE,GAA9B7N,EAAK4N,EAAA,GAAEsW,EAAQtW,EACtB,GAAQY,EAAaf,KAAbe,SAERR,GAAU,WAER,GAAIZ,EAAO+W,aAAeR,EAAMtgB,QAAS,CACvC,IAAM+gB,EAAYT,EAAMtgB,QAAQ+gB,UAEP,iBAAdA,GACTF,EAAS,CACPG,IAAKD,GAGV,CACH,EAAG,CAACT,IAEJ,IAiDQ7M,EAjDFwN,EAAa,WAAH,OAAuCjW,MAArBpR,EAAM6Z,OAAOnY,IAAiB,EAE1DoT,EAAU,SACdjW,GAIAA,EAAE4mB,kBAEE4B,KAGF9V,EACE+V,GACEtnB,EAAM6I,OACS,IAAfhK,EAAE6mB,UALavV,EAAOzO,KAKYkhB,YAClC5iB,EAAM6Z,OAAOnY,KAAKyiB,SAI1B,EAwCA,OACEllB,EAAA4M,KAAAA,EACE3L,CAAAA,IAAKwmB,EACL,iBAAgB1mB,EAAM6Z,QAAU7Z,EAAM6Z,OAAOtS,GAC7CqF,UAAWI,GACTJ,GAAU,MACVya,IAAeza,GAAU,KAAM,QAAU,KACzCuD,EAAO+W,YAActa,GAAU,KAAM,SAAW,KAChDuD,EAAOvD,UAAU2O,IAEnBzG,QAASA,EACT/R,MAAK8I,EACAsE,CAAAA,EAAAA,EAAOpN,MAAMwY,GACb,CACDjC,SAAUtZ,EAAM6Z,OAAOP,SACvB9D,MAAOxV,EAAM6Z,OAAOrE,OAEnBzS,EACA/C,EAAM+C,OAEXwkB,UA1DY,SAAC1oB,GAEXwoB,KAA4B,KAAZxoB,EAAE2oB,OACpB1S,EAAQjW,EAEZ,EAsDI4oB,QAASznB,EAAMynB,QAAU,EAAIznB,EAAMynB,aAAUrW,EAC7C2R,QAAS/iB,EAAM+iB,QAAU,EAAI/iB,EAAM+iB,aAAU3R,IAjCzCyI,EAAS7Z,EAAM6Z,QAIY,mBAAtBA,EAAO7T,WACT6T,EAAO7T,WAAW,KAAM,KAAMhG,EAAM6Z,QAEpCA,EAAO7T,WALI,CAAA,EAiCbqhB,IAAe,CAAEzS,SAAU,GAAM,CAAA,GAEtC3V,SAAK2N,UAAWA,GAAU,KAAM,iBAxDRwE,IAAtBpR,EAAM6Z,OAAO5T,KACRjG,EAAM6Z,OAAO5T,UAGMmL,IAAxBpR,EAAM6Z,OAAOpC,OAEbxY,EAAC6Y,IACCC,SAAU/X,EAAM6Z,OAAOpC,OAAOlQ,GAC9BvH,MAAO,CACL6Z,OAAQ7Z,EAAM6Z,UAMf,MA0CJwN,KAAgBpoB,EAACylB,GAAI7Y,EAAA,CAAChD,MAAO7I,EAAM6I,OAAW7I,EAAM6Z,OAAOnY,OAtF7B1B,EAAM6Z,OAAOM,WAwF1Cna,EAAM6I,MAAQsH,EAAOsB,OAAOkS,eAAejkB,OAAS,GAClDT,EAACinB,IAAOrM,OAAQ7Z,EAAM6Z,OAAQ6M,MAAOA,IAI/C,CCzHgB,SAAAgB,KACd,IA8CQve,EA9CFgH,EAASnC,KACTyD,EAASf,GAAY,SAACrM,GAAK,OAAKA,EAAMoN,MAAM,GAkDlD,OAAIA,EAEAxS,EACEgB,QAAAA,CAAAA,IAAKwR,EAAOlK,GACZqF,UAAWI,GAAUJ,GAAU,SAAUuD,EAAOvD,UAAU+a,SATxDxe,EAAO8O,GAAO0B,cAAclI,EAAOvF,UAE7BnD,IAAI,SAACO,EAAKgD,GAAa,OAvBnB,SAAChD,EAAgBgD,EAAkBsb,GAEnD,IAAM/L,EAAc5D,GAAO4D,YAAYpK,EAAOvF,SAE9C,OACEjN,EAACmkB,GACE9Z,KAAAA,EAAIP,IAAI,SAAC6S,GACR,OAAIA,EAAIpP,OAAe,KA7BV,SACnBqN,EACAvN,EACAub,EACAD,GAEA,IAAAE,ECjBY,SACdjO,EACAvN,EACAsb,GAEA,IAAMG,EAAQ9P,GAAO+D,aAAanC,GAC5BmO,EAAgBJ,EAAYtb,EAIlC,MAAO,CACLmb,QAJc/gB,KAAKyO,MAAM6S,EAAgBD,EAAQA,EAAQC,GAKzDjF,QAJelJ,EAAO3N,SAAW2N,EAAO3N,QAAQxM,QAAW,EAM/D,CDGiCuoB,CAC3BpO,EACAvN,EACAsb,GAGF,OACE3oB,EAAC+nB,GAAE,CACDnN,OAAQA,EACRhR,MAAOgf,EACP9E,QAVoB+E,EAAP/E,QAWb0E,QAXWK,EAAPL,SAcV,CAWeS,CACLtM,EACAtP,EACAuP,EAAY1W,QAAQyW,GACpBgM,EAEJ,GAGN,CAKqCO,CAAU7e,EAAKgD,EAAUnD,EAAKzJ,OAAO,IAe5E,IAAA,CEtEa,IAoCA0oB,GAAY,SAAC3W,GAAc,gBAAMpN,GAC5C,OAAAwH,KACKxH,EAAK,CACRoN,OAAQA,GAEZ,CAAC,EAEY4W,GAAc,SAACvS,UAAczR,SAAAA,GACxC,OAAAwH,EACKxH,CAAAA,EAAAA,GACHyR,SAAUA,GAEd,CAAC,WC3CewS,KACd,IAAMnY,EAASnC,KACT8H,EAAWjC,GAAO,MAChBtC,EAAaf,KAAbe,SAMR,OAJAR,GAAU,WACJ+E,GAAUvE,EAASG,GAAoBoE,GAC7C,EAAG,CAACA,IAGF7W,EAAA,QAAA,CACEiB,IAAK4V,EACLtB,KAAK,OACL5H,UAAWI,GAAUJ,GAAU,SAAUuD,EAAOvD,UAAU2b,OAC1DxlB,MAAK8I,EACAsE,CAAAA,EAAAA,EAAOpN,MAAMwlB,MACb,CACD7F,OAAQvS,EAAOuS,UAInBzjB,EAACyoB,GAAK,MACNzoB,EAACwkB,GAAK,MAGZ,UC5BgB+E,KACd,IAAA7X,EAAgCC,IAAS,GAAlC6X,EAAQ9X,EAAA,GAAE+X,EAAW/X,EAC5B,GAAMgY,EAAY9U,GAAO,MACnB1D,EAASnC,KAQf,OANA+C,GAAU,WACkC,IAAtC4X,EAAUviB,QAAQzG,SAASD,QAC7BgpB,GAAY,EAEhB,EAAG,CAACC,IAEAF,EAEAxpB,SACEiB,IAAKyoB,EACL/b,UAAWI,GAAUJ,GAAU,QAASuD,EAAOvD,UAAU6E,QACzD1O,MAAK8I,EAAA,CAAA,EAAOsE,EAAOpN,MAAM0O,SAEzBxS,EAAC6Y,IAAe9B,SAAUW,EAAAA,eAAesB,UAMjD,IAAA,UCxBgB2Q,KACd,IAAMC,EAAYhV,GAAO,MACzBlD,EAAgCC,IAAS,GAAlC6X,EAAQ9X,EAAE+X,GAAAA,EAAW/X,KACtBR,EAASnC,KAQf,OANA+C,GAAU,WACkC,IAAtC8X,EAAUziB,QAAQzG,SAASD,QAC7BgpB,GAAY,EAEhB,EAAG,CAACG,IAEAJ,EAEAxpB,SACEiB,IAAK2oB,EACLjc,UAAWI,GAAUJ,GAAU,UAAWuD,EAAOvD,UAAUkc,QAC3D/lB,MAAK8I,EAAA,CAAA,EAAOsE,EAAOpN,MAAM+lB,SAEzB7pB,EAAC6Y,IAAe9B,SAAUW,EAAAA,eAAekM,UAMjD,IAAA,UChBgBkG,KACd,IAAM5Y,EAASnC,KACPuD,EAAaf,KAAbe,SACFoL,EAASjM,GAAY,SAACrM,GAAK,OAAKA,EAAMsY,MAAM,GAC5C7W,EAAO4K,GAAY,SAACrM,GAAU,OAAAA,EAAMyB,IAAI,GACxCgQ,EAAWpF,GAAY,SAACrM,GAAU,OAAAA,EAAMyR,QAAQ,GAChDsC,E/DpBwtB,CAAChS,QAAQ,M+DsBjuB4iB,EAAkBrD,GAAoB,WAAA,IAC1CpU,EJRgC,SAAClN,GACnC,OAAAwH,EAAA,CAAA,EACKxH,EACHsY,CAAAA,OAAQve,EAAOylB,SAEnB,GIGuC,IAAA1D,0BAE/BlZ,QAAAG,QACiB+I,EAAOwB,SAAStG,WAASnE,cAAtCpB,GACNyL,EJLiB,SAACzL,GAAa,gBAAMzB,GACzC,OAAKyB,EAEL+F,EACKxH,GAAAA,GACHyB,KAAMA,EACN6W,OAAQve,EAAO6qB,SALC5kB,CAOpB,CAAC,CIHcqN,CAAgB5L,IAGzBuB,WAAW,WACTkK,EJ3BkClN,SAAAA,GACxC,OAAIA,EAAMsY,SAAWve,EAAO6qB,OAC1Bpd,EAAA,GACKxH,EACHsY,CAAAA,OAAQve,EAAO0lB,WAIZzf,CACT,EImBM,EAAG,EAAG,4DAT2Bgc,CAE/B,EAQKxhB,SAAAA,GACP+X,GAAIxH,MAAMvQ,GACV0S,EJH8B,SAAClN,GACnC,OAAAwH,EAAA,CAAA,EACKxH,EACHyB,CAAAA,KAAM,KACN6W,OAAQve,EAAOuU,OAEnB,EIFK,GAAA,OAAA1L,QAAAG,QAAA+Y,GAAAA,EAAAjZ,KAAAiZ,EAAAjZ,KAAA,WAAA,QAAA,EACH,CAAC,MAAArI,GAAA,OAAAoI,QAAAmV,OAAAvd,EAAEsR,CAAAA,EAAAA,EAAOwS,sBAwBV,OAtBA5R,GAAU,WASR,OALAQ,EAASG,GAAkBvB,EAAOsB,SAElCuX,IACA7Y,EAAOwB,SAAS5H,GAAG,UAAWif,GAEvB,WAAA,OAAM7Y,EAAOwB,SAAS1H,IAAI,UAAW+e,EAAgB,CAC9D,EAAG,IAEHjY,GAAU,WACJZ,EAAOsB,QAAUkL,IAAWve,EAAO6qB,QAAUnjB,MAAAA,GAAAA,EAAMpG,QAGrD6R,EACEG,GAAkBvB,EAAOsB,OAAO0G,YAAYhI,EAAQ2F,EAAUsC,IAGpE,EAAG,CAACtS,EAAMqK,EAAQiI,IAGhBnZ,EACEuV,MAAAA,CAAAA,KAAK,gBACL5H,UAAWI,GACT,SACAJ,GAAU,aACV+P,IAAWve,EAAOylB,QAAUjX,GAAU,WAAa,KACnDuD,EAAOvD,UAAUyL,WAEnBtV,MAAK8I,KACAsE,EAAOpN,MAAMsV,UACb,CACD7C,MAAOrF,EAAOqF,SAIjBmH,IAAWve,EAAOylB,SACjB5kB,EAAK2N,MAAAA,CAAAA,UAAWA,GAAU,iBAG5B3N,EAACupB,GAED,MAAAvpB,EAAK2N,MAAAA,CAAAA,UAAWA,GAAU,WAAY7J,MAAO,CAAE2f,OAAQvS,EAAOuS,SAC5DzjB,EAACqpB,GAAK,OAGRrpB,EAAC2pB,GAED,MAAA3pB,EAAA,MAAA,CAAKiB,IAAKkY,EAAS7Q,GAAG,cAAcqF,UAAWA,GAAU,UAG/D,CCnFM,IAAAsc,yBAAKhe,GAIT,SAAAge,EAAY/Y,GAAwBhI,IAAAA,EAKD,OAJjCA,EAAA+C,EAAAtL,YAAOoB,MAJFmP,YAAMhI,EAAAA,EACNsP,YAAM,EAIXtP,EAAKgI,QAAS,IAAIiS,IACfC,OAAO,CAAE8G,SAAQC,EAAAjhB,GAAQ+a,aAAYkG,EAAAjhB,KACrCC,OAAO+H,GACVhI,EAAKsP,OAAStP,EAAKgI,OAAOsH,OAAOtP,CACnC,CAVSE,EAAA6gB,EAAAhe,GAUR,IAAA5C,EAAA4gB,EAAAjlB,iBAAAqE,EAEM+gB,aAAA,SAAalZ,GAElB,OADAnP,KAAKmP,OAAO/H,OAAO+H,GAErBnP,IAAA,EAACsH,EAED1C,cAAA,WACE,OAAO3G,EAAEiP,GAAcgU,SAAU,CAC/Bne,MAAO/C,KAAKmP,OACZxQ,SAAUV,EAAE8pB,GAAW,CAAA,IAE3B,EAACzgB,EAQDghB,YAAA,WAaE,OAZKtoB,KAAKmP,QAAWnP,KAAKmP,OAAOkI,WAC/BzB,GAAIxH,MACF,wEACA,GAIJpO,KAAKuoB,UAGLrlB,EAAOlD,KAAK4E,gBAAiB5E,KAAKmP,OAAOkI,WAElCrX,IACT,EAACsH,EAKDihB,QAAA,WACEvoB,KAAKmP,OAAOwB,SAASiN,aAErB1a,EAAO,KAAMlD,KAAKmP,OAAOkI,UAC3B,EAAC/P,EAQDpE,OAAA,SAAOmU,GAKL,OAJKA,GACHzB,GAAIxH,MAAM,oCAAoC,GAG5CiJ,EAAUtS,WAAWrG,OAAS,GAChCkX,GAAIxH,+BACuBiJ,EAAS,2EAGrCrX,OAEDA,KAAKmP,OAAOkI,UAAYA,EACxBnU,EAAOlD,KAAK4E,gBAAiByS,GAG/BrX,KAAA,EAACkoB,CAAA,EA7EgBvf,uGhET0rB,WAAa,MAAM,CAACvD,QAAQ,KAAK"}