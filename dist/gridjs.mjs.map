{"version":3,"file":"gridjs.mjs","sources":["../src/types.ts","../node_modules/.pnpm/preact@10.19.3/node_modules/preact/dist/preact.module.js","../src/pipeline/processor.ts","../src/util/id.ts","../src/base.ts","../src/view/htmlElement.tsx","../src/util/html.ts","../src/cell.ts","../src/row.ts","../src/tabular.ts","../src/util/array.ts","../src/util/eventEmitter.ts","../src/util/deepEqual.ts","../src/pipeline/filter/globalSearch.ts","../src/operator/search.ts","../src/util/className.ts","../src/pipeline/filter/serverGlobalSearch.ts","../node_modules/.pnpm/preact@10.19.3/node_modules/preact/hooks/dist/hooks.module.js","../src/hooks/useConfig.ts","../src/i18n/en_US.ts","../src/i18n/language.ts","../src/view/plugin/search/actions.ts","../src/hooks/useStore.ts","../src/hooks/useSelector.ts","../src/view/plugin/search/search.tsx","../src/util/debounce.ts","../src/pipeline/limit/pagination.ts","../src/pipeline/limit/serverPagination.ts","../src/view/plugin/pagination.tsx","../src/util/width.ts","../src/view/table/shadow.tsx","../src/util/string.ts","../src/util/log.ts","../src/plugin.ts","../src/header.ts","../src/storage/storage.ts","../src/storage/memory.ts","../src/storage/server.ts","../src/storage/storageUtils.ts","../src/pipeline/pipeline.ts","../src/pipeline/extractor/storage.ts","../src/pipeline/transformer/arrayToTabular.ts","../src/pipeline/initiator/server.ts","../src/pipeline/transformer/storageResponseToArray.ts","../src/pipeline/pipelineUtils.ts","../src/state/store.ts","../src/config.ts","../src/view/table/td.tsx","../src/view/table/tr.tsx","../src/view/table/messageRow.tsx","../src/view/table/tbody.tsx","../src/pipeline/sort/native.ts","../src/view/plugin/sort/actions.ts","../src/pipeline/sort/server.ts","../src/view/plugin/sort/sort.tsx","../src/util/throttle.ts","../src/view/plugin/resize/resize.tsx","../src/view/table/th.tsx","../src/view/table/thead.tsx","../src/util/table.ts","../src/view/actions.ts","../src/view/table/table.tsx","../src/view/headerContainer.tsx","../src/view/footerContainer.tsx","../src/view/container.tsx","../src/grid.ts"],"sourcesContent":["import { ComponentChild } from 'preact';\nimport Row from './row';\nimport { SortConfig } from './view/plugin/sort/sort';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { Plugin } from './plugin';\n\nexport type OneDArray<T> = T[];\nexport type TwoDArray<T> = T[][];\n\n/**\n * Table cell types\n */\nexport type TCell = number | string | boolean | ComponentChild | HTMLElement;\n// Array of Arrays\nexport type TDataArrayRow = OneDArray<TCell>;\nexport type TDataArray = OneDArray<TDataArrayRow>;\n// Array of Objects\nexport type TDataObjectRow = { [key: string]: TCell };\nexport type TDataObject = OneDArray<TDataObjectRow>;\n// (Array of Arrays) and (Array of Objects)\nexport type TData = TDataArray | TDataObject;\n\n// Table header cell type\nexport interface TColumn {\n  id?: string;\n  // default data for all columns\n  data?: ((row: TDataArrayRow | TDataObjectRow) => TCell) | TCell;\n  // column label\n  name?: string | ComponentChild;\n  plugin?: Plugin<any>;\n  // column width\n  width?: string;\n  minWidth?: string;\n  sort?: SortConfig;\n  columns?: OneDArray<TColumn>;\n  resizable?: boolean;\n  hidden?: boolean;\n  formatter?: (cell: TCell, row: Row, column: TColumn) => ComponentChild;\n  // HTML attributes to be added to all cells and header of this column\n  attributes?:\n    | ((\n        // this is null when `attributes` is called for a th\n        cell: TCell | null,\n        row: Row | null,\n        column: TColumn,\n      ) => JSXInternal.HTMLAttributes<HTMLTableCellElement>)\n    | JSXInternal.HTMLAttributes<HTMLTableCellElement>;\n}\n\n// Comparator function for the sorting plugin\nexport type Comparator<T> = (a: T, b: T) => number;\n\nexport interface TColumnSort {\n  index: number;\n  // 1 ascending, -1 descending\n  direction?: 1 | -1;\n}\n\n// container status\nexport enum Status {\n  Init,\n  Loading,\n  Loaded,\n  Rendered,\n  Error,\n}\n\nexport type CSSDeclaration = {\n  [key: string]: string | number;\n};\n","var n,l,u,t,i,o,r,f,e,c={},s=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function v(n,l){for(var u in l)n[u]=l[u];return n}function p(n){var l=n.parentNode;l&&l.removeChild(n)}function y(l,u,t){var i,o,r,f={};for(r in u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return d(l,f,i,o,null)}function d(n,t,i,o,r){var f={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=l.vnode&&l.vnode(f),f}function _(){return{current:null}}function g(n){return n.children}function b(n,l){this.props=n,this.context=l}function m(n,l){if(null==l)return n.__?m(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?m(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function w(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!x.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||r)(x)}function x(){var n,u,t,o,r,e,c,s,a;for(i.sort(f);n=i.shift();)n.__d&&(u=i.length,o=void 0,e=(r=(t=n).__v).__e,s=[],a=[],(c=t.__P)&&((o=v({},r)).__v=r.__v+1,l.vnode&&l.vnode(o),L(c,o,r,t.__n,void 0!==c.ownerSVGElement,32&r.__u?[e]:null,s,null==e?m(r):e,!!(32&r.__u),a),o.__.__k[o.__i]=o,M(s,o,a),o.__e!=e&&k(o)),i.length>u&&i.sort(f));x.__r=0}function C(n,l,u,t,i,o,r,f,e,a,h){var v,p,y,d,_,g=t&&t.__k||s,b=l.length;for(u.__d=e,P(u,l,g),e=u.__d,v=0;v<b;v++)null!=(y=u.__k[v])&&\"boolean\"!=typeof y&&\"function\"!=typeof y&&(p=-1===y.__i?c:g[y.__i]||c,y.__i=v,L(n,y,p,i,o,r,f,e,a,h),d=y.__e,y.ref&&p.ref!=y.ref&&(p.ref&&z(p.ref,null,y),h.push(y.ref,y.__c||d,y)),null==_&&null!=d&&(_=d),65536&y.__u||p.__k===y.__k?e=S(y,e,n):\"function\"==typeof y.type&&void 0!==y.__d?e=y.__d:d&&(e=d.nextSibling),y.__d=void 0,y.__u&=-196609);u.__d=e,u.__e=_}function P(n,l,u){var t,i,o,r,f,e=l.length,c=u.length,s=c,a=0;for(n.__k=[],t=0;t<e;t++)null!=(i=n.__k[t]=null==(i=l[t])||\"boolean\"==typeof i||\"function\"==typeof i?null:\"string\"==typeof i||\"number\"==typeof i||\"bigint\"==typeof i||i.constructor==String?d(null,i,null,null,i):h(i)?d(g,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?d(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=n,i.__b=n.__b+1,f=H(i,u,r=t+a,s),i.__i=f,o=null,-1!==f&&(s--,(o=u[f])&&(o.__u|=131072)),null==o||null===o.__v?(-1==f&&a--,\"function\"!=typeof i.type&&(i.__u|=65536)):f!==r&&(f===r+1?a++:f>r?s>e-r?a+=f-r:a--:a=f<r&&f==r-1?f-r:0,f!==t+a&&(i.__u|=65536))):(o=u[t])&&null==o.key&&o.__e&&(o.__e==n.__d&&(n.__d=m(o)),N(o,o,!1),u[t]=null,s--);if(s)for(t=0;t<c;t++)null!=(o=u[t])&&0==(131072&o.__u)&&(o.__e==n.__d&&(n.__d=m(o)),N(o,o))}function S(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=S(t[i],l,u));return l}return n.__e!=l&&(u.insertBefore(n.__e,l||null),l=n.__e),l&&l.nextSibling}function $(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(h(n)?n.some(function(n){$(n,l)}):l.push(n)),l}function H(n,l,u,t){var i=n.key,o=n.type,r=u-1,f=u+1,e=l[u];if(null===e||e&&i==e.key&&o===e.type)return u;if(t>(null!=e&&0==(131072&e.__u)?1:0))for(;r>=0||f<l.length;){if(r>=0){if((e=l[r])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return r;r--}if(f<l.length){if((e=l[f])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return f;f++}}return-1}function I(n,l,u){\"-\"===l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||a.test(l)?u:u+\"px\"}function T(n,l,u,t,i){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||I(n.style,l,\"\");if(u)for(l in u)t&&u[l]===t[l]||I(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/(PointerCapture)$|Capture$/,\"$1\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=Date.now(),n.addEventListener(l,o?D:A,o)):n.removeEventListener(l,o?D:A,o);else{if(i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!==l&&\"height\"!==l&&\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&\"rowSpan\"!==l&&\"colSpan\"!==l&&\"role\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!==l[4]?n.removeAttribute(l):n.setAttribute(l,u))}}function A(n){var u=this.l[n.type+!1];if(n.t){if(n.t<=u.u)return}else n.t=Date.now();return u(l.event?l.event(n):n)}function D(n){return this.l[n.type+!0](l.event?l.event(n):n)}function L(n,u,t,i,o,r,f,e,c,s){var a,p,y,d,_,m,k,w,x,P,S,$,H,I,T,A=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[e=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof A)try{if(w=u.props,x=(a=A.contextType)&&i[a.__c],P=a?x?x.props.value:a.__:i,t.__c?k=(p=u.__c=t.__c).__=p.__E:(\"prototype\"in A&&A.prototype.render?u.__c=p=new A(w,P):(u.__c=p=new b(w,P),p.constructor=A,p.render=O),x&&x.sub(p),p.props=w,p.state||(p.state={}),p.context=P,p.__n=i,y=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=A.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=v({},p.__s)),v(p.__s,A.getDerivedStateFromProps(w,p.__s))),d=p.props,_=p.state,p.__v=u,y)null==A.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==A.getDerivedStateFromProps&&w!==d&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,P),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,P)||u.__v===t.__v)){for(u.__v!==t.__v&&(p.props=w,p.state=p.__s,p.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.forEach(function(n){n&&(n.__=u)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&f.push(p);break n}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,P),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(d,_,m)})}if(p.context=P,p.props=w,p.__P=n,p.__e=!1,$=l.__r,H=0,\"prototype\"in A&&A.prototype.render){for(p.state=p.__s,p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),I=0;I<p._sb.length;I++)p.__h.push(p._sb[I]);p._sb=[]}else do{p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++H<25);p.state=p.__s,null!=p.getChildContext&&(i=v(v({},i),p.getChildContext())),y||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(d,_)),C(n,h(T=null!=a&&a.type===g&&null==a.key?a.props.children:a)?T:[T],u,t,i,o,r,f,e,c,s),p.base=u.__e,u.__u&=-161,p.__h.length&&f.push(p),k&&(p.__E=p.__=null)}catch(n){u.__v=null,c||null!=r?(u.__e=e,u.__u|=c?160:32,r[r.indexOf(e)]=null):(u.__e=t.__e,u.__k=t.__k),l.__e(n,u,t)}else null==r&&u.__v===t.__v?(u.__k=t.__k,u.__e=t.__e):u.__e=j(t.__e,u,t,i,o,r,f,c,s);(a=l.diffed)&&a(u)}function M(n,u,t){u.__d=void 0;for(var i=0;i<t.length;i++)z(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function j(l,u,t,i,o,r,f,e,s){var a,v,y,d,_,g,b,k=t.props,w=u.props,x=u.type;if(\"svg\"===x&&(o=!0),null!=r)for(a=0;a<r.length;a++)if((_=r[a])&&\"setAttribute\"in _==!!x&&(x?_.localName===x:3===_.nodeType)){l=_,r[a]=null;break}if(null==l){if(null===x)return document.createTextNode(w);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",x):document.createElement(x,w.is&&w),r=null,e=!1}if(null===x)k===w||e&&l.data===w||(l.data=w);else{if(r=r&&n.call(l.childNodes),k=t.props||c,!e&&null!=r)for(k={},a=0;a<l.attributes.length;a++)k[(_=l.attributes[a]).name]=_.value;for(a in k)_=k[a],\"children\"==a||(\"dangerouslySetInnerHTML\"==a?y=_:\"key\"===a||a in w||T(l,a,null,_,o));for(a in w)_=w[a],\"children\"==a?d=_:\"dangerouslySetInnerHTML\"==a?v=_:\"value\"==a?g=_:\"checked\"==a?b=_:\"key\"===a||e&&\"function\"!=typeof _||k[a]===_||T(l,a,_,k[a],o);if(v)e||y&&(v.__html===y.__html||v.__html===l.innerHTML)||(l.innerHTML=v.__html),u.__k=[];else if(y&&(l.innerHTML=\"\"),C(l,h(d)?d:[d],u,t,i,o&&\"foreignObject\"!==x,r,f,r?r[0]:t.__k&&m(t,0),e,s),null!=r)for(a=r.length;a--;)null!=r[a]&&p(r[a]);e||(a=\"value\",void 0!==g&&(g!==l[a]||\"progress\"===x&&!g||\"option\"===x&&g!==k[a])&&T(l,a,g,k[a],!1),a=\"checked\",void 0!==b&&b!==l[a]&&T(l,a,b,k[a],!1))}return l}function z(n,u,t){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,t)}}function N(n,u,t){var i,o;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||z(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&N(i[o],u,t||\"function\"!=typeof n.type);t||null==n.__e||p(n.__e),n.__=n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function q(u,t,i){var o,r,f,e;l.__&&l.__(u,t),r=(o=\"function\"==typeof i)?null:i&&i.__k||t.__k,f=[],e=[],L(t,u=(!o&&i||t).__k=y(g,null,[u]),r||c,c,void 0!==t.ownerSVGElement,!o&&i?[i]:r?null:t.firstChild?n.call(t.childNodes):null,f,!o&&i?i:r?r.__e:t.firstChild,o,e),M(f,u,e)}function B(n,l){q(n,l,B)}function E(l,u,t){var i,o,r,f,e=v({},l.props);for(r in l.type&&l.type.defaultProps&&(f=l.type.defaultProps),u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:e[r]=void 0===u[r]&&void 0!==f?f[r]:u[r];return arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),d(l.type,e,i||l.key,o||l.ref,null)}function F(n,l){var u={__c:l=\"__cC\"+e++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,t;return this.getChildContext||(u=[],(t={})[l]=this,this.getChildContext=function(){return t},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(function(n){n.__e=!0,w(n)})},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=s.slice,l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},b.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=v({},this.state),\"function\"==typeof n&&(n=n(v({},u),this.props)),n&&v(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),w(this))},b.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),w(this))},b.prototype.render=g,i=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(n,l){return n.__v.__b-l.__v.__b},x.__r=0,e=0;export{b as Component,g as Fragment,E as cloneElement,F as createContext,y as createElement,_ as createRef,y as h,B as hydrate,t as isValidElement,l as options,q as render,$ as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","// The order of enum items define the processing order of the processor type\n// e.g. Extractor = 0 will be processed before Transformer = 1\nimport { generateUUID, ID } from '../util/id';\nimport { EventEmitter } from '../util/eventEmitter';\nimport { deepEqual } from '../util/deepEqual';\n\nexport enum ProcessorType {\n  Initiator,\n  ServerFilter,\n  ServerSort,\n  ServerLimit,\n  Extractor,\n  Transformer,\n  Filter,\n  Sort,\n  Limit,\n}\n\ninterface PipelineProcessorEvents {\n  propsUpdated: <T, P>(processor: PipelineProcessor<T, P>) => void;\n  beforeProcess: (...args) => void;\n  afterProcess: (...args) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface PipelineProcessorProps {}\n\nexport abstract class PipelineProcessor<\n  T,\n  P extends Partial<PipelineProcessorProps>,\n> extends EventEmitter<PipelineProcessorEvents> {\n  public readonly id: ID;\n  private _props: P;\n\n  abstract get type(): ProcessorType;\n  protected abstract _process(...args): T | Promise<T>;\n  protected validateProps?(...args): void;\n\n  constructor(props?: Partial<P>) {\n    super();\n\n    this._props = {} as P;\n    this.id = generateUUID();\n\n    if (props) this.setProps(props);\n  }\n\n  /**\n   * process is used to call beforeProcess and afterProcess callbacks\n   * This function is just a wrapper that calls _process()\n   *\n   * @param args\n   */\n  process(...args): T | Promise<T> {\n    if (this.validateProps instanceof Function) {\n      this.validateProps(...args);\n    }\n\n    this.emit('beforeProcess', ...args);\n    const result = this._process(...args);\n    this.emit('afterProcess', ...args);\n    return result;\n  }\n\n  setProps(props: Partial<P>): this {\n    const updatedProps = {\n      ...this._props,\n      ...props,\n    };\n\n    if (!deepEqual(updatedProps, this._props)) {\n      this._props = updatedProps;\n      this.emit('propsUpdated', this);\n    }\n\n    return this;\n  }\n\n  get props(): P {\n    return this._props;\n  }\n}\n","export type ID = string;\n\nexport function generateUUID(): ID {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","import { generateUUID, ID } from './util/id';\n\nclass Base {\n  private readonly _id: ID;\n\n  constructor(id?: ID) {\n    this._id = id || generateUUID();\n  }\n\n  get id(): ID {\n    return this._id;\n  }\n}\n\nexport default Base;\n","import { h } from 'preact';\n\nexport interface HTMLContentProps {\n  content: string;\n  parentElement?: string;\n}\n\nexport function HTMLElement(props: HTMLContentProps) {\n  return h(props.parentElement || 'span', {\n    dangerouslySetInnerHTML: { __html: props.content },\n  });\n}\n","import { h, VNode } from 'preact';\nimport { HTMLElement } from '../view/htmlElement';\n\nexport function decode(content: string): string {\n  const value = new DOMParser().parseFromString(content, 'text/html');\n  return value.documentElement.textContent;\n}\n\nexport function html(content: string, parentElement?: string): VNode {\n  return h(HTMLElement, { content: content, parentElement: parentElement });\n}\n","import Base from './base';\nimport { TCell } from './types';\nimport { html } from './util/html';\nimport { ComponentChild } from 'preact';\n\nclass Cell extends Base {\n  // because a Cell is a subset of TCell type\n  public data: number | string | boolean | ComponentChild;\n\n  constructor(data: TCell) {\n    super();\n\n    this.update(data);\n  }\n\n  private cast(data: TCell): number | string | boolean | ComponentChild {\n    if (data instanceof HTMLElement) {\n      return html(data.outerHTML);\n    }\n\n    return data;\n  }\n\n  /**\n   * Updates the Cell's data\n   *\n   * @param data\n   */\n  public update(data: TCell): Cell {\n    this.data = this.cast(data);\n    return this;\n  }\n}\n\nexport default Cell;\n","import Cell from './cell';\nimport Base from './base';\nimport { TCell } from './types';\n\nclass Row extends Base {\n  private _cells: Cell[];\n\n  constructor(cells?: Cell[]) {\n    super();\n\n    this.cells = cells || [];\n  }\n\n  public cell(index: number): Cell {\n    return this._cells[index];\n  }\n\n  public get cells(): Cell[] {\n    return this._cells;\n  }\n\n  public set cells(cells: Cell[]) {\n    this._cells = cells;\n  }\n\n  public toArray(): TCell[] {\n    return this.cells.map((cell) => cell.data);\n  }\n\n  /**\n   * Creates a new Row from an array of Cell(s)\n   * This method generates a new ID for the Row and all nested elements\n   *\n   * @param cells\n   * @returns Row\n   */\n  static fromCells(cells: Cell[]): Row {\n    return new Row(cells.map((cell) => new Cell(cell.data)));\n  }\n\n  get length(): number {\n    return this.cells.length;\n  }\n}\n\nexport default Row;\n","import Base from './base';\nimport Row from './row';\nimport Cell from './cell';\nimport { OneDArray, TCell, TwoDArray } from './types';\nimport { oneDtoTwoD } from './util/array';\n\nclass Tabular extends Base {\n  private _rows: Row[];\n  private _length: number;\n\n  constructor(rows?: Row[] | Row) {\n    super();\n\n    if (rows instanceof Array) {\n      this.rows = rows;\n    } else if (rows instanceof Row) {\n      this.rows = [rows];\n    } else {\n      this.rows = [];\n    }\n  }\n\n  get rows(): Row[] {\n    return this._rows;\n  }\n\n  set rows(rows: Row[]) {\n    this._rows = rows;\n  }\n\n  get length(): number {\n    return this._length || this.rows.length;\n  }\n\n  // we want to sent the length when storage is ServerStorage\n  set length(len: number) {\n    this._length = len;\n  }\n\n  public toArray(): TCell[][] {\n    return this.rows.map((row) => row.toArray());\n  }\n\n  /**\n   * Creates a new Tabular from an array of Row(s)\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param rows\n   * @returns Tabular\n   */\n  static fromRows(rows: Row[]): Tabular {\n    return new Tabular(rows.map((row) => Row.fromCells(row.cells)));\n  }\n\n  /**\n   * Creates a new Tabular from a 2D array\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param data\n   * @returns Tabular\n   */\n  static fromArray<T extends TCell>(\n    data: OneDArray<T> | TwoDArray<T>,\n  ): Tabular {\n    data = oneDtoTwoD(data);\n\n    return new Tabular(\n      data.map((row) => new Row(row.map((cell) => new Cell(cell)))),\n    );\n  }\n}\n\nexport default Tabular;\n","import { OneDArray, TwoDArray } from '../types';\n\nexport function oneDtoTwoD<T>(data: OneDArray<T> | TwoDArray<T>): TwoDArray<T> {\n  if (data[0] && !(data[0] instanceof Array)) {\n    return [data] as TwoDArray<T>;\n  }\n\n  return data as TwoDArray<T>;\n}\n\nexport function flatten<T>(arrays: TwoDArray<T>): OneDArray<T> {\n  return arrays.reduce((prev, x) => prev.concat(x), []);\n}\n","type EventArgs<T> = [T] extends [(...args: infer U) => any]\n  ? U\n  : [T] extends [void]\n  ? []\n  : [T];\n\n/**\n * Example:\n *\n * export interface BaseEvents<P, S> {\n *   SET_STATE: (component: BaseComponent<P, S>, state: S) => void;\n * }\n */\n\nexport interface EventEmitter<EventTypes> {\n  addListener<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean;\n}\n\nexport class EventEmitter<EventTypes> {\n  private callbacks: { [event: string]: ((...args) => void)[] };\n\n  // because we are using EventEmitter as a mixin and the\n  // constructor won't be called by the applyMixins function\n  // see src/base.ts and src/util/applyMixin.ts\n  private init(event?: string): void {\n    if (!this.callbacks) {\n      this.callbacks = {};\n    }\n\n    if (event && !this.callbacks[event]) {\n      this.callbacks[event] = [];\n    }\n  }\n\n  listeners(): { [event: string]: ((...args) => void)[] } {\n    return this.callbacks;\n  }\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    this.init(event as string);\n    this.callbacks[event as string].push(listener);\n    return this;\n  }\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    const eventName = event as string;\n\n    this.init();\n\n    if (!this.callbacks[eventName] || this.callbacks[eventName].length === 0) {\n      // there is no callbacks with this key\n      return this;\n    }\n\n    this.callbacks[eventName] = this.callbacks[eventName].filter(\n      (value) => value != listener,\n    );\n\n    return this;\n  }\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean {\n    const eventName = event as string;\n\n    this.init(eventName);\n\n    if (this.callbacks[eventName].length > 0) {\n      this.callbacks[eventName].forEach((value) => value(...args));\n      return true;\n    }\n\n    return false;\n  }\n}\n","/**\n * Returns true if both objects are equal\n * @param a left object\n * @param b right object\n * @returns\n */\nexport function deepEqual<A, B>(obj1: A, obj2: B) {\n  // If objects are not the same type, return false\n  if (typeof obj1 !== typeof obj2) {\n    return false;\n  }\n  // If objects are both null or undefined, return true\n  if (obj1 === null && obj2 === null) {\n    return true;\n  }\n  // If objects are both primitive types, compare them directly\n  if (typeof obj1 !== 'object') {\n    // eslint-disable-next-line\n    // @ts-ignore\n    return obj1 === obj2;\n  }\n  // If objects are arrays, compare their elements recursively\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\n    if (obj1.length !== obj2.length) {\n      return false;\n    }\n    for (let i = 0; i < obj1.length; i++) {\n      if (!deepEqual(obj1[i], obj2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  // If objects are both objects, compare their properties recursively\n  const keys1 = Object.keys(obj1);\n  const keys2 = Object.keys(obj2);\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n  for (const key of keys1) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (!obj2.hasOwnProperty(key) || !deepEqual(obj1[key], obj2[key])) {\n      return false;\n    }\n  }\n  return true;\n}\n","import search from '../../operator/search';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { OneDArray, TCell, TColumn } from '../../types';\n\ninterface GlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword: string;\n  columns: OneDArray<TColumn>;\n  ignoreHiddenColumns: boolean;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n}\n\nclass GlobalSearchFilter extends PipelineProcessor<\n  Tabular,\n  GlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Filter;\n  }\n\n  _process(data: Tabular): Tabular {\n    if (this.props.keyword) {\n      return search(\n        String(this.props.keyword).trim(),\n        this.props.columns,\n        this.props.ignoreHiddenColumns,\n        data,\n        this.props.selector,\n      );\n    }\n\n    return data;\n  }\n}\n\nexport default GlobalSearchFilter;\n","import Tabular from '../tabular';\nimport { VNode } from 'preact';\nimport { HTMLContentProps } from '../view/htmlElement';\nimport { OneDArray, TCell, TColumn } from '../types';\n\nexport default function (\n  keyword: string,\n  columns: OneDArray<TColumn>,\n  ignoreHiddenColumns: boolean,\n  tabular: Tabular,\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string,\n): Tabular {\n  // escape special regex chars\n  keyword = keyword.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\n  return new Tabular(\n    tabular.rows.filter((row, rowIndex) =>\n      row.cells.some((cell, cellIndex) => {\n        if (!cell) {\n          return false;\n        }\n\n        if (ignoreHiddenColumns) {\n          if (\n            columns &&\n            columns[cellIndex] &&\n            typeof columns[cellIndex] === 'object'\n          ) {\n            const typedColumn = columns[cellIndex] as TColumn;\n            if (typedColumn.hidden) {\n              return false;\n            }\n          }\n        }\n\n        let data = '';\n\n        if (typeof selector === 'function') {\n          data = selector(cell.data, rowIndex, cellIndex);\n        } else if (typeof cell.data === 'object') {\n          // HTMLContent element\n          const element = cell.data as VNode<HTMLContentProps>;\n          if (element && element.props && element.props.content) {\n            // TODO: we should only search in the content of the element. props.content is the entire HTML element\n            data = element.props.content;\n          }\n        } else {\n          // primitive types\n          data = String(cell.data);\n        }\n\n        return new RegExp(keyword, 'gi').test(data);\n      }),\n    ),\n  );\n}\n","import { JSXInternal } from 'preact/src/jsx';\n\nexport function className(...args: string[]): string {\n  const prefix = 'gridjs';\n\n  return `${prefix}${args.reduce(\n    (prev: string, cur: string) => `${prev}-${cur}`,\n    '',\n  )}`;\n}\n\nexport function classJoin(\n  ...classNames: (undefined | string | JSXInternal.SignalLike<string>)[]\n): string {\n  return classNames\n    .map((x) => (x ? x.toString() : ''))\n    .filter((x) => x)\n    .reduce((className, prev) => `${className || ''} ${prev}`, '')\n    .trim();\n}\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerGlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword?: string;\n  url?: (prevUrl: string, keyword: string) => string;\n  body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n}\n\nclass ServerGlobalSearchFilter extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerGlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerFilter;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    if (!this.props.keyword) return options;\n\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.keyword);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.keyword);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerGlobalSearchFilter;\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=[],e=n.__b,a=n.__r,v=n.diffed,l=n.__c,m=n.unmount;function d(t,u){n.__h&&n.__h(r,t,o||u),o=0;var i=r.__H||(r.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:c}),i.__[t]}function h(n){return o=1,s(B,n)}function s(n,u,i){var o=d(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):B(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=!1;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),!(!i&&o.__c.props===n)&&(!c||c.call(this,n,t,r))};r.u=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function p(u,i){var o=d(t++,3);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__H.__h.push(o))}function y(u,i){var o=d(t++,4);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__h.push(o))}function _(n){return o=5,F(function(){return{current:n}},[])}function A(n,t,r){o=6,y(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function F(n,r){var u=d(t++,7);return z(u.__H,r)?(u.__V=n(),u.i=r,u.__h=n,u.__V):u.__}function T(n,t){return o=8,F(function(){return n},t)}function q(n){var u=r.context[n.__c],i=d(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function x(t,r){n.useDebugValue&&n.useDebugValue(r?r(t):t)}function P(n){var u=d(t++,10),i=h();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function V(){var n=d(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function b(){for(var t;t=f.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(k),t.__H.__h.forEach(w),t.__H.__h=[]}catch(r){t.__H.__h=[],n.__e(r,t.__v)}}n.__b=function(n){r=null,e&&e(n)},n.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=c,n.__N=n.i=void 0})):(i.__h.forEach(k),i.__h.forEach(w),i.__h=[],t=0)),u=r},n.diffed=function(t){v&&v(t);var o=t.__c;o&&o.__H&&(o.__H.__h.length&&(1!==f.push(o)&&i===n.requestAnimationFrame||((i=n.requestAnimationFrame)||j)(b)),o.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==c&&(n.__=n.__V),n.i=void 0,n.__V=c})),u=r=null},n.__c=function(t,r){r.some(function(t){try{t.__h.forEach(k),t.__h=t.__h.filter(function(n){return!n.__||w(n)})}catch(u){r.some(function(n){n.__h&&(n.__h=[])}),r=[],n.__e(u,t.__v)}}),l&&l(t,r)},n.unmount=function(t){m&&m(t);var r,u=t.__c;u&&u.__H&&(u.__H.__.forEach(function(n){try{k(n)}catch(n){r=n}}),u.__H=void 0,r&&n.__e(r,u.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t,r=function(){clearTimeout(u),g&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);g&&(t=requestAnimationFrame(r))}function k(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function w(n){var t=r;n.__c=n.__(),r=t}function z(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function B(n,t){return\"function\"==typeof t?t(n):t}export{T as useCallback,q as useContext,x as useDebugValue,p as useEffect,P as useErrorBoundary,V as useId,A as useImperativeHandle,y as useLayoutEffect,F as useMemo,s as useReducer,_ as useRef,h as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import { useContext } from 'preact/hooks';\nimport { Config, ConfigContext } from '../config';\n\nexport function useConfig(): Config {\n  return useContext(ConfigContext);\n}\n","export default {\n  search: {\n    placeholder: 'Type a keyword...',\n  },\n  sort: {\n    sortAsc: 'Sort column ascending',\n    sortDesc: 'Sort column descending',\n  },\n  pagination: {\n    previous: 'Previous',\n    next: 'Next',\n    navigate: (page, pages) => `Page ${page} of ${pages}`,\n    page: (page) => `Page ${page}`,\n    showing: 'Showing',\n    of: 'of',\n    to: 'to',\n    results: 'results',\n  },\n  loading: 'Loading...',\n  noRecordsFound: 'No matching records found',\n  error: 'An error happened while fetching the data',\n};\n","import { useConfig } from '../hooks/useConfig';\nimport enUS from './en_US';\ntype MessageFormat = (...args) => string;\ntype Message = string | MessageFormat;\nexport type Language = { [key: string]: Message | Language };\n\nexport class Translator {\n  private readonly _language: Language;\n  private readonly _defaultLanguage: Language;\n\n  constructor(language?: Language) {\n    this._language = language;\n    this._defaultLanguage = enUS;\n  }\n\n  /**\n   * Tries to split the message with \".\" and find\n   * the key in the given language\n   *\n   * @param message\n   * @param lang\n   */\n  getString(message: string, lang: Language): MessageFormat {\n    if (!lang || !message) return null;\n\n    const splitted = message.split('.');\n    const key = splitted[0];\n\n    if (lang[key]) {\n      const val = lang[key];\n\n      if (typeof val === 'string') {\n        return (): string => val;\n      } else if (typeof val === 'function') {\n        return val;\n      } else {\n        return this.getString(splitted.slice(1).join('.'), val);\n      }\n    }\n\n    return null;\n  }\n\n  translate(message: string, ...args): string {\n    const translated = this.getString(message, this._language);\n    let messageFormat;\n\n    if (translated) {\n      messageFormat = translated;\n    } else {\n      messageFormat = this.getString(message, this._defaultLanguage);\n    }\n\n    if (messageFormat) {\n      return messageFormat(...args);\n    }\n\n    return message;\n  }\n}\n\nexport function useTranslator() {\n  const config = useConfig();\n\n  return function (message: string, ...args): string {\n    return config.translator.translate(message, ...args);\n  };\n}\n","export const SearchKeyword = (payload) => (state) => {\n  return {\n    ...state,\n    search: {\n      keyword: payload,\n    },\n  };\n};\n","import { useConfig } from './useConfig';\n\nexport function useStore() {\n  const config = useConfig();\n  return config.store;\n}\n","import { useEffect, useState } from 'preact/hooks';\nimport { useStore } from './useStore';\n\nexport default function useSelector<T>(selector: (state) => T) {\n  const store = useStore();\n  const [current, setCurrent] = useState(selector(store.getState()));\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const updated = selector(store.getState());\n\n      if (current !== updated) {\n        setCurrent(updated);\n      }\n    });\n\n    return unsubscribe;\n  }, []);\n\n  return current;\n}\n","import { h, JSX } from 'preact';\nimport GlobalSearchFilter from '../../../pipeline/filter/globalSearch';\nimport { classJoin, className } from '../../../util/className';\nimport ServerGlobalSearchFilter from '../../../pipeline/filter/serverGlobalSearch';\nimport { TCell } from '../../../types';\nimport { useConfig } from '../../../hooks/useConfig';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nimport { useTranslator } from '../../../i18n/language';\nimport * as actions from './actions';\nimport { useStore } from '../../../hooks/useStore';\nimport useSelector from '../../../hooks/useSelector';\nimport { debounce } from '../../../util/debounce';\n\nexport interface SearchConfig {\n  keyword?: string;\n  ignoreHiddenColumns?: boolean;\n  debounceTimeout?: number;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n  server?: {\n    url?: (prevUrl: string, keyword: string) => string;\n    body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n  };\n}\n\nexport function Search() {\n  const [processor, setProcessor] = useState<\n    GlobalSearchFilter | ServerGlobalSearchFilter\n  >(undefined);\n  const config = useConfig();\n  const props = config.search as SearchConfig;\n  const _ = useTranslator();\n  const { dispatch } = useStore();\n  const state = useSelector((state) => state.search);\n\n  useEffect(() => {\n    if (!processor) return;\n\n    processor.setProps({\n      keyword: state?.keyword,\n    });\n  }, [state, processor]);\n\n  useEffect(() => {\n    if (props.server) {\n      setProcessor(\n        new ServerGlobalSearchFilter({\n          keyword: props.keyword,\n          url: props.server.url,\n          body: props.server.body,\n        }),\n      );\n    } else {\n      setProcessor(\n        new GlobalSearchFilter({\n          keyword: props.keyword,\n          columns: config.header && config.header.columns,\n          ignoreHiddenColumns:\n            props.ignoreHiddenColumns ||\n            props.ignoreHiddenColumns === undefined,\n          selector: props.selector,\n        }),\n      );\n    }\n\n    // initial search\n    if (props.keyword) dispatch(actions.SearchKeyword(props.keyword));\n  }, [props]);\n\n  useEffect(() => {\n    if (!processor) return undefined;\n\n    config.pipeline.register<object, object>(processor);\n\n    return () => config.pipeline.unregister<object, object>(processor);\n  }, [config, processor]);\n\n  const debouncedOnInput = useCallback(\n    debounce(\n      (event: JSX.TargetedEvent<HTMLInputElement>) => {\n        if (event.target instanceof HTMLInputElement) {\n          dispatch(actions.SearchKeyword(event.target.value));\n        }\n      },\n      processor instanceof ServerGlobalSearchFilter\n        ? props.debounceTimeout || 250\n        : 0,\n    ),\n    [props, processor],\n  );\n\n  return (\n    <div className={className(classJoin('search', config.className?.search))}>\n      <input\n        type=\"search\"\n        placeholder={_('search.placeholder')}\n        aria-label={_('search.placeholder')}\n        onInput={debouncedOnInput}\n        className={classJoin(className('input'), className('search', 'input'))}\n        value={state?.keyword || ''}\n      />\n    </div>\n  );\n}\n","export const debounce = <F extends (...args: any[]) => any>(\n  func: F,\n  waitFor: number,\n) => {\n  let timeout;\n\n  return (...args: Parameters<F>): Promise<ReturnType<F>> =>\n    new Promise((resolve) => {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      timeout = setTimeout(() => resolve(func(...args)), waitFor);\n    });\n};\n","import Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface PaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n}\n\nclass PaginationLimit extends PipelineProcessor<Tabular, PaginationLimitProps> {\n  protected validateProps(): void {\n    if (isNaN(Number(this.props.limit)) || isNaN(Number(this.props.page))) {\n      throw Error('Invalid parameters passed');\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Limit;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const page = this.props.page;\n    const start = page * this.props.limit;\n    const end = (page + 1) * this.props.limit;\n\n    return new Tabular(data.rows.slice(start, end));\n  }\n}\n\nexport default PaginationLimit;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerPaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n  url?: (prevUrl: string, page: number, limit: number) => string;\n  body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n}\n\nclass ServerPaginationLimit extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerPaginationLimitProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerLimit;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(\n        options.url,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(\n        options.body,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerPaginationLimit;\n","import { h, Fragment } from 'preact';\nimport PaginationLimit from '../../pipeline/limit/pagination';\nimport { classJoin, className } from '../../util/className';\nimport ServerPaginationLimit from '../../pipeline/limit/serverPagination';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useTranslator } from '../../i18n/language';\n\nexport interface PaginationConfig {\n  limit?: number;\n  page?: number;\n  summary?: boolean;\n  nextButton?: boolean;\n  prevButton?: boolean;\n  buttonsCount?: number;\n  resetPageOnUpdate?: boolean;\n  server?: {\n    url?: (prevUrl: string, page: number, limit: number) => string;\n    body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n  };\n}\n\nexport function Pagination() {\n  const config = useConfig();\n  const {\n    server,\n    summary = true,\n    nextButton = true,\n    prevButton = true,\n    buttonsCount = 3,\n    limit = 10,\n    page = 0,\n    resetPageOnUpdate = true,\n  } = config.pagination as PaginationConfig;\n\n  const processor = useRef<PaginationLimit | ServerPaginationLimit>(null);\n  const [currentPage, setCurrentPage] = useState(page);\n  const [total, setTotal] = useState(0);\n  const _ = useTranslator();\n\n  useEffect(() => {\n    if (server) {\n      processor.current = new ServerPaginationLimit({\n        limit: limit,\n        page: currentPage,\n        url: server.url,\n        body: server.body,\n      });\n\n      config.pipeline.register(processor.current);\n    } else {\n      processor.current = new PaginationLimit({\n        limit: limit,\n        page: currentPage,\n      });\n\n      config.pipeline.register(processor.current);\n    }\n\n    if (processor.current instanceof ServerPaginationLimit) {\n      config.pipeline.on('afterProcess', (tabular) => setTotal(tabular.length));\n    } else if (processor.current instanceof PaginationLimit) {\n      // Pagination (all Limit processors) is the last step in the pipeline\n      // and we assume that at this stage, we have the rows that we care about.\n      // Let's grab the rows before processing Pagination and set total number of rows\n      processor.current.on('beforeProcess', (tabular) =>\n        setTotal(tabular.length),\n      );\n    }\n\n    config.pipeline.on('updated', onUpdate);\n\n    // we need to make sure that the state is set\n    // to the default props when an error happens\n    config.pipeline.on('error', () => {\n      setTotal(0);\n      setCurrentPage(0);\n    });\n\n    return () => {\n      config.pipeline.unregister<object, object>(processor.current);\n      config.pipeline.off('updated', onUpdate);\n    };\n  }, []);\n\n  const onUpdate = (updatedProcessor) => {\n    // this is to ensure that the current page is set to 0\n    // when a processor is updated for some reason\n    if (resetPageOnUpdate && updatedProcessor !== processor.current) {\n      setCurrentPage(0);\n    }\n  };\n\n  const pages = () => Math.ceil(total / limit);\n\n  const setPage = (page: number) => {\n    if (page >= pages() || page < 0 || page === currentPage) {\n      return null;\n    }\n\n    setCurrentPage(page);\n\n    processor.current.setProps({\n      page: page,\n    });\n  };\n\n  const renderPages = () => {\n    if (buttonsCount <= 0) {\n      return null;\n    }\n\n    // how many pagination buttons to render?\n    const maxCount: number = Math.min(pages(), buttonsCount);\n\n    let pagePivot = Math.min(currentPage, Math.floor(maxCount / 2));\n    if (currentPage + Math.floor(maxCount / 2) >= pages()) {\n      pagePivot = maxCount - (pages() - currentPage);\n    }\n\n    return (\n      <Fragment>\n        {pages() > maxCount && currentPage - pagePivot > 0 && (\n          <Fragment>\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(0)}\n              title={_('pagination.firstPage')}\n              aria-label={_('pagination.firstPage')}\n              className={config.className.paginationButton}\n            >\n              {_('1')}\n            </button>\n            <button\n              tabIndex={-1}\n              className={classJoin(\n                className('spread'),\n                config.className.paginationButton,\n              )}\n            >\n              ...\n            </button>\n          </Fragment>\n        )}\n\n        {Array.from(Array(maxCount).keys())\n          .map((i) => currentPage + (i - pagePivot))\n          .map((i) => (\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(i)}\n              className={classJoin(\n                currentPage === i\n                  ? classJoin(\n                      className('currentPage'),\n                      config.className.paginationButtonCurrent,\n                    )\n                  : null,\n                config.className.paginationButton,\n              )}\n              title={_('pagination.page', i + 1)}\n              aria-label={_('pagination.page', i + 1)}\n            >\n              {_(`${i + 1}`)}\n            </button>\n          ))}\n\n        {pages() > maxCount && pages() > currentPage + pagePivot + 1 && (\n          <Fragment>\n            <button\n              tabIndex={-1}\n              className={classJoin(\n                className('spread'),\n                config.className.paginationButton,\n              )}\n            >\n              ...\n            </button>\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(pages() - 1)}\n              title={_('pagination.page', pages())}\n              aria-label={_('pagination.page', pages())}\n              className={config.className.paginationButton}\n            >\n              {_(`${pages()}`)}\n            </button>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderSummary = () => {\n    return (\n      <Fragment>\n        {summary && total > 0 && (\n          <div\n            role=\"status\"\n            aria-live=\"polite\"\n            className={classJoin(\n              className('summary'),\n              config.className.paginationSummary,\n            )}\n            title={_('pagination.navigate', currentPage + 1, pages())}\n          >\n            {_('pagination.showing')} <b>{_(`${currentPage * limit + 1}`)}</b>{' '}\n            {_('pagination.to')}{' '}\n            <b>{_(`${Math.min((currentPage + 1) * limit, total)}`)}</b>{' '}\n            {_('pagination.of')} <b>{_(`${total}`)}</b>{' '}\n            {_('pagination.results')}\n          </div>\n        )}\n      </Fragment>\n    );\n  };\n\n  return (\n    <div\n      className={classJoin(\n        className('pagination'),\n        config.className.pagination,\n      )}\n    >\n      {renderSummary()}\n\n      <div className={className('pages')}>\n        {prevButton && (\n          <button\n            tabIndex={0}\n            role=\"button\"\n            disabled={currentPage === 0}\n            onClick={() => setPage(currentPage - 1)}\n            title={_('pagination.previous')}\n            aria-label={_('pagination.previous')}\n            className={classJoin(\n              config.className.paginationButton,\n              config.className.paginationButtonPrev,\n            )}\n          >\n            {_('pagination.previous')}\n          </button>\n        )}\n\n        {renderPages()}\n\n        {nextButton && (\n          <button\n            tabIndex={0}\n            role=\"button\"\n            disabled={pages() === currentPage + 1 || pages() === 0}\n            onClick={() => setPage(currentPage + 1)}\n            title={_('pagination.next')}\n            aria-label={_('pagination.next')}\n            className={classJoin(\n              config.className.paginationButton,\n              config.className.paginationButtonNext,\n            )}\n          >\n            {_('pagination.next')}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","export function width(width: string | number, containerWidth?: number): number {\n  if (typeof width == 'string') {\n    if (width.indexOf('%') > -1) {\n      return (containerWidth / 100) * parseInt(width, 10);\n    } else {\n      return parseInt(width, 10);\n    }\n  }\n\n  return width;\n}\n\nexport function px(width: number): string {\n  if (!width) return '';\n  return `${Math.floor(width)}px`;\n}\n","import { h } from 'preact';\nimport { className } from '../../util/className';\n\n/**\n * ShadowTable renders a hidden table and is used to calculate the column's width\n * when autoWidth option is enabled\n */\nexport function ShadowTable(props: { tableRef: HTMLTableElement }) {\n  const shadowTable = props.tableRef.cloneNode(true) as HTMLTableElement;\n\n  shadowTable.style.position = 'absolute';\n  shadowTable.style.width = '100%';\n  shadowTable.style.zIndex = '-2147483640';\n  shadowTable.style.visibility = 'hidden';\n\n  return (\n    <div\n      ref={(nodeElement) => {\n        nodeElement && nodeElement.appendChild(shadowTable);\n      }}\n    />\n  );\n}\n\nexport function getShadowTableWidths(tempRef: HTMLDivElement): {\n  [columnId: string]: { minWidth: number; width: number };\n} {\n  const tableElement: HTMLTableElement = tempRef.querySelector(\n    'table',\n  ) as HTMLTableElement;\n\n  if (!tableElement) {\n    return {};\n  }\n\n  const tableClassName = tableElement.className;\n  const tableStyle = tableElement.style.cssText;\n  tableElement.className = `${tableClassName} ${className('shadowTable')}`;\n\n  tableElement.style.tableLayout = 'auto';\n  tableElement.style.width = 'auto';\n  tableElement.style.padding = '0';\n  tableElement.style.margin = '0';\n  tableElement.style.border = 'none';\n  tableElement.style.outline = 'none';\n\n  let obj = Array.from(\n    tableElement.parentNode.querySelectorAll<HTMLElement>('thead th'),\n  ).reduce((prev, current) => {\n    current.style.width = `${current.clientWidth}px`;\n\n    return {\n      [current.getAttribute('data-column-id')]: {\n        minWidth: current.clientWidth,\n      },\n      ...prev,\n    };\n  }, {});\n\n  tableElement.className = tableClassName;\n  tableElement.style.cssText = tableStyle;\n  tableElement.style.tableLayout = 'auto';\n\n  obj = Array.from(\n    tableElement.parentNode.querySelectorAll<HTMLElement>('thead th'),\n  ).reduce((prev, current) => {\n    prev[current.getAttribute('data-column-id')]['width'] = current.clientWidth;\n\n    return prev;\n  }, obj);\n\n  return obj;\n}\n","export function camelCase(str: string): string {\n  if (!str) return '';\n\n  const words = str.split(' ');\n\n  // do not convert strings that are already in camelCase format\n  if (words.length === 1 && /([a-z][A-Z])+/g.test(str)) {\n    return str;\n  }\n\n  return words\n    .map(function (word, index) {\n      // if it is the first word, lowercase all the chars\n      if (index == 0) {\n        return word.toLowerCase();\n      }\n\n      // if it is not the first word only upper case the first char and lowercase the rest\n      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n    })\n    .join('');\n}\n","/**\n * Centralized logging lib\n *\n * This class needs some improvements but so far it has been used to have a coherent way to log\n */\nclass Logger {\n  private format(message: string, type: string): string {\n    return `[Grid.js] [${type.toUpperCase()}]: ${message}`;\n  }\n\n  error(message: string, throwException = false): void {\n    const msg = this.format(message, 'error');\n\n    if (throwException) {\n      throw Error(msg);\n    } else {\n      console.error(msg);\n    }\n  }\n\n  warn(message: string): void {\n    console.warn(this.format(message, 'warn'));\n  }\n\n  info(message: string): void {\n    console.info(this.format(message, 'info'));\n  }\n}\n\nexport default new Logger();\n","import { Fragment, FunctionComponent, h } from 'preact';\nimport { useConfig } from './hooks/useConfig';\nimport log from './util/log';\n\nexport enum PluginPosition {\n  Header,\n  Footer,\n  Cell,\n}\n\nexport interface Plugin<T extends FunctionComponent> {\n  id: string;\n  position: PluginPosition;\n  component: T;\n  order?: number;\n}\n\nexport class PluginManager {\n  private readonly plugins: Plugin<any>[];\n\n  constructor() {\n    this.plugins = [];\n  }\n\n  get<T extends FunctionComponent>(id: string): Plugin<T> | undefined {\n    return this.plugins.find((p) => p.id === id);\n  }\n\n  add<T extends FunctionComponent<any>>(plugin: Plugin<T>): this {\n    if (!plugin.id) {\n      log.error('Plugin ID cannot be empty');\n      return this;\n    }\n\n    if (this.get(plugin.id)) {\n      log.error(`Duplicate plugin ID: ${plugin.id}`);\n      return this;\n    }\n\n    this.plugins.push(plugin);\n    return this;\n  }\n\n  remove(id: string): this {\n    const plugin = this.get(id);\n\n    if (plugin) {\n      this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    }\n\n    return this;\n  }\n\n  list<T extends FunctionComponent>(position?: PluginPosition): Plugin<T>[] {\n    let plugins: Plugin<T>[];\n\n    if (position != null || position != undefined) {\n      plugins = this.plugins.filter((p) => p.position === position);\n    } else {\n      plugins = this.plugins;\n    }\n\n    return plugins.sort((a, b) => (a.order && b.order ? a.order - b.order : 1));\n  }\n}\n\nexport function PluginRenderer(props: {\n  props?: any;\n  // to render a single plugin\n  pluginId?: string;\n  // to render all plugins in this PluginPosition\n  position?: PluginPosition;\n}) {\n  const config = useConfig();\n\n  if (props.pluginId) {\n    // render a single plugin\n    const plugin = config.plugin.get(props.pluginId);\n\n    if (!plugin) return null;\n\n    return h(\n      Fragment,\n      {},\n      h(plugin.component, {\n        plugin: plugin,\n        ...props.props,\n      }),\n    );\n  } else if (props.position !== undefined) {\n    // render using a specific plugin position\n    return h(\n      Fragment,\n      {},\n      config.plugin.list(props.position).map((p) => {\n        return h(p.component, { plugin: p, ...this.props.props });\n      }),\n    );\n  }\n\n  return null;\n}\n","import { OneDArray, TColumn, TwoDArray } from './types';\nimport Base from './base';\nimport { Config } from './config';\nimport { px, width } from './util/width';\nimport { getShadowTableWidths, ShadowTable } from './view/table/shadow';\nimport { ComponentChild, h, isValidElement, RefObject, render } from 'preact';\nimport { camelCase } from './util/string';\nimport { flatten } from './util/array';\nimport logger from './util/log';\nimport { PluginManager, PluginPosition } from './plugin';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\n\nclass Header extends Base {\n  private _columns: OneDArray<TColumn>;\n\n  constructor() {\n    super();\n\n    this._columns = [];\n  }\n\n  get columns(): OneDArray<TColumn> {\n    return this._columns;\n  }\n\n  set columns(columns) {\n    this._columns = columns;\n  }\n\n  get visibleColumns(): OneDArray<TColumn> {\n    return this._columns.filter((c) => !c.hidden);\n  }\n\n  /**\n   * Tries to automatically adjust the width of columns based on:\n   *    - Header cell content\n   *    - Cell content of the first row\n   *    - Cell content of the last row\n   *\n   * @param config\n   */\n  adjustWidth(\n    config: Config,\n    tableRef: RefObject<HTMLTableElement>,\n    tempRef: RefObject<HTMLDivElement>,\n  ): this {\n    const container: Element = config.container;\n    const autoWidth = config.autoWidth;\n\n    if (!container) {\n      // we can't calculate the width because the container\n      // is unknown at this stage\n      return this;\n    }\n\n    // pixels\n    const containerWidth = container.clientWidth;\n\n    let widths = {};\n\n    if (tableRef.current && autoWidth) {\n      // let's create a shadow table with the first 10 rows of the data\n      // and let the browser to render the table with table-layout: auto\n      // no padding, margin or border to get the minimum space required\n      // to render columns. Once the table is rendered and widths are known,\n      // we unmount the shadow table from the DOM and set the correct width\n      render(\n        h(ShadowTable, {\n          tableRef: tableRef.current,\n        }),\n        tempRef.current,\n      );\n\n      widths = getShadowTableWidths(tempRef.current);\n    }\n\n    for (const column of flatten(Header.tabularFormat(this.columns))) {\n      // because we don't want to set the width of parent THs\n      if (column.columns && column.columns.length > 0) {\n        continue;\n      }\n\n      if (!column.width && autoWidth) {\n        // tries to find the corresponding cell\n        // from the ShadowTable and set the correct width\n\n        if (column.id in widths) {\n          // because a column can be hidden, too\n          column.width = px(widths[column.id]['width']);\n          column.minWidth = px(widths[column.id]['minWidth']);\n        }\n      } else {\n        // column width is already defined\n        // sets the column with based on the width of its container\n        column.width = px(width(column.width, containerWidth));\n      }\n    }\n\n    if (tableRef.current && autoWidth) {\n      // unmount the shadow table from temp\n      render(null, tempRef.current);\n    }\n\n    return this;\n  }\n\n  private setSort(\n    sortConfig: GenericSortConfig | boolean,\n    columns?: OneDArray<TColumn>,\n  ): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      // sorting can only be enabled for columns without any children\n      if (column.columns && column.columns.length > 0) {\n        column.sort = undefined;\n      } else if (column.sort === undefined && sortConfig) {\n        column.sort = {};\n      } else if (!column.sort) {\n        // false, null, etc.\n        column.sort = undefined;\n      } else if (typeof column.sort === 'object') {\n        column.sort = {\n          ...column.sort,\n        };\n      }\n\n      if (column.columns) {\n        this.setSort(sortConfig, column.columns);\n      }\n    }\n  }\n\n  private setResizable(resizable: boolean, columns?: OneDArray<TColumn>): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      if (column.resizable === undefined) {\n        column.resizable = resizable;\n      }\n\n      if (column.columns) {\n        this.setResizable(resizable, column.columns);\n      }\n    }\n  }\n\n  private setID(columns?: OneDArray<TColumn>): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      if (!column.id && typeof column.name === 'string') {\n        // let's guess the column ID if it's undefined\n        column.id = camelCase(column.name);\n      }\n\n      if (!column.id) {\n        logger.error(\n          `Could not find a valid ID for one of the columns. Make sure a valid \"id\" is set for all columns.`,\n        );\n      }\n\n      // nested columns\n      if (column.columns) {\n        this.setID(column.columns);\n      }\n    }\n  }\n\n  private populatePlugins(\n    pluginManager: PluginManager,\n    columns: OneDArray<TColumn>,\n  ): void {\n    // populate the cell columns\n    for (const column of columns) {\n      if (column.plugin !== undefined) {\n        pluginManager.add({\n          id: column.id,\n          ...column.plugin,\n          position: PluginPosition.Cell,\n        });\n      }\n    }\n  }\n\n  static fromColumns(\n    columns: OneDArray<TColumn | string | ComponentChild>,\n  ): Header {\n    const header = new Header();\n\n    for (const column of columns) {\n      if (typeof column === 'string' || isValidElement(column)) {\n        header.columns.push({\n          name: column,\n        });\n      } else if (typeof column === 'object') {\n        const typedColumn = column as TColumn;\n\n        if (typedColumn.columns) {\n          typedColumn.columns = Header.fromColumns(typedColumn.columns).columns;\n        }\n\n        // because the data for that cell is null\n        // if we are trying to render a plugin\n        if (typeof typedColumn.plugin === 'object') {\n          if (typedColumn.data === undefined) {\n            typedColumn.data = null;\n          }\n        }\n\n        // TColumn type\n        header.columns.push(column as TColumn);\n      }\n    }\n\n    return header;\n  }\n\n  static createFromConfig(config: Partial<Config>): Header | null {\n    const header = new Header();\n\n    // TODO: this part needs some refactoring\n    if (config.from) {\n      header.columns = Header.fromHTMLTable(config.from).columns;\n    } else if (config.columns) {\n      header.columns = Header.fromColumns(config.columns).columns;\n    } else if (\n      config.data &&\n      typeof config.data[0] === 'object' &&\n      !(config.data[0] instanceof Array)\n    ) {\n      // if data[0] is an object but not an Array\n      // used for when a JSON payload is provided\n      header.columns = Object.keys(config.data[0]).map((name) => {\n        return { name: name };\n      });\n    }\n\n    if (header.columns.length) {\n      header.setID();\n      header.setSort(config.sort);\n      header.setResizable(config.resizable);\n      header.populatePlugins(config.plugin, header.columns);\n      return header;\n    }\n\n    return null;\n  }\n\n  static fromHTMLTable(element: HTMLElement): Header {\n    const header = new Header();\n    const thead = element.querySelector('thead');\n    const ths = thead.querySelectorAll('th');\n\n    for (const th of ths as any) {\n      header.columns.push({\n        name: th.innerHTML,\n        width: th.width,\n      });\n    }\n\n    return header;\n  }\n\n  /**\n   * Converts the tree-like format of Header to a tabular format\n   *\n   * Example:\n   *\n   *    H1\n   *      H1-H1\n   *      H1-H2\n   *    H2\n   *      H2-H1\n   *\n   *    becomes:\n   *      [\n   *        [H1, H2],\n   *        [H1-H1, H1-H2, H2-H1]\n   *      ]\n   *\n   * @param columns\n   */\n  static tabularFormat(columns: OneDArray<TColumn>): TwoDArray<TColumn> {\n    let result: TwoDArray<TColumn> = [];\n    const cols = columns || [];\n    let nextRow = [];\n\n    if (cols && cols.length) {\n      result.push(cols);\n\n      for (const col of cols) {\n        if (col.columns && col.columns.length) {\n          nextRow = nextRow.concat(col.columns);\n        }\n      }\n\n      if (nextRow.length) {\n        result = result.concat(this.tabularFormat(nextRow));\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns an array of leaf columns (last columns in the tree)\n   *\n   * @param columns\n   */\n  static leafColumns(columns: OneDArray<TColumn>): OneDArray<TColumn> {\n    let result: OneDArray<TColumn> = [];\n    const cols = columns || [];\n\n    if (cols && cols.length) {\n      for (const col of cols) {\n        if (!col.columns || col.columns.length === 0) {\n          result.push(col);\n        }\n\n        if (col.columns) {\n          result = result.concat(this.leafColumns(col.columns));\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns the maximum depth of a column tree\n   * @param column\n   */\n  static maximumDepth(column: TColumn): number {\n    return this.tabularFormat([column]).length - 1;\n  }\n}\n\nexport default Header;\n","/**\n * Base Storage class. All storage implementation must inherit this class\n */\nimport { TData } from '../types';\n\nabstract class Storage<I> {\n  /**\n   * Returns all rows based on ...args\n   * @param args\n   */\n  abstract get(...args): Promise<StorageResponse>;\n\n  /**\n   * To set all rows\n   *\n   * @param data\n   */\n  set?(data: I | ((...args) => void)): this;\n}\n\nexport interface StorageResponse {\n  data: TData;\n  total: number;\n}\n\nexport default Storage;\n","import Storage, { StorageResponse } from './storage';\nimport { TData } from '../types';\n\nclass MemoryStorage extends Storage<TData> {\n  private data: (() => TData) | (() => Promise<TData>);\n\n  constructor(data: TData | (() => TData) | (() => Promise<TData>)) {\n    super();\n    this.set(data);\n  }\n\n  public async get(): Promise<StorageResponse> {\n    const data = await this.data();\n\n    return {\n      data: data,\n      total: data.length,\n    };\n  }\n\n  public set(data: TData | (() => TData) | (() => Promise<TData>)): this {\n    if (data instanceof Array) {\n      this.data = (): TData => data;\n    } else if (data instanceof Function) {\n      this.data = data;\n    }\n\n    return this;\n  }\n}\n\nexport default MemoryStorage;\n","import Storage, { StorageResponse } from './storage';\nimport log from '../util/log';\n\nexport interface ServerStorageOptions extends RequestInit {\n  url: string;\n  // to format the data and columns\n  then?: (data: any) => any[][];\n  // to handle the response from the server. `handle` will\n  // be called first and then `then` callback will be invoked\n  // The purpose of this function is to handle the behaviour\n  // of server and either reject and resolve the initial response\n  // before calling the `then` function\n  handle?: (response: Response) => Promise<any>;\n  total?: (data: any) => number;\n  // to bypass the current implementation of ServerStorage and process the\n  // request manually (e.g. when user wants to connect their own SDK/HTTP Client)\n  data?: (opts: ServerStorageOptions) => Promise<StorageResponse>;\n}\n\nclass ServerStorage extends Storage<ServerStorageOptions> {\n  private readonly options: ServerStorageOptions;\n\n  constructor(options: ServerStorageOptions) {\n    super();\n    this.options = options;\n  }\n\n  private handler(response: Response): Promise<any> {\n    if (typeof this.options.handle === 'function') {\n      return this.options.handle(response);\n    }\n\n    if (response.ok) {\n      return response.json();\n    } else {\n      log.error(\n        `Could not fetch data: ${response.status} - ${response.statusText}`,\n        true,\n      );\n      return null;\n    }\n  }\n\n  public get(options?: ServerStorageOptions): Promise<StorageResponse> {\n    // this.options is the initial config object\n    // options is the runtime config passed by the pipeline (e.g. search component)\n    const opts = {\n      ...this.options,\n      ...options,\n    };\n\n    // if `options.data` is provided, the current ServerStorage\n    // implementation will be ignored and we let options.data to\n    // handle the request. Useful when HTTP client needs to be\n    // replaced with something else\n    if (typeof opts.data === 'function') {\n      return opts.data(opts);\n    }\n\n    return fetch(opts.url, opts)\n      .then(this.handler.bind(this))\n      .then((res) => {\n        return {\n          data: opts.then(res),\n          total: typeof opts.total === 'function' ? opts.total(res) : undefined,\n        };\n      });\n  }\n}\n\nexport default ServerStorage;\n","import { Config } from '../config';\nimport MemoryStorage from './memory';\nimport Storage from './storage';\nimport ServerStorage from './server';\nimport log from '../util/log';\nimport { decode, html } from '../util/html';\n\nclass StorageUtils {\n  /**\n   * Accepts a Config object and tries to guess and return a Storage type\n   *\n   * @param config\n   */\n  public static createFromConfig(config: Config): Storage<any> {\n    let storage = null;\n    // `data` array is provided\n    if (config.data) {\n      storage = new MemoryStorage(config.data);\n    }\n\n    if (config.from) {\n      storage = new MemoryStorage(this.tableElementToArray(config.from));\n      // remove the source table element from the DOM\n      config.from.style.display = 'none';\n    }\n\n    if (config.server) {\n      storage = new ServerStorage(config.server);\n    }\n\n    if (!storage) {\n      log.error('Could not determine the storage type', true);\n    }\n\n    return storage;\n  }\n\n  /**\n   * Accepts a HTML table element and converts it into a 2D array of data\n   *\n   * TODO: This function can be a step in the pipeline: Convert Table -> Load into a memory storage -> ...\n   *\n   * @param element\n   */\n  static tableElementToArray(element: HTMLElement): any[][] {\n    const arr = [];\n    const tbody = element.querySelector('tbody');\n    const rows = tbody.querySelectorAll('tr');\n\n    for (const row of rows as any) {\n      const cells: HTMLElement[] = row.querySelectorAll('td');\n      const parsedRow = [];\n\n      for (const cell of cells) {\n        // try to capture a TD with single text element first\n        if (\n          cell.childNodes.length === 1 &&\n          cell.childNodes[0].nodeType === Node.TEXT_NODE\n        ) {\n          parsedRow.push(decode(cell.innerHTML));\n        } else {\n          parsedRow.push(html(cell.innerHTML));\n        }\n      }\n\n      arr.push(parsedRow);\n    }\n\n    return arr;\n  }\n}\n\nexport default StorageUtils;\n","import { PipelineProcessor, ProcessorType } from './processor';\nimport { ID } from '../util/id';\nimport log from '../util/log';\nimport { EventEmitter } from '../util/eventEmitter';\n\ninterface PipelineEvents<R> {\n  /**\n   * Generic updated event. Triggers the callback function when the pipeline\n   * is updated, including when a new processor is registered, a processor's props\n   * get updated, etc.\n   */\n  updated: <T, P>(processor: PipelineProcessor<T, P>) => void;\n  /**\n   * Triggers the callback function when a new\n   * processor is registered successfully\n   */\n  afterRegister: () => void;\n  /**\n   * Triggers the callback when a registered\n   * processor's property is updated\n   */\n  propsUpdated: () => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * is fully processed, before returning the results\n   *\n   * afterProcess will not be called if there is an\n   * error in the pipeline (i.e a step throw an Error)\n   */\n  afterProcess: (prev: R) => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * fails to process all steps or at least one step\n   * throws an Error\n   */\n  error: <T>(prev: T) => void;\n}\n\nclass Pipeline<R> extends EventEmitter<PipelineEvents<R>> {\n  // available steps for this pipeline\n  private readonly _steps: Map<\n    ProcessorType,\n    PipelineProcessor<unknown, unknown>[]\n  > = new Map<ProcessorType, PipelineProcessor<unknown, unknown>[]>();\n  // used to cache the results of processors using their id field\n  private cache: Map<string, unknown> = new Map<string, unknown>();\n  // keeps the index of the last updated processor in the registered\n  // processors list and will be used to invalidate the cache\n  // -1 means all new processors should be processed\n  private lastProcessorIndexUpdated = -1;\n\n  constructor(steps?: PipelineProcessor<unknown, unknown>[]) {\n    super();\n\n    if (steps) {\n      steps.forEach((step) => this.register(step));\n    }\n  }\n\n  /**\n   * Clears the `cache` array\n   */\n  clearCache(): void {\n    this.cache = new Map<string, object>();\n    this.lastProcessorIndexUpdated = -1;\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  register<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number = null,\n  ): PipelineProcessor<T, P> {\n    if (!processor) {\n      throw Error('Processor is not defined');\n    }\n\n    if (processor.type === null) {\n      throw Error('Processor type is not defined');\n    }\n\n    if (this.findProcessorIndexByID(processor.id) > -1) {\n      throw Error(`Processor ID ${processor.id} is already defined`);\n    }\n\n    // binding the propsUpdated callback to the Pipeline\n    processor.on('propsUpdated', this.processorPropsUpdated.bind(this));\n\n    this.addProcessorByPriority(processor, priority);\n    this.afterRegistered(processor);\n\n    return processor;\n  }\n\n  /**\n   * Tries to register a new processor\n   * @param processor\n   * @param priority\n   */\n  tryRegister<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number = null,\n  ): PipelineProcessor<T, P> | undefined {\n    try {\n      return this.register(processor, priority);\n    } catch (_) {\n      // noop\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Removes a processor from the list\n   *\n   * @param processor\n   */\n  unregister<T, P>(processor: PipelineProcessor<T, P>): void {\n    if (!processor) return;\n    if (this.findProcessorIndexByID(processor.id) === -1) return;\n\n    const subSteps = this._steps.get(processor.type);\n\n    if (subSteps && subSteps.length) {\n      this._steps.set(\n        processor.type,\n        subSteps.filter((proc) => proc != processor),\n      );\n      this.emit('updated', processor);\n    }\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  private addProcessorByPriority<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number,\n  ): void {\n    let subSteps = this._steps.get(processor.type);\n\n    if (!subSteps) {\n      const newSubStep = [];\n      this._steps.set(processor.type, newSubStep);\n      subSteps = newSubStep;\n    }\n\n    if (priority === null || priority < 0) {\n      subSteps.push(processor);\n    } else {\n      if (!subSteps[priority]) {\n        // slot is empty\n        subSteps[priority] = processor;\n      } else {\n        // slot is NOT empty\n        const first = subSteps.slice(0, priority - 1);\n        const second = subSteps.slice(priority + 1);\n\n        this._steps.set(processor.type, first.concat(processor).concat(second));\n      }\n    }\n  }\n\n  /**\n   * Flattens the _steps Map and returns a list of steps with their correct priorities\n   */\n  get steps(): PipelineProcessor<unknown, unknown>[] {\n    let steps: PipelineProcessor<unknown, unknown>[] = [];\n\n    for (const type of this.getSortedProcessorTypes()) {\n      const subSteps = this._steps.get(type);\n\n      if (subSteps && subSteps.length) {\n        steps = steps.concat(subSteps);\n      }\n    }\n\n    // to remove any undefined elements\n    return steps.filter((s) => s);\n  }\n\n  /**\n   * Accepts ProcessType and returns an array of the registered processes\n   * with the give type\n   *\n   * @param type\n   */\n  getStepsByType(type: ProcessorType): PipelineProcessor<unknown, unknown>[] {\n    return this.steps.filter((process) => process.type === type);\n  }\n\n  /**\n   * Returns a list of ProcessorType according to their priority\n   */\n  private getSortedProcessorTypes(): ProcessorType[] {\n    return Object.keys(ProcessorType)\n      .filter((key) => !isNaN(Number(key)))\n      .map((key) => Number(key));\n  }\n\n  /**\n   * Runs all registered processors based on their correct priority\n   * and returns the final output after running all steps\n   *\n   * @param data\n   */\n  async process(data?: R): Promise<R> {\n    const lastProcessorIndexUpdated = this.lastProcessorIndexUpdated;\n    const steps = this.steps;\n\n    let prev = data;\n\n    try {\n      for (const processor of steps) {\n        const processorIndex = this.findProcessorIndexByID(processor.id);\n\n        if (processorIndex >= lastProcessorIndexUpdated) {\n          // we should execute process() here since the last\n          // updated processor was before \"processor\".\n          // This is to ensure that we always have correct and up to date\n          // data from processors and also to skip them when necessary\n          prev = (await processor.process(prev)) as R;\n          this.cache.set(processor.id, prev);\n        } else {\n          // cached results already exist\n          prev = this.cache.get(processor.id) as R;\n        }\n      }\n    } catch (e) {\n      log.error(e);\n      // trigger the onError callback\n      this.emit('error', prev);\n\n      // rethrow\n      throw e;\n    }\n\n    // means the pipeline is up to date\n    this.lastProcessorIndexUpdated = steps.length;\n\n    // triggers the afterProcess callbacks with the results\n    this.emit('afterProcess', prev);\n\n    return prev;\n  }\n\n  /**\n   * Returns the registered processor's index in _steps array\n   *\n   * @param processorID\n   */\n  private findProcessorIndexByID(processorID: ID): number {\n    return this.steps.findIndex((p) => p.id == processorID);\n  }\n\n  /**\n   * Sets the last updates processors index locally\n   * This is used to invalid or skip a processor in\n   * the process() method\n   */\n  private setLastProcessorIndex<T, P>(\n    processor: PipelineProcessor<T, P>,\n  ): void {\n    const processorIndex = this.findProcessorIndexByID(processor.id);\n\n    if (this.lastProcessorIndexUpdated > processorIndex) {\n      this.lastProcessorIndexUpdated = processorIndex;\n    }\n  }\n\n  private processorPropsUpdated(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('propsUpdated');\n    this.emit('updated', processor);\n  }\n\n  private afterRegistered(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('afterRegister');\n    this.emit('updated', processor);\n  }\n}\n\nexport default Pipeline;\n","import Storage, { StorageResponse } from '../../storage/storage';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface StorageExtractorProps extends PipelineProcessorProps {\n  storage: Storage<any>;\n}\n\nclass StorageExtractor extends PipelineProcessor<\n  StorageResponse,\n  StorageExtractorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Extractor;\n  }\n\n  async _process(opts: any): Promise<StorageResponse> {\n    return await this.props.storage.get(opts);\n  }\n}\n\nexport default StorageExtractor;\n","import { PipelineProcessor, ProcessorType } from '../processor';\nimport Tabular from '../../tabular';\nimport { ArrayResponse } from './storageResponseToArray';\n\nclass ArrayToTabularTransformer extends PipelineProcessor<\n  Tabular,\n  Record<string, any>\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  _process(arrayResponse: ArrayResponse): Tabular {\n    const tabular = Tabular.fromArray(arrayResponse.data);\n\n    // for server-side storage\n    tabular.length = arrayResponse.total;\n\n    return tabular;\n  }\n}\n\nexport default ArrayToTabularTransformer;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerInitiatorProps extends PipelineProcessorProps {\n  serverStorageOptions: ServerStorageOptions;\n}\n\nclass ServerInitiator extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerInitiatorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Initiator;\n  }\n\n  _process(): ServerStorageOptions {\n    return Object.entries(this.props.serverStorageOptions)\n      .filter(([_, val]) => typeof val !== 'function')\n      .reduce(\n        (acc, [k, v]) => ({ ...acc, [k]: v }),\n        {},\n      ) as ServerStorageOptions;\n  }\n}\n\nexport default ServerInitiator;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { StorageResponse } from '../../storage/storage';\nimport { TCell, TData, TDataArray, TDataObject, TwoDArray } from '../../types';\nimport Header from '../../header';\nimport logger from '../../util/log';\n\nexport interface ArrayResponse {\n  data: TwoDArray<TCell>;\n  total: number;\n}\n\ninterface StorageResponseToArrayTransformerProps\n  extends PipelineProcessorProps {\n  header: Header;\n}\n\nclass StorageResponseToArrayTransformer extends PipelineProcessor<\n  ArrayResponse,\n  StorageResponseToArrayTransformerProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  private castData(data: TData): TwoDArray<TCell> {\n    if (!data || !data.length) {\n      return [];\n    }\n\n    if (!this.props.header || !this.props.header.columns) {\n      return data as TwoDArray<TCell>;\n    }\n\n    const columns = Header.leafColumns(this.props.header.columns);\n\n    // if it's a 2d array already\n    if (data[0] instanceof Array) {\n      return (data as TDataArray).map((row) => {\n        let pad = 0;\n\n        return columns.map((column, i) => {\n          // default `data` is provided for this column\n          if (column.data !== undefined) {\n            pad++;\n\n            if (typeof column.data === 'function') {\n              return column.data(row);\n            } else {\n              return column.data;\n            }\n          }\n\n          return row[i - pad];\n        });\n      });\n    }\n\n    // if it's an array of objects (but not array of arrays, i.e JSON payload)\n    if (typeof data[0] === 'object' && !(data[0] instanceof Array)) {\n      return (data as TDataObject).map((row) =>\n        columns.map((column, i) => {\n          if (column.data !== undefined) {\n            if (typeof column.data === 'function') {\n              return column.data(row);\n            } else {\n              return column.data;\n            }\n          } else if (column.id) {\n            return row[column.id];\n          } else {\n            logger.error(`Could not find the correct cell for column at position ${i}.\n                          Make sure either 'id' or 'selector' is defined for all columns.`);\n            return null;\n          }\n        }),\n      );\n    }\n\n    return [];\n  }\n\n  _process(storageResponse: StorageResponse): ArrayResponse {\n    return {\n      data: this.castData(storageResponse.data),\n      total: storageResponse.total,\n    };\n  }\n}\n\nexport default StorageResponseToArrayTransformer;\n","import { Config } from '../config';\nimport Pipeline from './pipeline';\nimport Tabular from '../tabular';\nimport StorageExtractor from './extractor/storage';\nimport ArrayToTabularTransformer from './transformer/arrayToTabular';\nimport ServerStorage from '../storage/server';\nimport ServerInitiator from './initiator/server';\nimport StorageResponseToArrayTransformer from './transformer/storageResponseToArray';\n\nclass PipelineUtils {\n  static createFromConfig(config: Config): Pipeline<Tabular> {\n    const pipeline = new Pipeline<Tabular>();\n\n    if (config.storage instanceof ServerStorage) {\n      pipeline.register(\n        new ServerInitiator({\n          serverStorageOptions: config.server,\n        }),\n      );\n    }\n\n    pipeline.register(new StorageExtractor({ storage: config.storage }));\n    pipeline.register(\n      new StorageResponseToArrayTransformer({ header: config.header }),\n    );\n    pipeline.register(new ArrayToTabularTransformer());\n\n    return pipeline;\n  }\n}\n\nexport default PipelineUtils;\n","export class Store<S = Record<string, unknown>> {\n  private state: S;\n  private listeners: ((current?: S, prev?: S) => void)[] = [];\n  private isDispatching = false;\n\n  constructor(initialState: S) {\n    this.state = initialState;\n  }\n\n  getState = () => this.state;\n  getListeners = () => this.listeners;\n\n  dispatch = (reducer: (state: S) => S) => {\n    if (typeof reducer !== 'function')\n      throw new Error('Reducer is not a function');\n    if (this.isDispatching)\n      throw new Error('Reducers may not dispatch actions');\n\n    this.isDispatching = true;\n\n    const prevState = this.state;\n    try {\n      this.state = reducer(this.state);\n    } finally {\n      this.isDispatching = false;\n    }\n\n    for (const listener of this.listeners) {\n      listener(this.state, prevState);\n    }\n\n    return this.state;\n  };\n\n  subscribe = (listener: (current?: S, prev?: S) => void): (() => void) => {\n    if (typeof listener !== 'function')\n      throw new Error('Listener is not a function');\n\n    this.listeners = [...this.listeners, listener];\n    return () =>\n      (this.listeners = this.listeners.filter((lis) => lis !== listener));\n  };\n}\n","import { CSSDeclaration, OneDArray, Status, TColumn, TData } from './types';\nimport Storage from './storage/storage';\nimport Pipeline from './pipeline/pipeline';\nimport Tabular from './tabular';\nimport { Search, SearchConfig } from './view/plugin/search/search';\nimport { Pagination, PaginationConfig } from './view/plugin/pagination';\nimport Header from './header';\nimport { ServerStorageOptions } from './storage/server';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\nimport { Language, Translator } from './i18n/language';\nimport { ComponentChild, createContext, createRef, RefObject } from 'preact';\nimport StorageUtils from './storage/storageUtils';\nimport PipelineUtils from './pipeline/pipelineUtils';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager, PluginPosition, Plugin } from './plugin';\nimport Grid from './grid';\nimport { Store } from './state/store';\n\nexport const ConfigContext = createContext(null);\n\nexport interface Config {\n  // a reference to the current Grid.js instance\n  instance: Grid;\n  store: Store;\n  eventEmitter: EventEmitter<GridEvents>;\n  plugin: PluginManager;\n  /** container element that is used to mount the Grid.js to */\n  // TODO: change this to an element reference\n  container?: Element;\n  /** pointer to the main table element */\n  tableRef?: RefObject<HTMLTableElement>;\n  data?: TData | (() => TData) | (() => Promise<TData>);\n  server?: ServerStorageOptions;\n  header?: Header;\n  /** to parse a HTML table and load the data */\n  from: HTMLElement;\n  storage: Storage<any>;\n  /** Pipeline process throttle timeout in milliseconds */\n  processingThrottleMs: number;\n  pipeline: Pipeline<Tabular>;\n  /** to automatically calculate the columns width */\n  autoWidth: boolean;\n  /** sets the width of the container and table */\n  width: string;\n  /** sets the height of the table */\n  height: string;\n  pagination: PaginationConfig | boolean;\n  sort: GenericSortConfig | boolean;\n  translator: Translator;\n  /** fixes the table header to the top of the table */\n  fixedHeader: boolean;\n  /** Resizable columns? */\n  resizable: boolean;\n  columns: OneDArray<TColumn | string | ComponentChild>;\n  search: SearchConfig | boolean;\n  language: Language;\n  plugins?: Plugin<any>[];\n  style?: Partial<{\n    table: CSSDeclaration;\n    td: CSSDeclaration;\n    th: CSSDeclaration;\n    container: CSSDeclaration;\n    header: CSSDeclaration;\n    footer: CSSDeclaration;\n  }>;\n  className?: Partial<{\n    table: string;\n    th: string;\n    thead: string;\n    tbody: string;\n    tr: string;\n    td: string;\n    container: string;\n    footer: string;\n    header: string;\n    search: string;\n    sort: string;\n    pagination: string;\n    paginationSummary: string;\n    paginationButton: string;\n    paginationButtonNext: string;\n    paginationButtonCurrent: string;\n    paginationButtonPrev: string;\n    loading: string;\n    notfound: string;\n    error: string;\n  }>;\n}\n\nexport class Config {\n  public constructor() {\n    Object.assign(this, Config.defaultConfig());\n  }\n  /**\n   * Assigns `updatedConfig` keys to the current config file\n   *\n   * @param partialConfig\n   */\n  assign(partialConfig: Partial<Config>): Config {\n    return Object.assign(this, partialConfig);\n  }\n\n  /**\n   * Updates the config from a partial Config\n   *\n   * @param partialConfig\n   */\n  update(partialConfig: Partial<Config>): Config {\n    if (!partialConfig) return this;\n\n    this.assign(\n      Config.fromPartialConfig({\n        ...this,\n        ...partialConfig,\n      }),\n    );\n\n    return this;\n  }\n\n  static defaultConfig(): Partial<Config> {\n    return {\n      store: new Store({\n        status: Status.Init,\n        header: undefined,\n        data: null,\n      }),\n      plugin: new PluginManager(),\n      tableRef: createRef(),\n      width: '100%',\n      height: 'auto',\n      processingThrottleMs: 100,\n      autoWidth: true,\n      style: {},\n      className: {},\n    };\n  }\n\n  static fromPartialConfig(partialConfig: Partial<Config>): Partial<Config> {\n    const config = new Config().assign(partialConfig);\n\n    // Sort\n    if (typeof partialConfig.sort === 'boolean' && partialConfig.sort) {\n      config.assign({\n        sort: {\n          multiColumn: true,\n        },\n      });\n    }\n\n    // Header\n    config.assign({\n      header: Header.createFromConfig(config),\n    });\n\n    config.assign({\n      storage: StorageUtils.createFromConfig(config),\n    });\n\n    config.assign({\n      pipeline: PipelineUtils.createFromConfig(config),\n    });\n\n    // Translator\n    config.assign({\n      translator: new Translator(config.language),\n    });\n\n    if (config.search) {\n      // Search\n      config.plugin.add({\n        id: 'search',\n        position: PluginPosition.Header,\n        component: Search,\n      });\n    }\n\n    if (config.pagination) {\n      // Pagination\n      config.plugin.remove('pagination');\n      config.plugin.add({\n        id: 'pagination',\n        position: PluginPosition.Footer,\n        component: Pagination,\n      });\n    }\n\n    // Additional plugins\n    if (config.plugins) {\n      config.plugins.forEach((p) => config.plugin.add(p));\n      config.plugins.forEach((p) => {config.plugin.remove(p.id);config.plugin.add(p);});\n    }\n\n    return config;\n  }\n}\n","import { h, ComponentChild, JSX } from 'preact';\n\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { CSSDeclaration, TColumn } from '../../types';\nimport Row from '../../row';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { PluginRenderer } from '../../plugin';\nimport { useConfig } from '../../hooks/useConfig';\n\nexport function TD(\n  props: {\n    cell: Cell;\n    row?: Row;\n    column?: TColumn;\n    style?: CSSDeclaration;\n    messageCell?: boolean;\n  } & Omit<JSX.HTMLAttributes<HTMLTableCellElement>, 'style'>,\n) {\n  const config = useConfig();\n\n  const content = (): ComponentChild => {\n    if (props.column && typeof props.column.formatter === 'function') {\n      return props.column.formatter(props.cell.data, props.row, props.column);\n    }\n\n    if (props.column && props.column.plugin) {\n      return (\n        <PluginRenderer\n          pluginId={props.column.id}\n          props={{\n            column: props.column,\n            cell: props.cell,\n            row: props.row,\n          }}\n        />\n      );\n    }\n\n    return props.cell.data;\n  };\n\n  const handleClick = (\n    e: JSX.TargetedMouseEvent<HTMLTableCellElement>,\n  ): void => {\n    if (props.messageCell) return;\n\n    config.eventEmitter.emit(\n      'cellClick',\n      e,\n      props.cell,\n      props.column,\n      props.row,\n    );\n  };\n\n  const getCustomAttributes = (\n    column: TColumn | null,\n  ): JSXInternal.HTMLAttributes<HTMLTableCellElement> => {\n    if (!column) return {};\n\n    if (typeof column.attributes === 'function') {\n      return column.attributes(props.cell.data, props.row, props.column);\n    } else {\n      return column.attributes;\n    }\n  };\n\n  return (\n    <td\n      role={props.role}\n      colSpan={props.colSpan}\n      data-column-id={props.column && props.column.id}\n      className={classJoin(\n        className('td'),\n        props.className,\n        config.className.td,\n      )}\n      style={{\n        ...props.style,\n        ...config.style.td,\n      }}\n      onClick={handleClick}\n      {...getCustomAttributes(props.column)}\n    >\n      {content()}\n    </td>\n  );\n}\n","import { h, JSX, ComponentChildren } from 'preact';\n\nimport Row from '../../row';\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { TColumn } from '../../types';\nimport { TD } from './td';\nimport Header from '../../header';\nimport { useConfig } from '../../hooks/useConfig';\nimport useSelector from '../../hooks/useSelector';\n\nexport function TR(props: {\n  row?: Row;\n  messageRow?: boolean;\n  children?: ComponentChildren;\n}) {\n  const config = useConfig();\n  const header = useSelector((state) => state.header);\n\n  const getColumn = (cellIndex: number): TColumn => {\n    if (header) {\n      const cols = Header.leafColumns(header.columns);\n\n      if (cols) {\n        return cols[cellIndex];\n      }\n    }\n\n    return null;\n  };\n\n  const handleClick = (\n    e: JSX.TargetedMouseEvent<HTMLTableRowElement>,\n  ): void => {\n    if (props.messageRow) return;\n    config.eventEmitter.emit('rowClick', e, props.row);\n  };\n\n  const getChildren = (): ComponentChildren => {\n    if (props.children) {\n      return props.children;\n    }\n\n    return props.row.cells.map((cell: Cell, i) => {\n      const column = getColumn(i);\n\n      if (column && column.hidden) return null;\n\n      return <TD key={cell.id} cell={cell} row={props.row} column={column} />;\n    });\n  };\n\n  return (\n    <tr\n      className={classJoin(className('tr'), config.className.tr)}\n      onClick={handleClick}\n    >\n      {getChildren()}\n    </tr>\n  );\n}\n","import { h } from 'preact';\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { TR } from './tr';\nimport { TD } from './td';\n\nexport function MessageRow(props: {\n  message: string;\n  colSpan?: number;\n  className?: string;\n}) {\n  return (\n    <TR messageRow={true}>\n      <TD\n        role=\"alert\"\n        colSpan={props.colSpan}\n        messageCell={true}\n        cell={new Cell(props.message)}\n        className={classJoin(\n          className('message'),\n          props.className ? props.className : null,\n        )}\n      />\n    </TR>\n  );\n}\n","import { h } from 'preact';\nimport Row from '../../row';\nimport { TR } from './tr';\nimport { classJoin, className } from '../../util/className';\nimport { Status } from '../../types';\nimport { MessageRow } from './messageRow';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useTranslator } from '../../i18n/language';\nimport useSelector from '../../hooks/useSelector';\n\nexport function TBody() {\n  const config = useConfig();\n  const data = useSelector((state) => state.data);\n  const status = useSelector((state) => state.status);\n  const header = useSelector((state) => state.header);\n  const _ = useTranslator();\n\n  const headerLength = () => {\n    if (header) {\n      return header.visibleColumns.length;\n    }\n    return 0;\n  };\n\n  return (\n    <tbody className={classJoin(className('tbody'), config.className.tbody)}>\n      {data &&\n        data.rows.map((row: Row) => {\n          return <TR key={row.id} row={row} />;\n        })}\n\n      {status === Status.Loading && (!data || data.length === 0) && (\n        <MessageRow\n          message={_('loading')}\n          colSpan={headerLength()}\n          className={classJoin(className('loading'), config.className.loading)}\n        />\n      )}\n\n      {status === Status.Rendered && data && data.length === 0 && (\n        <MessageRow\n          message={_('noRecordsFound')}\n          colSpan={headerLength()}\n          className={classJoin(\n            className('notfound'),\n            config.className.notfound,\n          )}\n        />\n      )}\n\n      {status === Status.Error && (\n        <MessageRow\n          message={_('error')}\n          colSpan={headerLength()}\n          className={classJoin(className('error'), config.className.error)}\n        />\n      )}\n    </tbody>\n  );\n}\n","import { Comparator, TCell } from '../../types';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport Row from '../../row';\nimport log from '../../util/log';\n\ninterface NativeSortProps extends PipelineProcessorProps {\n  columns: {\n    index: number;\n    // 1 ascending, -1 descending\n    direction?: 1 | -1;\n    compare?: Comparator<TCell>;\n  }[];\n}\n\nclass NativeSort extends PipelineProcessor<Tabular, NativeSortProps> {\n  protected validateProps(): void {\n    for (const condition of this.props.columns) {\n      if (condition.direction === undefined) {\n        condition.direction = 1;\n      }\n\n      if (condition.direction !== 1 && condition.direction !== -1) {\n        log.error(`Invalid sort direction ${condition.direction}`);\n      }\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Sort;\n  }\n\n  private compare(cellA: TCell, cellB: TCell): number {\n    if (cellA > cellB) {\n      return 1;\n    } else if (cellA < cellB) {\n      return -1;\n    }\n\n    return 0;\n  }\n\n  private compareWrapper(a: Row, b: Row): number {\n    let cmp = 0;\n\n    for (const column of this.props.columns) {\n      if (cmp === 0) {\n        const cellA = a.cells[column.index].data;\n        const cellB = b.cells[column.index].data;\n\n        if (typeof column.compare === 'function') {\n          cmp |= column.compare(cellA, cellB) * column.direction;\n        } else {\n          cmp |= this.compare(cellA, cellB) * column.direction;\n        }\n      } else {\n        break;\n      }\n    }\n\n    return cmp;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const sortedRows = [...data.rows];\n    sortedRows.sort(this.compareWrapper.bind(this));\n\n    const sorted = new Tabular(sortedRows);\n    // we have to set the tabular length manually\n    // because of the server-side storage\n    sorted.length = data.length;\n\n    return sorted;\n  }\n}\n\nexport default NativeSort;\n","import { Comparator, TCell } from '../../../types';\n\nexport const SortColumn =\n  (\n    index: number,\n    direction: 1 | -1,\n    multi?: boolean,\n    compare?: Comparator<TCell>,\n  ) =>\n  (state) => {\n    let columns = state.sort?.columns\n      ? state.sort.columns.map((x) => {\n          return { ...x };\n        })\n      : [];\n    const count = columns.length;\n    const column = columns.find((x) => x.index === index);\n    const exists = column !== undefined;\n\n    let add = false;\n    let reset = false;\n    let remove = false;\n    let update = false;\n\n    if (!exists) {\n      // the column has not been sorted\n      if (count === 0) {\n        // the first column to be sorted\n        add = true;\n      } else if (count > 0 && !multi) {\n        // remove the previously sorted column\n        // and sort the current column\n        add = true;\n        reset = true;\n      } else if (count > 0 && multi) {\n        // multi-sorting\n        // sort this column as well\n        add = true;\n      }\n    } else {\n      // the column has been sorted before\n      if (!multi) {\n        // single column sorting\n        if (count === 1) {\n          update = true;\n        } else if (count > 1) {\n          // this situation happens when we have already entered\n          // multi-sorting mode but then user tries to sort a single column\n          reset = true;\n          add = true;\n        }\n      } else {\n        // multi sorting\n        if (column.direction === -1) {\n          // remove the current column from the\n          // sorted columns array\n          remove = true;\n        } else {\n          update = true;\n        }\n      }\n    }\n\n    if (reset) {\n      // resetting the sorted columns\n      columns = [];\n    }\n\n    if (add) {\n      columns.push({\n        index: index,\n        direction: direction,\n        compare: compare,\n      });\n    } else if (update) {\n      const index = columns.indexOf(column);\n      columns[index].direction = direction;\n    } else if (remove) {\n      const index = columns.indexOf(column);\n      columns.splice(index, 1);\n    }\n\n    return {\n      ...state,\n      sort: {\n        columns: columns,\n      },\n    };\n  };\n\nexport const SortToggle =\n  (index: number, multi: boolean, compare?: Comparator<TCell>) => (state) => {\n    const columns = state.sort ? [...state.sort.columns] : [];\n    const column = columns.find((x) => x.index === index);\n\n    if (!column) {\n      return {\n        ...state,\n        ...SortColumn(index, 1, multi, compare)(state),\n      };\n    }\n\n    return {\n      ...state,\n      ...SortColumn(\n        index,\n        column.direction === 1 ? -1 : 1,\n        multi,\n        compare,\n      )(state),\n    };\n  };\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\nimport { TColumnSort } from '../../types';\n\ninterface ServerSortProps extends PipelineProcessorProps {\n  columns: TColumnSort[];\n  url?: (prevUrl: string, columns: TColumnSort[]) => string;\n  body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n}\n\nclass ServerSort extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerSortProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerSort;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.columns);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.columns);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerSort;\n","import { h, JSX } from 'preact';\n\nimport { classJoin, className } from '../../../util/className';\nimport { PipelineProcessor, ProcessorType } from '../../../pipeline/processor';\nimport NativeSort from '../../../pipeline/sort/native';\nimport { Comparator, TCell, TColumnSort } from '../../../types';\nimport * as actions from './actions';\nimport ServerSort from '../../../pipeline/sort/server';\nimport { useEffect, useState } from 'preact/hooks';\nimport { useConfig } from '../../../hooks/useConfig';\nimport { useTranslator } from '../../../i18n/language';\nimport useSelector from '../../../hooks/useSelector';\nimport { useStore } from '../../../hooks/useStore';\n\n// column specific config\nexport interface SortConfig {\n  compare?: Comparator<TCell>;\n}\n\n// generic sort config:\n//\n// Config {\n//    sort: GenericSortConfig\n// }\n//\nexport interface GenericSortConfig {\n  multiColumn?: boolean;\n  server?: {\n    url?: (prevUrl: string, columns: TColumnSort[]) => string;\n    body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n  };\n}\n\nexport function Sort(\n  props: {\n    // column index\n    index: number;\n  } & SortConfig,\n) {\n  const config = useConfig();\n  const { dispatch } = useStore();\n  const _ = useTranslator();\n  const [direction, setDirection] = useState(0);\n  const sortConfig = config.sort as GenericSortConfig;\n  const state = useSelector((state) => state.sort);\n  const processorType =\n    typeof sortConfig?.server === 'object'\n      ? ProcessorType.ServerSort\n      : ProcessorType.Sort;\n\n  const getSortProcessor = () => {\n    const processors = config.pipeline.getStepsByType(processorType);\n    if (processors.length) {\n      return processors[0];\n    }\n    return undefined;\n  };\n\n  const createSortProcessor = () => {\n    if (processorType === ProcessorType.ServerSort) {\n      return new ServerSort({\n        columns: state ? state.columns : [],\n        ...sortConfig.server,\n      });\n    }\n\n    return new NativeSort({\n      columns: state ? state.columns : [],\n    });\n  };\n\n  const getOrCreateSortProcessor = (): PipelineProcessor<any, any> => {\n    const existingSortProcessor = getSortProcessor();\n    if (existingSortProcessor) {\n      return existingSortProcessor;\n    }\n\n    return createSortProcessor();\n  };\n\n  useEffect(() => {\n    const processor = getOrCreateSortProcessor();\n    config.pipeline.tryRegister(processor);\n\n    return () => config.pipeline.unregister(processor);\n  }, [config]);\n\n  /**\n   * Sets the internal state of component\n   */\n  useEffect(() => {\n    if (!state) return;\n\n    const currentColumn = state.columns.find((x) => x.index === props.index);\n\n    if (!currentColumn) {\n      setDirection(0);\n    } else {\n      setDirection(currentColumn.direction);\n    }\n  }, [state]);\n\n  useEffect(() => {\n    const processor = getSortProcessor();\n\n    if (!processor) return;\n    if (!state) return;\n\n    processor.setProps({\n      columns: state.columns,\n    });\n  }, [state]);\n\n  const changeDirection = (e: JSX.TargetedMouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // to sort two or more columns at the same time\n    dispatch(\n      actions.SortToggle(\n        props.index,\n        e.shiftKey === true && sortConfig.multiColumn,\n        props.compare,\n      ),\n    );\n  };\n\n  const getSortClassName = (direction: number) => {\n    if (direction === 1) {\n      return 'asc';\n    } else if (direction === -1) {\n      return 'desc';\n    }\n\n    return 'neutral';\n  };\n\n  return (\n    <button\n      // because the corresponding <th> has tabIndex=0\n      tabIndex={-1}\n      aria-label={_(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n      title={_(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n      className={classJoin(\n        className('sort'),\n        className('sort', getSortClassName(direction)),\n        config.className.sort,\n      )}\n      onClick={changeDirection}\n    />\n  );\n}\n","/**\n * Throttle a given function\n * @param fn Function to be called\n * @param wait Throttle timeout in milliseconds\n * @returns Throttled function\n */\nexport const throttle = (fn: (...args) => void, wait = 100) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  let lastTime = Date.now();\n\n  const execute = (...args) => {\n    lastTime = Date.now();\n    fn(...args);\n  };\n\n  return (...args) => {\n    const currentTime = Date.now();\n    const elapsed = currentTime - lastTime;\n\n    if (elapsed >= wait) {\n      // If enough time has passed since the last call, execute the function immediately\n      execute(...args);\n    } else {\n      // If not enough time has passed, schedule the function call after the remaining delay\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n\n      timeoutId = setTimeout(() => {\n        execute(...args);\n        timeoutId = null;\n      }, wait - elapsed);\n    }\n  };\n};\n","import { h, RefObject } from 'preact';\nimport { classJoin, className } from '../../../util/className';\nimport { TColumn } from '../../../types';\nimport { throttle } from '../../../util/throttle';\n\nexport function Resize(props: {\n  column: TColumn;\n  thRef: RefObject<HTMLTableCellElement>;\n}) {\n  let moveFn: (e) => void;\n\n  const getPageX = (e: MouseEvent | TouchEvent) => {\n    if (e instanceof MouseEvent) {\n      return Math.floor(e.pageX);\n    } else {\n      return Math.floor(e.changedTouches[0].pageX);\n    }\n  };\n\n  const start = (e: MouseEvent | TouchEvent) => {\n    e.stopPropagation();\n\n    const thElement = props.thRef.current;\n\n    const offsetStart = parseInt(thElement.style.width, 10) - getPageX(e);\n\n    moveFn = throttle((e) => move(e, offsetStart), 10);\n\n    document.addEventListener('mouseup', end);\n    document.addEventListener('touchend', end);\n    document.addEventListener('mousemove', moveFn);\n    document.addEventListener('touchmove', moveFn);\n  };\n\n  const move = (e: MouseEvent | TouchEvent, offsetStart: number) => {\n    e.stopPropagation();\n\n    const thElement = props.thRef.current;\n\n    if (offsetStart + getPageX(e) >= parseInt(thElement.style.minWidth, 10)) {\n      thElement.style.width = `${offsetStart + getPageX(e)}px`;\n    }\n  };\n\n  const end = (e: MouseEvent | TouchEvent) => {\n    e.stopPropagation();\n\n    document.removeEventListener('mouseup', end);\n    document.removeEventListener('mousemove', moveFn);\n    document.removeEventListener('touchmove', moveFn);\n    document.removeEventListener('touchend', end);\n  };\n\n  return (\n    <div\n      className={classJoin(className('th'), className('resizable'))}\n      onMouseDown={start}\n      onTouchStart={start}\n      onClick={(e) => e.stopPropagation()}\n    />\n  );\n}\n","import { h, ComponentChild, JSX } from 'preact';\n\nimport { classJoin, className } from '../../util/className';\nimport { CSSDeclaration, TColumn } from '../../types';\nimport { GenericSortConfig, Sort } from '../plugin/sort/sort';\nimport { PluginRenderer } from '../../plugin';\nimport { Resize } from '../plugin/resize/resize';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../../hooks/useConfig';\nimport * as SortActions from '../plugin/sort/actions';\nimport { useStore } from '../../hooks/useStore';\n\nexport function TH(\n  props: {\n    index: number;\n    column: TColumn;\n    style?: CSSDeclaration;\n  } & Omit<JSX.HTMLAttributes<HTMLTableCellElement>, 'style'>,\n) {\n  const config = useConfig();\n  const thRef = useRef(null);\n  const [style, setStyle] = useState({});\n  const { dispatch } = useStore();\n\n  useEffect(() => {\n    // sets the `top` style if the current TH is fixed\n    if (config.fixedHeader && thRef.current) {\n      const offsetTop = thRef.current.offsetTop;\n\n      if (typeof offsetTop === 'number') {\n        setStyle({\n          top: offsetTop,\n        });\n      }\n    }\n  }, [thRef]);\n\n  const isSortable = (): boolean => props.column.sort != undefined;\n  const isResizable = (): boolean => props.column.resizable;\n  const onClick = (\n    e:\n      | JSX.TargetedMouseEvent<HTMLTableCellElement>\n      | JSX.TargetedKeyboardEvent<HTMLTableCellElement>,\n  ) => {\n    e.stopPropagation();\n\n    if (isSortable()) {\n      const sortConfig = config.sort as GenericSortConfig;\n\n      dispatch(\n        SortActions.SortToggle(\n          props.index,\n          e.shiftKey === true && sortConfig.multiColumn,\n          props.column.sort.compare,\n        ),\n      );\n    }\n  };\n\n  const keyDown = (e: JSX.TargetedKeyboardEvent<HTMLTableCellElement>) => {\n    // Enter key\n    if (isSortable() && e.which === 13) {\n      onClick(e);\n    }\n  };\n\n  const content = (): ComponentChild => {\n    if (props.column.name !== undefined) {\n      return props.column.name;\n    }\n\n    if (props.column.plugin !== undefined) {\n      return (\n        <PluginRenderer\n          pluginId={props.column.plugin.id}\n          props={{\n            column: props.column,\n          }}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  const getCustomAttributes = () => {\n    const column = props.column;\n\n    if (!column) return {};\n\n    if (typeof column.attributes === 'function') {\n      return column.attributes(null, null, props.column);\n    } else {\n      return column.attributes;\n    }\n  };\n\n  return (\n    <th\n      ref={thRef}\n      data-column-id={props.column && props.column.id}\n      className={classJoin(\n        className('th'),\n        isSortable() ? className('th', 'sort') : null,\n        config.fixedHeader ? className('th', 'fixed') : null,\n        config.className.th,\n      )}\n      onClick={onClick}\n      style={{\n        ...config.style.th,\n        ...{\n          minWidth: props.column.minWidth,\n          width: props.column.width,\n        },\n        ...style,\n        ...props.style,\n      }}\n      onKeyDown={keyDown}\n      rowSpan={props.rowSpan > 1 ? props.rowSpan : undefined}\n      colSpan={props.colSpan > 1 ? props.colSpan : undefined}\n      {...getCustomAttributes()}\n      {...(isSortable() ? { tabIndex: 0 } : {})}\n    >\n      <div className={className('th', 'content')}>{content()}</div>\n      {isSortable() && <Sort index={props.index} {...props.column.sort} />}\n      {isResizable() &&\n        props.index < config.header.visibleColumns.length - 1 && (\n          <Resize column={props.column} thRef={thRef} />\n        )}\n    </th>\n  );\n}\n","import { h } from 'preact';\nimport { TR } from './tr';\nimport { TH } from './th';\nimport { classJoin, className } from '../../util/className';\nimport Header from '../../header';\nimport { TColumn } from '../../types';\nimport { calculateRowColSpans } from '../../util/table';\nimport { useConfig } from '../../hooks/useConfig';\nimport useSelector from '../../hooks/useSelector';\n\nexport function THead() {\n  const config = useConfig();\n  const header = useSelector((state) => state.header);\n\n  const renderColumn = (\n    column: TColumn,\n    rowIndex: number,\n    columnIndex: number,\n    totalRows: number,\n  ) => {\n    const { rowSpan, colSpan } = calculateRowColSpans(\n      column,\n      rowIndex,\n      totalRows,\n    );\n\n    return (\n      <TH\n        column={column}\n        index={columnIndex}\n        colSpan={colSpan}\n        rowSpan={rowSpan}\n      />\n    );\n  };\n\n  const renderRow = (row: TColumn[], rowIndex: number, totalRows: number) => {\n    // because the only sortable columns are leaf columns (not parents)\n    const leafColumns = Header.leafColumns(header.columns);\n\n    return (\n      <TR>\n        {row.map((col) => {\n          if (col.hidden) return null;\n\n          return renderColumn(\n            col,\n            rowIndex,\n            leafColumns.indexOf(col),\n            totalRows,\n          );\n        })}\n      </TR>\n    );\n  };\n\n  const renderRows = () => {\n    const rows = Header.tabularFormat(header.columns);\n\n    return rows.map((row, rowIndex) => renderRow(row, rowIndex, rows.length));\n  };\n\n  if (header) {\n    return (\n      <thead\n        key={header.id}\n        className={classJoin(className('thead'), config.className.thead)}\n      >\n        {renderRows()}\n      </thead>\n    );\n  }\n\n  return null;\n}\n","import { TColumn } from '../types';\nimport Header from '../header';\n\nexport function calculateRowColSpans(\n  column: TColumn,\n  rowIndex: number,\n  totalRows: number,\n): { rowSpan: number; colSpan: number } {\n  const depth = Header.maximumDepth(column);\n  const remainingRows = totalRows - rowIndex;\n  const rowSpan = Math.floor(remainingRows - depth - depth / remainingRows);\n  const colSpan = (column.columns && column.columns.length) || 1;\n\n  return {\n    rowSpan: rowSpan,\n    colSpan: colSpan,\n  };\n}\n","import Header from 'src/header';\nimport Tabular from '../tabular';\nimport { Status } from '../types';\n\nexport const SetStatusToRendered = () => (state) => {\n  if (state.status === Status.Loaded) {\n    return {\n      ...state,\n      status: Status.Rendered,\n    };\n  }\n\n  return state;\n};\n\nexport const SetLoadingData = () => (state) => {\n  return {\n    ...state,\n    status: Status.Loading,\n  };\n};\n\nexport const SetData = (data: Tabular) => (state) => {\n  if (!data) return state;\n\n  return {\n    ...state,\n    data: data,\n    status: Status.Loaded,\n  };\n};\n\nexport const SetDataErrored = () => (state) => {\n  return {\n    ...state,\n    data: null,\n    status: Status.Error,\n  };\n};\n\nexport const SetHeader = (header: Header) => (state) => {\n  return {\n    ...state,\n    header: header,\n  };\n};\n\nexport const SetTableRef = (tableRef) => (state) => {\n  return {\n    ...state,\n    tableRef: tableRef,\n  };\n};\n","import { h } from 'preact';\nimport { TBody } from './tbody';\nimport { THead } from './thead';\nimport { classJoin, className } from '../../util/className';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useEffect, useRef } from 'preact/hooks';\nimport * as actions from '../actions';\nimport { useStore } from '../../hooks/useStore';\n\nexport function Table() {\n  const config = useConfig();\n  const tableRef = useRef(null);\n  const { dispatch } = useStore();\n\n  useEffect(() => {\n    if (tableRef) dispatch(actions.SetTableRef(tableRef));\n  }, [tableRef]);\n\n  return (\n    <table\n      ref={tableRef}\n      role=\"grid\"\n      className={classJoin(className('table'), config.className.table)}\n      style={{\n        ...config.style.table,\n        ...{\n          height: config.height,\n        },\n      }}\n    >\n      <THead />\n      <TBody />\n    </table>\n  );\n}\n","import { classJoin, className } from '../util/className';\nimport { h } from 'preact';\nimport { PluginPosition, PluginRenderer } from '../plugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../hooks/useConfig';\n\nexport function HeaderContainer() {\n  const [isActive, setIsActive] = useState(true);\n  const headerRef = useRef(null);\n  const config = useConfig();\n\n  useEffect(() => {\n    if (headerRef.current.children.length === 0) {\n      setIsActive(false);\n    }\n  }, [headerRef]);\n\n  if (isActive) {\n    return (\n      <div\n        ref={headerRef}\n        className={classJoin(className('head'), config.className.header)}\n        style={{ ...config.style.header }}\n      >\n        <PluginRenderer position={PluginPosition.Header} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { h } from 'preact';\nimport { classJoin, className } from '../util/className';\nimport { PluginPosition, PluginRenderer } from '../plugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../hooks/useConfig';\n\nexport function FooterContainer() {\n  const footerRef = useRef(null);\n  const [isActive, setIsActive] = useState(true);\n  const config = useConfig();\n\n  useEffect(() => {\n    if (footerRef.current.children.length === 0) {\n      setIsActive(false);\n    }\n  }, [footerRef]);\n\n  if (isActive) {\n    return (\n      <div\n        ref={footerRef}\n        className={classJoin(className('footer'), config.className.footer)}\n        style={{ ...config.style.footer }}\n      >\n        <PluginRenderer position={PluginPosition.Footer} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { createRef, h } from 'preact';\nimport { classJoin, className } from '../util/className';\nimport { Status } from '../types';\nimport { Table } from './table/table';\nimport { HeaderContainer } from './headerContainer';\nimport { FooterContainer } from './footerContainer';\nimport log from '../util/log';\nimport { useEffect } from 'preact/hooks';\nimport * as actions from './actions';\nimport { useStore } from '../hooks/useStore';\nimport useSelector from '../hooks/useSelector';\nimport { useConfig } from '../hooks/useConfig';\nimport { throttle } from '../util/throttle';\n\nexport function Container() {\n  const config = useConfig();\n  const { dispatch } = useStore();\n  const status = useSelector((state) => state.status);\n  const data = useSelector((state) => state.data);\n  const tableRef = useSelector((state) => state.tableRef);\n  const tempRef = createRef();\n\n  const processPipeline = throttle(async () => {\n    dispatch(actions.SetLoadingData());\n\n    try {\n      const data = await config.pipeline.process();\n      dispatch(actions.SetData(data));\n\n      // TODO: do we need this setTimemout?\n      setTimeout(() => {\n        dispatch(actions.SetStatusToRendered());\n      }, 0);\n    } catch (e) {\n      log.error(e);\n      dispatch(actions.SetDataErrored());\n    }\n  }, config.processingThrottleMs);\n\n  useEffect(() => {\n    // set the initial header object\n    // we update the header width later when \"data\"\n    // is available in the state\n    dispatch(actions.SetHeader(config.header));\n\n    processPipeline();\n    config.pipeline.on('updated', processPipeline);\n\n    return () => config.pipeline.off('updated', processPipeline);\n  }, []);\n\n  useEffect(() => {\n    if (config.header && status === Status.Loaded && data?.length) {\n      // now that we have the data, let's adjust columns width\n      // NOTE: that we only calculate the columns width once\n      dispatch(\n        actions.SetHeader(config.header.adjustWidth(config, tableRef, tempRef)),\n      );\n    }\n  }, [data, config, tempRef]);\n\n  return (\n    <div\n      role=\"complementary\"\n      className={classJoin(\n        'gridjs',\n        className('container'),\n        status === Status.Loading ? className('loading') : null,\n        config.className.container,\n      )}\n      style={{\n        ...config.style.container,\n        ...{\n          width: config.width,\n        },\n      }}\n    >\n      {status === Status.Loading && (\n        <div className={className('loading-bar')} />\n      )}\n\n      <HeaderContainer />\n\n      <div className={className('wrapper')} style={{ height: config.height }}>\n        <Table />\n      </div>\n\n      <FooterContainer />\n\n      <div ref={tempRef} id=\"gridjs-temp\" className={className('temp')} />\n    </div>\n  );\n}\n","import { Config } from './config';\nimport { h, render, VNode } from 'preact';\nimport { Container } from './view/container';\nimport log from './util/log';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager } from './plugin';\nimport { ConfigContext } from './config';\n\nclass Grid extends EventEmitter<GridEvents> {\n  public config: Config;\n  public plugin: PluginManager;\n\n  constructor(config?: Partial<Config>) {\n    super();\n    this.config = new Config()\n      .assign({ instance: this, eventEmitter: this })\n      .update(config);\n    this.plugin = this.config.plugin;\n  }\n\n  public updateConfig(config: Partial<Config>): this {\n    this.config.update(config);\n    return this;\n  }\n\n  createElement(): VNode {\n    return h(ConfigContext.Provider, {\n      value: this.config,\n      children: h(Container, {}),\n    });\n  }\n\n  /**\n   * Uses the existing container and tries to clear the cache\n   * and re-render the existing Grid.js instance again. This is\n   * useful when a new config is set/updated.\n   *\n   */\n  forceRender(): this {\n    if (!this.config || !this.config.container) {\n      log.error(\n        'Container is empty. Make sure you call render() before forceRender()',\n        true,\n      );\n    }\n\n    this.destroy();\n\n    // recreate the Grid instance\n    render(this.createElement(), this.config.container);\n\n    return this;\n  }\n\n  /**\n   * Deletes the Grid.js instance\n   */\n  destroy(): void {\n    this.config.pipeline.clearCache();\n    // TODO: not sure if it's a good idea to render a null element but I couldn't find a better way\n    render(null, this.config.container);\n  }\n\n  /**\n   * Mounts the Grid.js instance to the container\n   * and renders the instance\n   *\n   * @param container\n   */\n  render(container: Element): this {\n    if (!container) {\n      log.error('Container element cannot be null', true);\n    }\n\n    if (container.childNodes.length > 0) {\n      log.error(\n        `The container element ${container} is not empty. Make sure the container is empty and call render() again`,\n      );\n      return this;\n    }\n\n    this.config.container = container;\n    render(this.createElement(), container);\n\n    return this;\n  }\n}\n\nexport default Grid;\n"],"names":["Status","n","l","u","t","i","o","r","f","e","ProcessorType","c","s","a","h","Array","isArray","v","p","parentNode","removeChild","y","arguments","length","children","call","defaultProps","d","type","props","key","ref","__k","__","__b","__e","__d","__c","constructor","__v","__i","__u","vnode","_","current","g","b","this","context","m","k","base","w","push","x","__r","debounceRendering","sort","shift","__P","L","__n","ownerSVGElement","M","C","String","H","N","P","z","S","nextSibling","insertBefore","I","setProperty","test","T","style","cssText","replace","toLowerCase","slice","Date","now","addEventListener","D","A","removeEventListener","removeAttribute","setAttribute","event","$","contextType","value","__E","prototype","render","O","sub","state","__h","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","indexOf","j","diffed","some","localName","nodeType","document","createTextNode","createElementNS","createElement","is","data","childNodes","attributes","name","__html","innerHTML","unmount","componentWillUnmount","q","firstChild","generateUUID","Math","random","toString","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","bind","resolve","setTimeout","Base","id","_id","HTMLElement","parentElement","dangerouslySetInnerHTML","content","html","Cell","super","update","cast","outerHTML","Row","cells","_cells","cell","index","toArray","map","fromCells","Tabular","rows","_rows","_length","len","row","fromRows","fromArray","oneDtoTwoD","EventEmitter","callbacks","init","listeners","on","listener","off","eventName","filter","emit","args","deepEqual","obj1","obj2","keys1","Object","keys","keys2","hasOwnProperty","PipelineProcessor","_props","setProps","process","validateProps","Function","result","_process","updatedProps","_extends","GlobalSearchFilter","Filter","keyword","trim","columns","ignoreHiddenColumns","tabular","selector","rowIndex","cellIndex","hidden","element","RegExp","className","reduce","prev","cur","classJoin","classNames","ServerGlobalSearchFilter","ServerFilter","options","updates","url","body","__H","__V","B","__N","every","F","requestAnimationFrame","clearTimeout","cancelAnimationFrame","useConfig","useContext","ConfigContext","enUS","search","placeholder","sortAsc","sortDesc","pagination","previous","next","navigate","page","pages","showing","of","to","results","loading","noRecordsFound","error","Translator","language","_language","_defaultLanguage","getString","message","lang","splitted","split","val","join","translate","messageFormat","useTranslator","config","translator","SearchKeyword","payload","useStore","store","useSelector","setCurrent","useState","getState","useEffect","subscribe","updated","Search","_config$className","processor","setProcessor","undefined","dispatch","server","header","actions","pipeline","register","unregister","debouncedOnInput","useCallback","debounce","func","waitFor","timeout","target","HTMLInputElement","debounceTimeout","onInput","PaginationLimit","isNaN","Number","limit","Error","Limit","ServerPaginationLimit","ServerLimit","Pagination","summary","nextButton","prevButton","buttonsCount","resetPageOnUpdate","useRef","currentPage","setCurrentPage","total","setTotal","onUpdate","updatedProcessor","ceil","setPage","Fragment","role","paginationSummary","title","min","tabIndex","disabled","onClick","paginationButton","paginationButtonPrev","renderPages","maxCount","pagePivot","floor","from","paginationButtonCurrent","paginationButtonNext","width","containerWidth","parseInt","px","ShadowTable","shadowTable","tableRef","cloneNode","position","zIndex","visibility","nodeElement","appendChild","camelCase","str","words","word","charAt","toUpperCase","PluginPosition","log","format","throwException","msg","console","warn","info","PluginManager","plugins","get","find","add","plugin","remove","splice","list","order","PluginRenderer","pluginId","component","Header","_columns","visibleColumns","adjustWidth","tempRef","container","autoWidth","clientWidth","widths","tableElement","querySelector","tableClassName","tableStyle","tableLayout","padding","margin","border","outline","obj","querySelectorAll","getAttribute","minWidth","getShadowTableWidths","column","tabularFormat","concat","setSort","sortConfig","cols","setResizable","resizable","setID","logger","populatePlugins","pluginManager","fromColumns","isValidElement","typedColumn","createFromConfig","fromHTMLTable","ths","th","nextRow","col","leafColumns","maximumDepth","Storage","MemoryStorage","set","ServerStorage","handler","response","handle","ok","json","status","statusText","opts","fetch","res","StorageUtils","storage","tableElementToArray","display","arr","parsedRow","Node","TEXT_NODE","DOMParser","parseFromString","documentElement","textContent","Pipeline","steps","_steps","Map","cache","lastProcessorIndexUpdated","step","clearCache","priority","findProcessorIndexByID","processorPropsUpdated","addProcessorByPriority","afterRegistered","tryRegister","subSteps","proc","newSubStep","first","second","getSortedProcessorTypes","getStepsByType","processorID","findIndex","setLastProcessorIndex","processorIndex","StorageExtractor","Extractor","ArrayToTabularTransformer","Transformer","arrayResponse","ServerInitiator","Initiator","entries","serverStorageOptions","acc","StorageResponseToArrayTransformer","castData","pad","storageResponse","PipelineUtils","Store","initialState","isDispatching","getListeners","reducer","prevState","lis","Consumer","Provider","createContext","Config","assign","defaultConfig","partialConfig","fromPartialConfig","Init","height","processingThrottleMs","multiColumn","Footer","TD","colSpan","td","messageCell","eventEmitter","formatter","TR","tr","messageRow","getColumn","MessageRow","TBody","headerLength","tbody","Loading","Rendered","notfound","NativeSort","condition","direction","Sort","compare","cellA","cellB","compareWrapper","cmp","sortedRows","sorted","SortColumn","multi","_state$sort","count","reset","SortToggle","ServerSort","setDirection","processorType","getSortProcessor","processors","currentColumn","getSortClassName","preventDefault","stopPropagation","shiftKey","throttle","fn","wait","timeoutId","lastTime","execute","elapsed","Resize","moveFn","getPageX","MouseEvent","pageX","changedTouches","start","offsetStart","thRef","move","end","thElement","onMouseDown","onTouchStart","TH","setStyle","fixedHeader","offsetTop","top","isSortable","SortActions","onKeyDown","which","rowSpan","getCustomAttributes","THead","thead","renderRows","renderRow","totalRows","renderColumn","columnIndex","depth","remainingRows","calculateRowColSpans","SetHeader","SetTableRef","Table","table","HeaderContainer","isActive","setIsActive","headerRef","FooterContainer","footerRef","footer","Container","processPipeline","async","Loaded","Grid","instance","updateConfig","forceRender","destroy"],"mappings":"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"}