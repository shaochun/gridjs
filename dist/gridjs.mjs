function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(this,arguments)}var e;!function(t){t[t.Init=0]="Init",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Rendered=3]="Rendered",t[t.Error=4]="Error"}(e||(e={}));var n,r,o,s,i,l,a,c,u,d,p={},_=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=Array.isArray;function m(t,e){for(var n in e)t[n]=e[n];return t}function g(t){var e=t.parentNode;e&&e.removeChild(t)}function y(t,e,r){var o,s,i,l={};for(i in e)"key"==i?o=e[i]:"ref"==i?s=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?n.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===l[i]&&(l[i]=t.defaultProps[i]);return v(t,l,o,s,null)}function v(t,e,n,s,i){var l={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++o:i,__i:-1,__u:0};return null==i&&null!=r.vnode&&r.vnode(l),l}function b(){return{current:null}}function w(t){return t.children}function x(t,e){this.props=t,this.context=e}function N(t,e){if(null==e)return t.__?N(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?N(t):null}function k(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return k(t)}}function S(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!C.__r++||l!==r.debounceRendering)&&((l=r.debounceRendering)||a)(C)}function C(){var t,e,n,o,s,l,a,u,d;for(i.sort(c);t=i.shift();)t.__d&&(e=i.length,o=void 0,l=(s=(n=t).__v).__e,u=[],d=[],(a=n.__P)&&((o=m({},s)).__v=s.__v+1,r.vnode&&r.vnode(o),A(a,o,s,n.__n,void 0!==a.ownerSVGElement,32&s.__u?[l]:null,u,null==l?N(s):l,!!(32&s.__u),d),o.__.__k[o.__i]=o,M(u,o,d),o.__e!=l&&k(o)),i.length>e&&i.sort(c));C.__r=0}function P(t,e,n,r,o,s,i,l,a,c,u){var d,h,m,g,y,b=r&&r.__k||_,x=e.length;for(n.__d=a,function(t,e,n){var r,o,s,i,l,a=e.length,c=n.length,u=c,d=0;for(t.__k=[],r=0;r<a;r++)null!=(o=t.__k[r]=null==(o=e[r])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?v(null,o,null,null,o):f(o)?v(w,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?v(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=t,o.__b=t.__b+1,l=I(o,n,i=r+d,u),o.__i=l,s=null,-1!==l&&(u--,(s=n[l])&&(s.__u|=131072)),null==s||null===s.__v?(-1==l&&d--,"function"!=typeof o.type&&(o.__u|=65536)):l!==i&&(l===i+1?d++:l>i?u>a-i?d+=l-i:d--:d=l<i&&l==i-1?l-i:0,l!==r+d&&(o.__u|=65536))):(s=n[r])&&null==s.key&&s.__e&&(s.__e==t.__d&&(t.__d=N(s)),$(s,s,!1),n[r]=null,u--);if(u)for(r=0;r<c;r++)null!=(s=n[r])&&0==(131072&s.__u)&&(s.__e==t.__d&&(t.__d=N(s)),$(s,s))}(n,e,b),a=n.__d,d=0;d<x;d++)null!=(m=n.__k[d])&&"boolean"!=typeof m&&"function"!=typeof m&&(h=-1===m.__i?p:b[m.__i]||p,m.__i=d,A(t,m,h,o,s,i,l,a,c,u),g=m.__e,m.ref&&h.ref!=m.ref&&(h.ref&&R(h.ref,null,m),u.push(m.ref,m.__c||g,m)),null==y&&null!=g&&(y=g),65536&m.__u||h.__k===m.__k?a=E(m,a,t):"function"==typeof m.type&&void 0!==m.__d?a=m.__d:g&&(a=g.nextSibling),m.__d=void 0,m.__u&=-196609);n.__d=a,n.__e=y}function E(t,e,n){var r,o;if("function"==typeof t.type){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=E(r[o],e,n));return e}return t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function I(t,e,n,r){var o=t.key,s=t.type,i=n-1,l=n+1,a=e[n];if(null===a||a&&o==a.key&&s===a.type)return n;if(r>(null!=a&&0==(131072&a.__u)?1:0))for(;i>=0||l<e.length;){if(i>=0){if((a=e[i])&&0==(131072&a.__u)&&o==a.key&&s===a.type)return i;i--}if(l<e.length){if((a=e[l])&&0==(131072&a.__u)&&o==a.key&&s===a.type)return l;l++}}return-1}function L(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||h.test(e)?n:n+"px"}function T(t,e,n,r,o){var s;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||L(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||L(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=Date.now(),t.addEventListener(e,s?H:D,s)):t.removeEventListener(e,s?H:D,s);else{if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&"rowSpan"!==e&&"colSpan"!==e&&"role"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,n))}}function D(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(r.event?r.event(t):t)}function H(t){return this.l[t.type+!0](r.event?r.event(t):t)}function A(t,e,n,o,s,i,l,a,c,u){var d,p,_,h,g,y,v,b,N,k,S,C,E,I,L,T=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=e.__e=n.__e]),(d=r.__b)&&d(e);t:if("function"==typeof T)try{if(b=e.props,N=(d=T.contextType)&&o[d.__c],k=d?N?N.props.value:d.__:o,n.__c?v=(p=e.__c=n.__c).__=p.__E:("prototype"in T&&T.prototype.render?e.__c=p=new T(b,k):(e.__c=p=new x(b,k),p.constructor=T,p.render=U),N&&N.sub(p),p.props=b,p.state||(p.state={}),p.context=k,p.__n=o,_=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=T.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=m({},p.__s)),m(p.__s,T.getDerivedStateFromProps(b,p.__s))),h=p.props,g=p.state,p.__v=e,_)null==T.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==T.getDerivedStateFromProps&&b!==h&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(b,k),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(b,p.__s,k)||e.__v===n.__v)){for(e.__v!==n.__v&&(p.props=b,p.state=p.__s,p.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(t){t&&(t.__=e)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&l.push(p);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(b,p.__s,k),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(h,g,y)})}if(p.context=k,p.props=b,p.__P=t,p.__e=!1,C=r.__r,E=0,"prototype"in T&&T.prototype.render){for(p.state=p.__s,p.__d=!1,C&&C(e),d=p.render(p.props,p.state,p.context),I=0;I<p._sb.length;I++)p.__h.push(p._sb[I]);p._sb=[]}else do{p.__d=!1,C&&C(e),d=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++E<25);p.state=p.__s,null!=p.getChildContext&&(o=m(m({},o),p.getChildContext())),_||null==p.getSnapshotBeforeUpdate||(y=p.getSnapshotBeforeUpdate(h,g)),P(t,f(L=null!=d&&d.type===w&&null==d.key?d.props.children:d)?L:[L],e,n,o,s,i,l,a,c,u),p.base=e.__e,e.__u&=-161,p.__h.length&&l.push(p),v&&(p.__E=p.__=null)}catch(t){e.__v=null,c||null!=i?(e.__e=a,e.__u|=c?160:32,i[i.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),r.__e(t,e,n)}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=F(n.__e,e,n,o,s,i,l,c,u);(d=r.diffed)&&d(e)}function M(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)R(n[o],n[++o],n[++o]);r.__c&&r.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){r.__e(t,e.__v)}})}function F(t,e,r,o,s,i,l,a,c){var u,d,_,h,m,y,v,b=r.props,w=e.props,x=e.type;if("svg"===x&&(s=!0),null!=i)for(u=0;u<i.length;u++)if((m=i[u])&&"setAttribute"in m==!!x&&(x?m.localName===x:3===m.nodeType)){t=m,i[u]=null;break}if(null==t){if(null===x)return document.createTextNode(w);t=s?document.createElementNS("http://www.w3.org/2000/svg",x):document.createElement(x,w.is&&w),i=null,a=!1}if(null===x)b===w||a&&t.data===w||(t.data=w);else{if(i=i&&n.call(t.childNodes),b=r.props||p,!a&&null!=i)for(b={},u=0;u<t.attributes.length;u++)b[(m=t.attributes[u]).name]=m.value;for(u in b)m=b[u],"children"==u||("dangerouslySetInnerHTML"==u?_=m:"key"===u||u in w||T(t,u,null,m,s));for(u in w)m=w[u],"children"==u?h=m:"dangerouslySetInnerHTML"==u?d=m:"value"==u?y=m:"checked"==u?v=m:"key"===u||a&&"function"!=typeof m||b[u]===m||T(t,u,m,b[u],s);if(d)a||_&&(d.__html===_.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(_&&(t.innerHTML=""),P(t,f(h)?h:[h],e,r,o,s&&"foreignObject"!==x,i,l,i?i[0]:r.__k&&N(r,0),a,c),null!=i)for(u=i.length;u--;)null!=i[u]&&g(i[u]);a||(u="value",void 0!==y&&(y!==t[u]||"progress"===x&&!y||"option"===x&&y!==b[u])&&T(t,u,y,b[u],!1),u="checked",void 0!==v&&v!==t[u]&&T(t,u,v,b[u],!1))}return t}function R(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function $(t,e,n){var o,s;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||R(o,null,e)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null,t.__c=void 0}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&$(o[s],e,n||"function"!=typeof t.type);n||null==t.__e||g(t.__e),t.__=t.__e=t.__d=void 0}function U(t,e,n){return this.constructor(t,n)}function j(t,e,o){var s,i,l,a;r.__&&r.__(t,e),i=(s="function"==typeof o)?null:o&&o.__k||e.__k,l=[],a=[],A(e,t=(!s&&o||e).__k=y(w,null,[t]),i||p,p,void 0!==e.ownerSVGElement,!s&&o?[o]:i?null:e.firstChild?n.call(e.childNodes):null,l,!s&&o?o:i?i.__e:e.firstChild,s,a),M(l,t,a)}function W(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}n=_.slice,r={__e:function(t,e,n,r){for(var o,s,i;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(t)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,r||{}),i=o.__d),i)return o.__E=o}catch(e){t=e}throw t}},o=0,s=function(t){return null!=t&&null==t.constructor},x.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof t&&(t=t(m({},n),this.props)),t&&m(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),S(this))},x.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),S(this))},x.prototype.render=w,i=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(t,e){return t.__v.__b-e.__v.__b},C.__r=0,u=0;class O{constructor(t){this._id=void 0,this._id=t||W()}get id(){return this._id}}function B(t){return y(t.parentElement||"span",{dangerouslySetInnerHTML:{__html:t.content}})}function q(t,e){return y(B,{content:t,parentElement:e})}class z extends O{constructor(t){super(),this.data=void 0,this.update(t)}cast(t){return t instanceof HTMLElement?q(t.outerHTML):t}update(t){return this.data=this.cast(t),this}}class V extends O{constructor(t){super(),this._cells=void 0,this.cells=t||[]}cell(t){return this._cells[t]}get cells(){return this._cells}set cells(t){this._cells=t}toArray(){return this.cells.map(t=>t.data)}static fromCells(t){return new V(t.map(t=>new z(t.data)))}get length(){return this.cells.length}}class G extends O{constructor(t){super(),this._rows=void 0,this._length=void 0,this.rows=t instanceof Array?t:t instanceof V?[t]:[]}get rows(){return this._rows}set rows(t){this._rows=t}get length(){return this._length||this.rows.length}set length(t){this._length=t}toArray(){return this.rows.map(t=>t.toArray())}static fromRows(t){return new G(t.map(t=>V.fromCells(t.cells)))}static fromArray(t){return t=function(t){return!t[0]||t[0]instanceof Array?t:[t]}(t),new G(t.map(t=>new V(t.map(t=>new z(t)))))}}class K{constructor(){this.callbacks=void 0}init(t){this.callbacks||(this.callbacks={}),t&&!this.callbacks[t]&&(this.callbacks[t]=[])}listeners(){return this.callbacks}on(t,e){return this.init(t),this.callbacks[t].push(e),this}off(t,e){const n=t;return this.init(),this.callbacks[n]&&0!==this.callbacks[n].length?(this.callbacks[n]=this.callbacks[n].filter(t=>t!=e),this):this}emit(t,...e){const n=t;return this.init(n),this.callbacks[n].length>0&&(this.callbacks[n].forEach(t=>t(...e)),!0)}}function X(t,e){if(typeof t!=typeof e)return!1;if(null===t&&null===e)return!0;if("object"!=typeof t)return t===e;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!X(t[n],e[n]))return!1;return!0}const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const r of n)if(!e.hasOwnProperty(r)||!X(t[r],e[r]))return!1;return!0}!function(t){t[t.Initiator=0]="Initiator",t[t.ServerFilter=1]="ServerFilter",t[t.ServerSort=2]="ServerSort",t[t.ServerLimit=3]="ServerLimit",t[t.Extractor=4]="Extractor",t[t.Transformer=5]="Transformer",t[t.Filter=6]="Filter",t[t.Sort=7]="Sort",t[t.Limit=8]="Limit"}(d||(d={}));class Z extends K{constructor(t){super(),this.id=void 0,this._props=void 0,this._props={},this.id=W(),t&&this.setProps(t)}process(...t){this.validateProps instanceof Function&&this.validateProps(...t),this.emit("beforeProcess",...t);const e=this._process(...t);return this.emit("afterProcess",...t),e}setProps(e){const n=t({},this._props,e);return X(n,this._props)||(this._props=n,this.emit("propsUpdated",this)),this}get props(){return this._props}}class J extends Z{get type(){return d.Filter}_process(t){return this.props.keyword?(e=String(this.props.keyword).trim(),n=this.props.columns,r=this.props.ignoreHiddenColumns,o=t,s=this.props.selector,e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),new G(o.rows.filter((t,o)=>t.cells.some((t,i)=>{if(!t)return!1;if(r&&n&&n[i]&&"object"==typeof n[i]&&n[i].hidden)return!1;let l="";if("function"==typeof s)l=s(t.data,o,i);else if("object"==typeof t.data){const e=t.data;e&&e.props&&e.props.content&&(l=e.props.content)}else l=String(t.data);return new RegExp(e,"gi").test(l)})))):t;var e,n,r,o,s}}function Q(...t){return`gridjs${t.reduce((t,e)=>`${t}-${e}`,"")}`}function Y(...t){return t.map(t=>t?t.toString():"").filter(t=>t).reduce((t,e)=>`${t||""} ${e}`,"").trim()}class tt extends Z{get type(){return d.ServerFilter}_process(e){if(!this.props.keyword)return e;const n={};return this.props.url&&(n.url=this.props.url(e.url,this.props.keyword)),this.props.body&&(n.body=this.props.body(e.body,this.props.keyword)),t({},e,n)}}var et,nt,rt,ot,st=0,it=[],lt=[],at=r.__b,ct=r.__r,ut=r.diffed,dt=r.__c,pt=r.unmount;function _t(t,e){r.__h&&r.__h(nt,t,st||e),st=0;var n=nt.__H||(nt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:lt}),n.__[t]}function ht(t){return st=1,function(t,e,n){var r=_t(et++,2);if(r.t=t,!r.__c&&(r.__=[kt(void 0,e),function(t){var e=r.__N?r.__N[0]:r.__[0],n=r.t(e,t);e!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=nt,!nt.u)){var o=function(t,e,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter(function(t){return t.__c});if(o.every(function(t){return!t.__N}))return!s||s.call(this,t,e,n);var i=!1;return o.forEach(function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(i=!0)}}),!(!i&&r.__c.props===t)&&(!s||s.call(this,t,e,n))};nt.u=!0;var s=nt.shouldComponentUpdate,i=nt.componentWillUpdate;nt.componentWillUpdate=function(t,e,n){if(this.__e){var r=s;s=void 0,o(t,e,n),s=r}i&&i.call(this,t,e,n)},nt.shouldComponentUpdate=o}return r.__N||r.__}(kt,t)}function ft(t,e){var n=_t(et++,3);!r.__s&&Nt(n.__H,e)&&(n.__=t,n.i=e,nt.__H.__h.push(n))}function mt(t){return st=5,gt(function(){return{current:t}},[])}function gt(t,e){var n=_t(et++,7);return Nt(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function yt(){for(var t;t=it.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(wt),t.__H.__h.forEach(xt),t.__H.__h=[]}catch(e){t.__H.__h=[],r.__e(e,t.__v)}}r.__b=function(t){nt=null,at&&at(t)},r.__r=function(t){ct&&ct(t),et=0;var e=(nt=t.__c).__H;e&&(rt===nt?(e.__h=[],nt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=lt,t.__N=t.i=void 0})):(e.__h.forEach(wt),e.__h.forEach(xt),e.__h=[],et=0)),rt=nt},r.diffed=function(t){ut&&ut(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==it.push(e)&&ot===r.requestAnimationFrame||((ot=r.requestAnimationFrame)||bt)(yt)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==lt&&(t.__=t.__V),t.i=void 0,t.__V=lt})),rt=nt=null},r.__c=function(t,e){e.some(function(t){try{t.__h.forEach(wt),t.__h=t.__h.filter(function(t){return!t.__||xt(t)})}catch(n){e.some(function(t){t.__h&&(t.__h=[])}),e=[],r.__e(n,t.__v)}}),dt&&dt(t,e)},r.unmount=function(t){pt&&pt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(t){try{wt(t)}catch(t){e=t}}),n.__H=void 0,e&&r.__e(e,n.__v))};var vt="function"==typeof requestAnimationFrame;function bt(t){var e,n=function(){clearTimeout(r),vt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);vt&&(e=requestAnimationFrame(n))}function wt(t){var e=nt,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),nt=e}function xt(t){var e=nt;t.__c=t.__(),nt=e}function Nt(t,e){return!t||t.length!==e.length||e.some(function(e,n){return e!==t[n]})}function kt(t,e){return"function"==typeof e?e(t):e}function St(){return function(t){var e=nt.context[t.__c],n=_t(et++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(nt)),e.props.value):t.__}(ne)}var Ct={search:{placeholder:"輸入關鍵字..."},sort:{sortAsc:"升冪排序",sortDesc:"降冪排序"},pagination:{previous:"前一頁",next:"下一頁",navigate:(t,e)=>`Page ${t} of ${e}`,page:t=>`Page ${t}`,showing:"顯示",of:"，總共",to:"到",results:"筆結果"},loading:"Loading...",noRecordsFound:"No matching records found",error:"An error happened while fetching the data"};class Pt{constructor(t){this._language=void 0,this._defaultLanguage=void 0,this._language=t,this._defaultLanguage=Ct}getString(t,e){if(!e||!t)return null;const n=t.split("."),r=n[0];if(e[r]){const t=e[r];return"string"==typeof t?()=>t:"function"==typeof t?t:this.getString(n.slice(1).join("."),t)}return null}translate(t,...e){let n;return n=this.getString(t,this._language)||this.getString(t,this._defaultLanguage),n?n(...e):t}}function Et(){const t=St();return function(e,...n){return t.translator.translate(e,...n)}}const It=e=>n=>t({},n,{search:{keyword:e}});function Lt(){return St().store}function Tt(t){const e=Lt(),[n,r]=ht(t(e.getState()));return ft(()=>e.subscribe(()=>{const o=t(e.getState());n!==o&&r(o)}),[]),n}function Dt(){var t;const[e,n]=ht(void 0),r=St(),o=r.search,s=Et(),{dispatch:i}=Lt(),l=Tt(t=>t.search);ft(()=>{e&&e.setProps({keyword:null==l?void 0:l.keyword})},[l,e]),ft(()=>{n(o.server?new tt({keyword:o.keyword,url:o.server.url,body:o.server.body}):new J({keyword:o.keyword,columns:r.header&&r.header.columns,ignoreHiddenColumns:o.ignoreHiddenColumns||void 0===o.ignoreHiddenColumns,selector:o.selector})),o.keyword&&i(It(o.keyword))},[o]),ft(()=>{if(e)return r.pipeline.register(e),()=>r.pipeline.unregister(e)},[r,e]);const a=function(t,e){return st=8,gt(function(){return t},e)}(((t,e)=>{let n;return(...t)=>new Promise(r=>{n&&clearTimeout(n),n=setTimeout(()=>r((t=>{t.target instanceof HTMLInputElement&&i(It(t.target.value))})(...t)),e)})})(0,e instanceof tt?o.debounceTimeout||250:0),[o,e]);return y("div",{className:Q(Y("search",null==(t=r.className)?void 0:t.search))},y("input",{type:"search",placeholder:s("search.placeholder"),"aria-label":s("search.placeholder"),onInput:a,className:Y(Q("input"),Q("search","input")),value:(null==l?void 0:l.keyword)||"",hidden:!0,style:"display: none;"}))}class Ht extends Z{validateProps(){if(isNaN(Number(this.props.limit))||isNaN(Number(this.props.page)))throw Error("Invalid parameters passed")}get type(){return d.Limit}_process(t){const e=this.props.page;return new G(t.rows.slice(e*this.props.limit,(e+1)*this.props.limit))}}class At extends Z{get type(){return d.ServerLimit}_process(e){const n={};return this.props.url&&(n.url=this.props.url(e.url,this.props.page,this.props.limit)),this.props.body&&(n.body=this.props.body(e.body,this.props.page,this.props.limit)),t({},e,n)}}function Mt(){const t=St(),{server:e,summary:n=!0,nextButton:r=!0,prevButton:o=!0,buttonsCount:s=3,limit:i=10,page:l=0,resetPageOnUpdate:a=!0}=t.pagination,c=mt(null),[u,d]=ht(l),[p,_]=ht(0),h=Et();ft(()=>(e?(c.current=new At({limit:i,page:u,url:e.url,body:e.body}),t.pipeline.register(c.current)):(c.current=new Ht({limit:i,page:u}),t.pipeline.register(c.current)),c.current instanceof At?t.pipeline.on("afterProcess",t=>_(t.length)):c.current instanceof Ht&&c.current.on("beforeProcess",t=>_(t.length)),t.pipeline.on("updated",f),t.pipeline.on("error",()=>{_(0),d(0)}),()=>{t.pipeline.unregister(c.current),t.pipeline.off("updated",f)}),[]);const f=t=>{a&&t!==c.current&&d(0)},m=()=>Math.ceil(p/i),g=t=>{if(t>=m()||t<0||t===u)return null;d(t),c.current.setProps({page:t})};return y("div",{className:Y(Q("pagination"),t.className.pagination)},y(w,null,n&&p>0&&y("div",{role:"status","aria-live":"polite",className:Y(Q("summary"),t.className.paginationSummary),title:h("pagination.navigate",u+1,m())},h("pagination.showing")," ",y("b",null,h(""+(u*i+1)))," ",h("pagination.to")," ",y("b",null,h(`${Math.min((u+1)*i,p)}`))," ",h("pagination.of")," ",y("b",null,h(`${p}`))," ",h("pagination.results"))),y("div",{className:Q("pages")},o&&y("button",{tabIndex:0,role:"button",disabled:0===u,onClick:()=>g(u-1),title:h("pagination.previous"),"aria-label":h("pagination.previous"),className:Y(t.className.paginationButton,t.className.paginationButtonPrev)},h("pagination.previous")),(()=>{if(s<=0)return null;const e=Math.min(m(),s);let n=Math.min(u,Math.floor(e/2));return u+Math.floor(e/2)>=m()&&(n=e-(m()-u)),y(w,null,m()>e&&u-n>0&&y(w,null,y("button",{tabIndex:0,role:"button",onClick:()=>g(0),title:h("pagination.firstPage"),"aria-label":h("pagination.firstPage"),className:t.className.paginationButton},h("1")),y("button",{tabIndex:-1,className:Y(Q("spread"),t.className.paginationButton)},"...")),Array.from(Array(e).keys()).map(t=>u+(t-n)).map(e=>y("button",{tabIndex:0,role:"button",onClick:()=>g(e),className:Y(u===e?Y(Q("currentPage"),t.className.paginationButtonCurrent):null,t.className.paginationButton),title:h("pagination.page",e+1),"aria-label":h("pagination.page",e+1)},h(`${e+1}`))),m()>e&&m()>u+n+1&&y(w,null,y("button",{tabIndex:-1,className:Y(Q("spread"),t.className.paginationButton)},"..."),y("button",{tabIndex:0,role:"button",onClick:()=>g(m()-1),title:h("pagination.page",m()),"aria-label":h("pagination.page",m()),className:t.className.paginationButton},h(`${m()}`))))})(),r&&y("button",{tabIndex:0,role:"button",disabled:m()===u+1||0===m(),onClick:()=>g(u+1),title:h("pagination.next"),"aria-label":h("pagination.next"),className:Y(t.className.paginationButton,t.className.paginationButtonNext)},h("pagination.next"))))}function Ft(t,e){return"string"==typeof t?t.indexOf("%")>-1?e/100*parseInt(t,10):parseInt(t,10):t}function Rt(t){return t?`${Math.floor(t)}px`:""}function $t(t){const e=t.tableRef.cloneNode(!0);return e.style.position="absolute",e.style.width="100%",e.style.zIndex="-2147483640",e.style.visibility="hidden",y("div",{ref:t=>{t&&t.appendChild(e)}})}function Ut(t){if(!t)return"";const e=t.split(" ");return 1===e.length&&/([a-z][A-Z])+/g.test(t)?t:e.map(function(t,e){return 0==e?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}).join("")}var jt,Wt=new class{format(t,e){return`[Grid.js] [${e.toUpperCase()}]: ${t}`}error(t,e=!1){const n=this.format(t,"error");if(e)throw Error(n);console.error(n)}warn(t){console.warn(this.format(t,"warn"))}info(t){console.info(this.format(t,"info"))}};!function(t){t[t.Header=0]="Header",t[t.Footer=1]="Footer",t[t.Cell=2]="Cell"}(jt||(jt={}));class Ot{constructor(){this.plugins=void 0,this.plugins=[]}get(t){return this.plugins.find(e=>e.id===t)}add(t){return t.id?this.get(t.id)?(Wt.error(`Duplicate plugin ID: ${t.id}`),this):(this.plugins.push(t),this):(Wt.error("Plugin ID cannot be empty"),this)}remove(t){const e=this.get(t);return e&&this.plugins.splice(this.plugins.indexOf(e),1),this}list(t){let e;return e=null!=t||null!=t?this.plugins.filter(e=>e.position===t):this.plugins,e.sort((t,e)=>t.order&&e.order?t.order-e.order:1)}}function Bt(e){const n=St();if(e.pluginId){const r=n.plugin.get(e.pluginId);return r?y(w,{},y(r.component,t({plugin:r},e.props))):null}return void 0!==e.position?y(w,{},n.plugin.list(e.position).map(e=>y(e.component,t({plugin:e},this.props.props)))):null}class qt extends O{constructor(){super(),this._columns=void 0,this._columns=[]}get columns(){return this._columns}set columns(t){this._columns=t}get visibleColumns(){return this._columns.filter(t=>!t.hidden)}adjustWidth(e,n,r){const o=e.container,s=e.autoWidth;if(!o)return this;const i=o.clientWidth;let l={};n.current&&s&&(j(y($t,{tableRef:n.current}),r.current),l=function(e){const n=e.querySelector("table");if(!n)return{};const r=n.className,o=n.style.cssText;n.className=`${r} ${Q("shadowTable")}`,n.style.tableLayout="auto",n.style.width="auto",n.style.padding="0",n.style.margin="0",n.style.border="none",n.style.outline="none";let s=Array.from(n.parentNode.querySelectorAll("thead th")).reduce((e,n)=>(n.style.width=`${n.clientWidth}px`,t({[n.getAttribute("data-column-id")]:{minWidth:n.clientWidth}},e)),{});return n.className=r,n.style.cssText=o,n.style.tableLayout="auto",s=Array.from(n.parentNode.querySelectorAll("thead th")).reduce((t,e)=>(t[e.getAttribute("data-column-id")].width=e.clientWidth,t),s),s}(r.current));for(const t of qt.tabularFormat(this.columns).reduce((t,e)=>t.concat(e),[]))t.columns&&t.columns.length>0||(!t.width&&s?t.id in l&&(t.width=Rt(l[t.id].width),t.minWidth=Rt(l[t.id].minWidth)):t.width=Rt(Ft(t.width,i)));return n.current&&s&&j(null,r.current),this}setSort(e,n){const r=n||this.columns||[];for(const n of r)n.columns&&n.columns.length>0?n.sort=void 0:void 0===n.sort&&e?n.sort={}:n.sort?"object"==typeof n.sort&&(n.sort=t({},n.sort)):n.sort=void 0,n.columns&&this.setSort(e,n.columns)}setResizable(t,e){const n=e||this.columns||[];for(const e of n)void 0===e.resizable&&(e.resizable=t),e.columns&&this.setResizable(t,e.columns)}setID(t){const e=t||this.columns||[];for(const t of e)t.id||"string"!=typeof t.name||(t.id=Ut(t.name)),t.id||Wt.error('Could not find a valid ID for one of the columns. Make sure a valid "id" is set for all columns.'),t.columns&&this.setID(t.columns)}populatePlugins(e,n){for(const r of n)void 0!==r.plugin&&e.add(t({id:r.id},r.plugin,{position:jt.Cell}))}static fromColumns(t){const e=new qt;for(const n of t)if("string"==typeof n||s(n))e.columns.push({name:n});else if("object"==typeof n){const t=n;t.columns&&(t.columns=qt.fromColumns(t.columns).columns),"object"==typeof t.plugin&&void 0===t.data&&(t.data=null),e.columns.push(n)}return e}static createFromConfig(t){const e=new qt;return t.from?e.columns=qt.fromHTMLTable(t.from).columns:t.columns?e.columns=qt.fromColumns(t.columns).columns:!t.data||"object"!=typeof t.data[0]||t.data[0]instanceof Array||(e.columns=Object.keys(t.data[0]).map(t=>({name:t}))),e.columns.length?(e.setID(),e.setSort(t.sort),e.setResizable(t.resizable),e.populatePlugins(t.plugin,e.columns),e):null}static fromHTMLTable(t){const e=new qt,n=t.querySelector("thead").querySelectorAll("th");for(const t of n)e.columns.push({name:t.innerHTML,width:t.width});return e}static tabularFormat(t){let e=[];const n=t||[];let r=[];if(n&&n.length){e.push(n);for(const t of n)t.columns&&t.columns.length&&(r=r.concat(t.columns));r.length&&(e=e.concat(this.tabularFormat(r)))}return e}static leafColumns(t){let e=[];const n=t||[];if(n&&n.length)for(const t of n)t.columns&&0!==t.columns.length||e.push(t),t.columns&&(e=e.concat(this.leafColumns(t.columns)));return e}static maximumDepth(t){return this.tabularFormat([t]).length-1}}class zt{}class Vt extends zt{constructor(t){super(),this.data=void 0,this.set(t)}async get(){const t=await this.data();return{data:t,total:t.length}}set(t){return t instanceof Array?this.data=()=>t:t instanceof Function&&(this.data=t),this}}class Gt extends zt{constructor(t){super(),this.options=void 0,this.options=t}handler(t){return"function"==typeof this.options.handle?this.options.handle(t):t.ok?t.json():(Wt.error(`Could not fetch data: ${t.status} - ${t.statusText}`,!0),null)}get(e){const n=t({},this.options,e);return"function"==typeof n.data?n.data(n):fetch(n.url,n).then(this.handler.bind(this)).then(t=>({data:n.then(t),total:"function"==typeof n.total?n.total(t):void 0}))}}class Kt{static createFromConfig(t){let e=null;return t.data&&(e=new Vt(t.data)),t.from&&(e=new Vt(this.tableElementToArray(t.from)),t.from.style.display="none"),t.server&&(e=new Gt(t.server)),e||Wt.error("Could not determine the storage type",!0),e}static tableElementToArray(t){const e=[],n=t.querySelector("tbody").querySelectorAll("tr");for(const t of n){const n=t.querySelectorAll("td"),o=[];for(const t of n)1===t.childNodes.length&&t.childNodes[0].nodeType===Node.TEXT_NODE?o.push((r=t.innerHTML,(new DOMParser).parseFromString(r,"text/html").documentElement.textContent)):o.push(q(t.innerHTML));e.push(o)}var r;return e}}class Xt extends K{constructor(t){super(),this._steps=new Map,this.cache=new Map,this.lastProcessorIndexUpdated=-1,t&&t.forEach(t=>this.register(t))}clearCache(){this.cache=new Map,this.lastProcessorIndexUpdated=-1}register(t,e=null){if(!t)throw Error("Processor is not defined");if(null===t.type)throw Error("Processor type is not defined");if(this.findProcessorIndexByID(t.id)>-1)throw Error(`Processor ID ${t.id} is already defined`);return t.on("propsUpdated",this.processorPropsUpdated.bind(this)),this.addProcessorByPriority(t,e),this.afterRegistered(t),t}tryRegister(t,e=null){try{return this.register(t,e)}catch(t){}}unregister(t){if(!t)return;if(-1===this.findProcessorIndexByID(t.id))return;const e=this._steps.get(t.type);e&&e.length&&(this._steps.set(t.type,e.filter(e=>e!=t)),this.emit("updated",t))}addProcessorByPriority(t,e){let n=this._steps.get(t.type);if(!n){const e=[];this._steps.set(t.type,e),n=e}if(null===e||e<0)n.push(t);else if(n[e]){const r=n.slice(0,e-1),o=n.slice(e+1);this._steps.set(t.type,r.concat(t).concat(o))}else n[e]=t}get steps(){let t=[];for(const e of this.getSortedProcessorTypes()){const n=this._steps.get(e);n&&n.length&&(t=t.concat(n))}return t.filter(t=>t)}getStepsByType(t){return this.steps.filter(e=>e.type===t)}getSortedProcessorTypes(){return Object.keys(d).filter(t=>!isNaN(Number(t))).map(t=>Number(t))}async process(t){const e=this.lastProcessorIndexUpdated,n=this.steps;let r=t;try{for(const t of n)this.findProcessorIndexByID(t.id)>=e?(r=await t.process(r),this.cache.set(t.id,r)):r=this.cache.get(t.id)}catch(t){throw Wt.error(t),this.emit("error",r),t}return this.lastProcessorIndexUpdated=n.length,this.emit("afterProcess",r),r}findProcessorIndexByID(t){return this.steps.findIndex(e=>e.id==t)}setLastProcessorIndex(t){const e=this.findProcessorIndexByID(t.id);this.lastProcessorIndexUpdated>e&&(this.lastProcessorIndexUpdated=e)}processorPropsUpdated(t){this.setLastProcessorIndex(t),this.emit("propsUpdated"),this.emit("updated",t)}afterRegistered(t){this.setLastProcessorIndex(t),this.emit("afterRegister"),this.emit("updated",t)}}class Zt extends Z{get type(){return d.Extractor}async _process(t){return await this.props.storage.get(t)}}class Jt extends Z{get type(){return d.Transformer}_process(t){const e=G.fromArray(t.data);return e.length=t.total,e}}class Qt extends Z{get type(){return d.Initiator}_process(){return Object.entries(this.props.serverStorageOptions).filter(([t,e])=>"function"!=typeof e).reduce((e,[n,r])=>t({},e,{[n]:r}),{})}}class Yt extends Z{get type(){return d.Transformer}castData(t){if(!t||!t.length)return[];if(!this.props.header||!this.props.header.columns)return t;const e=qt.leafColumns(this.props.header.columns);return t[0]instanceof Array?t.map(t=>{let n=0;return e.map((e,r)=>void 0!==e.data?(n++,"function"==typeof e.data?e.data(t):e.data):t[r-n])}):"object"!=typeof t[0]||t[0]instanceof Array?[]:t.map(t=>e.map((e,n)=>void 0!==e.data?"function"==typeof e.data?e.data(t):e.data:e.id?t[e.id]:(Wt.error(`Could not find the correct cell for column at position ${n}.\n                          Make sure either 'id' or 'selector' is defined for all columns.`),null)))}_process(t){return{data:this.castData(t.data),total:t.total}}}class te{static createFromConfig(t){const e=new Xt;return t.storage instanceof Gt&&e.register(new Qt({serverStorageOptions:t.server})),e.register(new Zt({storage:t.storage})),e.register(new Yt({header:t.header})),e.register(new Jt),e}}class ee{constructor(t){this.state=void 0,this.listeners=[],this.isDispatching=!1,this.getState=()=>this.state,this.getListeners=()=>this.listeners,this.dispatch=t=>{if("function"!=typeof t)throw new Error("Reducer is not a function");if(this.isDispatching)throw new Error("Reducers may not dispatch actions");this.isDispatching=!0;const e=this.state;try{this.state=t(this.state)}finally{this.isDispatching=!1}for(const t of this.listeners)t(this.state,e);return this.state},this.subscribe=t=>{if("function"!=typeof t)throw new Error("Listener is not a function");return this.listeners=[...this.listeners,t],()=>this.listeners=this.listeners.filter(e=>e!==t)},this.state=t}}const ne=function(t,e){var n={__c:e="__cC"+u++,__:null,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(function(t){t.__e=!0,S(t)})},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}();class re{constructor(){Object.assign(this,re.defaultConfig())}assign(t){return Object.assign(this,t)}update(e){return e?(this.assign(re.fromPartialConfig(t({},this,e))),this):this}static defaultConfig(){return{store:new ee({status:e.Init,header:void 0,data:null}),plugin:new Ot,tableRef:{current:null},width:"100%",height:"auto",processingThrottleMs:100,autoWidth:!0,style:{},className:{}}}static fromPartialConfig(t){const e=(new re).assign(t);return"boolean"==typeof t.sort&&t.sort&&e.assign({sort:{multiColumn:!0}}),e.assign({header:qt.createFromConfig(e)}),e.assign({storage:Kt.createFromConfig(e)}),e.assign({pipeline:te.createFromConfig(e)}),e.assign({translator:new Pt(e.language)}),e.search&&(e.plugin.remove("search"),e.plugin.add({id:"search",position:jt.Header,component:Dt})),e.pagination&&(e.plugin.remove("pagination"),e.plugin.add({id:"pagination",position:jt.Footer,component:Mt})),e.plugins&&(e.plugins.forEach(t=>e.plugin.add(t)),e.plugins.forEach(t=>{e.plugin.remove(t.id),e.plugin.add(t)})),e}}function oe(e){const n=St();return y("td",t({role:e.role,colSpan:e.colSpan,"data-column-id":e.column&&e.column.id,className:Y(Q("td"),e.className,n.className.td),style:t({},e.style,n.style.td),onClick:t=>{e.messageCell||n.eventEmitter.emit("cellClick",t,e.cell,e.column,e.row)}},(r=e.column)?"function"==typeof r.attributes?r.attributes(e.cell.data,e.row,e.column):r.attributes:{}),e.column&&"function"==typeof e.column.formatter?e.column.formatter(e.cell.data,e.row,e.column):e.column&&e.column.plugin?y(Bt,{pluginId:e.column.id,props:{column:e.column,cell:e.cell,row:e.row}}):e.cell.data);var r}function se(t){const e=St(),n=Tt(t=>t.header);return y("tr",{className:Y(Q("tr"),e.className.tr),onClick:n=>{t.messageRow||e.eventEmitter.emit("rowClick",n,t.row)}},t.children?t.children:t.row.cells.map((e,r)=>{const o=(t=>{if(n){const e=qt.leafColumns(n.columns);if(e)return e[t]}return null})(r);return o&&o.hidden?null:y(oe,{key:e.id,cell:e,row:t.row,column:o})}))}function ie(t){return y(se,{messageRow:!0},y(oe,{role:"alert",colSpan:t.colSpan,messageCell:!0,cell:new z(t.message),className:Y(Q("message"),t.className?t.className:null)}))}function le(){const t=St(),n=Tt(t=>t.data),r=Tt(t=>t.status),o=Tt(t=>t.header),s=Et(),i=()=>o?o.visibleColumns.length:0;return y("tbody",{className:Y(Q("tbody"),t.className.tbody)},n&&n.rows.map(t=>y(se,{key:t.id,row:t})),r===e.Loading&&(!n||0===n.length)&&y(ie,{message:s("loading"),colSpan:i(),className:Y(Q("loading"),t.className.loading)}),r===e.Rendered&&n&&0===n.length&&y(ie,{message:s("noRecordsFound"),colSpan:i(),className:Y(Q("notfound"),t.className.notfound)}),r===e.Error&&y(ie,{message:s("error"),colSpan:i(),className:Y(Q("error"),t.className.error)}))}class ae extends Z{validateProps(){for(const t of this.props.columns)void 0===t.direction&&(t.direction=1),1!==t.direction&&-1!==t.direction&&Wt.error(`Invalid sort direction ${t.direction}`)}get type(){return d.Sort}compare(t,e){return t>e?1:t<e?-1:0}compareWrapper(t,e){let n=0;for(const r of this.props.columns){if(0!==n)break;{const o=t.cells[r.index].data,s=e.cells[r.index].data;n|="function"==typeof r.compare?r.compare(o,s)*r.direction:this.compare(o,s)*r.direction}}return n}_process(t){const e=[...t.rows];e.sort(this.compareWrapper.bind(this));const n=new G(e);return n.length=t.length,n}}const ce=(e,n,r,o)=>s=>{var i;let l=null!=(i=s.sort)&&i.columns?s.sort.columns.map(e=>t({},e)):[];const a=l.length,c=l.find(t=>t.index===e);let u=!1,d=!1,p=!1,_=!1;if(void 0!==c?r?-1===c.direction?p=!0:_=!0:1===a?_=!0:a>1&&(d=!0,u=!0):0===a?u=!0:a>0&&!r?(u=!0,d=!0):a>0&&r&&(u=!0),d&&(l=[]),u)l.push({index:e,direction:n,compare:o});else if(_){const t=l.indexOf(c);l[t].direction=n}else if(p){const t=l.indexOf(c);l.splice(t,1)}return t({},s,{sort:{columns:l}})},ue=(e,n,r)=>o=>{const s=(o.sort?[...o.sort.columns]:[]).find(t=>t.index===e);return t({},o,s?ce(e,1===s.direction?-1:1,n,r)(o):ce(e,1,n,r)(o))};class de extends Z{get type(){return d.ServerSort}_process(e){const n={};return this.props.url&&(n.url=this.props.url(e.url,this.props.columns)),this.props.body&&(n.body=this.props.body(e.body,this.props.columns)),t({},e,n)}}function pe(e){const n=St(),{dispatch:r}=Lt(),o=Et(),[s,i]=ht(0),l=n.sort,a=Tt(t=>t.sort),c="object"==typeof(null==l?void 0:l.server)?d.ServerSort:d.Sort,u=()=>{const t=n.pipeline.getStepsByType(c);if(t.length)return t[0]};return ft(()=>{const e=u()||(c===d.ServerSort?new de(t({columns:a?a.columns:[]},l.server)):new ae({columns:a?a.columns:[]}));return n.pipeline.tryRegister(e),()=>n.pipeline.unregister(e)},[n]),ft(()=>{if(!a)return;const t=a.columns.find(t=>t.index===e.index);i(t?t.direction:0)},[a]),ft(()=>{const t=u();t&&a&&t.setProps({columns:a.columns})},[a]),y("button",{tabIndex:-1,"aria-label":o("sort.sort"+(1===s?"Desc":"Asc")),title:o("sort.sort"+(1===s?"Desc":"Asc")),className:Y(Q("sort"),Q("sort",(t=>1===t?"asc":-1===t?"desc":"neutral")(s)),n.className.sort),onClick:t=>{t.preventDefault(),t.stopPropagation(),r(ue(e.index,!0===t.shiftKey&&l.multiColumn,e.compare))}})}const _e=(t,e=100)=>{let n,r=Date.now();const o=(...e)=>{r=Date.now(),t(...e)};return(...t)=>{const s=Date.now()-r;s>=e?o(...t):(n&&clearTimeout(n),n=setTimeout(()=>{o(...t),n=null},e-s))}};function he(t){let e;const n=t=>t instanceof MouseEvent?Math.floor(t.pageX):Math.floor(t.changedTouches[0].pageX),r=r=>{r.stopPropagation();const i=parseInt(t.thRef.current.style.width,10)-n(r);e=_e(t=>o(t,i),10),document.addEventListener("mouseup",s),document.addEventListener("touchend",s),document.addEventListener("mousemove",e),document.addEventListener("touchmove",e)},o=(e,r)=>{e.stopPropagation();const o=t.thRef.current;r+n(e)>=parseInt(o.style.minWidth,10)&&(o.style.width=`${r+n(e)}px`)},s=t=>{t.stopPropagation(),document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",e),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",s)};return y("div",{className:Y(Q("th"),Q("resizable")),onMouseDown:r,onTouchStart:r,onClick:t=>t.stopPropagation()})}function fe(e){const n=St(),r=mt(null),[o,s]=ht({}),{dispatch:i}=Lt();ft(()=>{if(n.fixedHeader&&r.current){const t=r.current.offsetTop;"number"==typeof t&&s({top:t})}},[r]);const l=()=>null!=e.column.sort,a=t=>{t.stopPropagation(),l()&&i(ue(e.index,!0===t.shiftKey&&n.sort.multiColumn,e.column.sort.compare))};return y("th",t({ref:r,"data-column-id":e.column&&e.column.id,className:Y(Q("th"),l()?Q("th","sort"):null,n.fixedHeader?Q("th","fixed"):null,n.className.th),onClick:a,style:t({},n.style.th,{minWidth:e.column.minWidth,width:e.column.width},o,e.style),onKeyDown:t=>{l()&&13===t.which&&a(t)},rowSpan:e.rowSpan>1?e.rowSpan:void 0,colSpan:e.colSpan>1?e.colSpan:void 0},(()=>{const t=e.column;return t?"function"==typeof t.attributes?t.attributes(null,null,e.column):t.attributes:{}})(),l()?{tabIndex:0}:{}),y("div",{className:Q("th","content")},void 0!==e.column.name?e.column.name:void 0!==e.column.plugin?y(Bt,{pluginId:e.column.plugin.id,props:{column:e.column}}):null),l()&&y(pe,t({index:e.index},e.column.sort)),e.column.resizable&&e.index<n.header.visibleColumns.length-1&&y(he,{column:e.column,thRef:r}))}function me(){const t=St(),e=Tt(t=>t.header);return e?y("thead",{key:e.id,className:Y(Q("thead"),t.className.thead)},(()=>{const t=qt.tabularFormat(e.columns);return t.map((n,r)=>((t,n,r)=>{const o=qt.leafColumns(e.columns);return y(se,null,t.map(t=>t.hidden?null:((t,e,n,r)=>{const{rowSpan:o,colSpan:s}=function(t,e,n){const r=qt.maximumDepth(t),o=n-e;return{rowSpan:Math.floor(o-r-r/o),colSpan:t.columns&&t.columns.length||1}}(t,e,r);return y(fe,{column:t,index:n,colSpan:s,rowSpan:o})})(t,n,o.indexOf(t),r)))})(n,r,t.length))})()):null}const ge=e=>n=>t({},n,{header:e}),ye=e=>n=>t({},n,{tableRef:e});function ve(){const e=St(),n=mt(null),{dispatch:r}=Lt();return ft(()=>{n&&r(ye(n))},[n]),y("table",{ref:n,role:"grid",className:Y(Q("table"),e.className.table),style:t({},e.style.table,{height:e.height})},y(me,null),y(le,null))}function be(){const[e,n]=ht(!0),r=mt(null),o=St();return ft(()=>{0===r.current.children.length&&n(!1)},[r]),e?y("div",{ref:r,className:Y(Q("head"),o.className.header),style:t({},o.style.header)},y(Bt,{position:jt.Header})):null}function we(){const e=mt(null),[n,r]=ht(!0),o=St();return ft(()=>{0===e.current.children.length&&r(!1)},[e]),n?y("div",{ref:e,className:Y(Q("footer"),o.className.footer),style:t({},o.style.footer)},y(Bt,{position:jt.Footer})):null}function xe(){const n=St(),{dispatch:r}=Lt(),o=Tt(t=>t.status),s=Tt(t=>t.data),i=Tt(t=>t.tableRef),l={current:null},a=_e(async()=>{r(n=>t({},n,{status:e.Loading}));try{const o=await n.pipeline.process();r((n=>r=>n?t({},r,{data:n,status:e.Loaded}):r)(o)),setTimeout(()=>{r(n=>n.status===e.Loaded?t({},n,{status:e.Rendered}):n)},0)}catch(n){Wt.error(n),r(n=>t({},n,{data:null,status:e.Error}))}},n.processingThrottleMs);return ft(()=>(r(ge(n.header)),a(),n.pipeline.on("updated",a),()=>n.pipeline.off("updated",a)),[]),ft(()=>{n.header&&o===e.Loaded&&null!=s&&s.length&&r(ge(n.header.adjustWidth(n,i,l)))},[s,n,l]),y("div",{role:"complementary",className:Y("gridjs",Q("container"),o===e.Loading?Q("loading"):null,n.className.container),style:t({},n.style.container,{width:n.width})},o===e.Loading&&y("div",{className:Q("loading-bar")}),y(be,null),y("div",{className:Q("wrapper"),style:{height:n.height}},y(ve,null)),y(we,null),y("div",{ref:l,id:"gridjs-temp",className:Q("temp")}))}class Ne extends K{constructor(t){super(),this.config=void 0,this.plugin=void 0,this.config=(new re).assign({instance:this,eventEmitter:this}).update(t),this.plugin=this.config.plugin}updateConfig(t){return this.config.update(t),this}createElement(){return y(ne.Provider,{value:this.config,children:y(xe,{})})}forceRender(){return this.config&&this.config.container||Wt.error("Container is empty. Make sure you call render() before forceRender()",!0),this.destroy(),j(this.createElement(),this.config.container),this}destroy(){this.config.pipeline.clearCache(),j(null,this.config.container)}render(t){return t||Wt.error("Container element cannot be null",!0),t.childNodes.length>0?(Wt.error(`The container element ${t} is not empty. Make sure the container is empty and call render() again`),this):(this.config.container=t,j(this.createElement(),t),this)}}export{z as Cell,x as Component,re as Config,Ne as Grid,jt as PluginPosition,V as Row,Q as className,y as createElement,b as createRef,y as h,q as html,St as useConfig,ft as useEffect,mt as useRef,Tt as useSelector,ht as useState,Lt as useStore,Et as useTranslator};
//# sourceMappingURL=gridjs.mjs.map
